!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=44)}([function(e,t,r){"use strict";var n=r(5),i=r(24),a=Object.prototype.toString;function s(e){return"[object Array]"===a.call(e)}function o(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===a.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=2},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(26),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,u={adapter:("undefined"!=typeof XMLHttpRequest?o=r(6):void 0!==t&&(o=r(6)),o),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(a)}),e.exports=u}).call(this,r(4))},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var e=o(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(0),i=r(27),a=r(29),s=r(30),o=r(31),u=r(7),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(32);e.exports=function(e){return new Promise(function(t,c){var h=e.data,f=e.headers;n.isFormData(h)&&delete f["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||o(e.url)||(d=new window.XDomainRequest,p="onload",m=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";f.Authorization="Basic "+l(g+":"+v)}if(d.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[p]=function(){if(d&&(4===d.readyState||m)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:r,config:e,request:d};i(t,c,n),d=null}},d.onerror=function(){c(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var y=r(33),_=(e.withCredentials||o(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;_&&(f[e.xsrfHeaderName]=_)}if("setRequestHeader"in d&&n.forEach(f,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),c(e),d=null)}),void 0===h&&(h=null),d.send(h)})}},function(e,t,r){"use strict";var n=r(28);e.exports=function(e,t,r,i,a){var s=new Error(e);return n(s,t,r,i,a)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){(function(t){parcelRequire=function(t,n,i,a){var s="function"==typeof parcelRequire&&parcelRequire;function o(e,i){if(!n[e]){if(!t[e]){var a="function"==typeof parcelRequire&&parcelRequire;if(!i&&a)return a(e,!0);if(s)return s(e,!0);if("string"==typeof e)return r(2)(e);var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}c.resolve=function(r){return t[e][1][r]||r},c.cache={};var l=n[e]=new o.Module(e);t[e][0].call(l.exports,c,l,l.exports,this)}return n[e].exports;function c(e){return o(c.resolve(e))}}o.isParcelRequire=!0,o.Module=function(e){this.id=e,this.bundle=o,this.exports={}},o.modules=t,o.cache=n,o.parent=s,o.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]};for(var u=0;u<i.length;u++)o(i[u]);if(i.length){var l=o(i[i.length-1]);e.exports=l}return o}({tBW9:[function(e,t,r){t.exports='<?xml version="1.0" encoding="UTF-8"?>\n<ISO5436>\n    <Record1>\n        <Revision disabled=""></Revision>\n        <FeatureType disabled=""></FeatureType>\n        <Axes>\n            <CX>\n                <AxisType disabled=""></AxisType>\n                <DataType disabled=""></DataType>\n                <Increment disabled=""></Increment>\n                <Offset disabled=""></Offset>\n            </CX>\n            <CY>\n                <AxisType disabled=""></AxisType>\n                <DataType disabled=""></DataType>\n                <Increment disabled=""></Increment>\n                <Offset disabled=""></Offset>\n            </CY>\n            <CZ>\n                <AxisType disabled=""></AxisType>\n                <DataType disabled=""></DataType>\n                <Increment disabled=""></Increment>\n                <Offset disabled=""></Offset>\n            </CZ>\n            <Origin>NW</Origin>\n        </Axes>\n    </Record1>\n    <Record2>\n        <Date type="date"></Date>\n        <Creator></Creator>\n        <CalibrationDate type="date"></CalibrationDate>\n        <Comment></Comment>\n        <Instrument>\n            <Manufacturer></Manufacturer>\n            <Model></Model>\n            <Serial></Serial>\n            <Version></Version>\n        </Instrument>\n        <ProbingSystem>\n            <Type></Type>\n            <Identification></Identification>\n        </ProbingSystem>\n    </Record2>\n    <Record3>\n        <MatrixDimension>\n            <SizeX disabled=""></SizeX>\n            <SizeY disabled=""></SizeY>\n            <SizeZ disabled=""></SizeZ>\n        </MatrixDimension>\n        <DataLink>\n            <PointDataLink disabled=""></PointDataLink>\n            <MD5ChecksumPointData disabled=""></MD5ChecksumPointData>\n        </DataLink>\n        <Mask>\n            <Background>#cd7f32</Background>\n        </Mask>\n    </Record3>\n    <Record4>\n        <ChecksumFile disabled=""></ChecksumFile>\n    </Record4>\n</ISO5436>'},{}],Pqnw:[function(e,t,r){!function(e){"use strict";function r(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e,t,n,i,a,s){return r((o=r(r(t,e),r(i,s)))<<(u=a)|o>>>32-u,n);var o,u}function i(e,t,r,i,a,s,o){return n(t&r|~t&i,e,t,a,s,o)}function a(e,t,r,i,a,s,o){return n(t&i|r&~i,e,t,a,s,o)}function s(e,t,r,i,a,s,o){return n(t^r^i,e,t,a,s,o)}function o(e,t,r,i,a,s,o){return n(r^(t|~i),e,t,a,s,o)}function u(e,t){var n,u,l,c,h;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,d=-271733879,p=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)u=f,l=d,c=p,h=m,f=i(f,d,p,m,e[n],7,-680876936),m=i(m,f,d,p,e[n+1],12,-389564586),p=i(p,m,f,d,e[n+2],17,606105819),d=i(d,p,m,f,e[n+3],22,-1044525330),f=i(f,d,p,m,e[n+4],7,-176418897),m=i(m,f,d,p,e[n+5],12,1200080426),p=i(p,m,f,d,e[n+6],17,-1473231341),d=i(d,p,m,f,e[n+7],22,-45705983),f=i(f,d,p,m,e[n+8],7,1770035416),m=i(m,f,d,p,e[n+9],12,-1958414417),p=i(p,m,f,d,e[n+10],17,-42063),d=i(d,p,m,f,e[n+11],22,-1990404162),f=i(f,d,p,m,e[n+12],7,1804603682),m=i(m,f,d,p,e[n+13],12,-40341101),p=i(p,m,f,d,e[n+14],17,-1502002290),f=a(f,d=i(d,p,m,f,e[n+15],22,1236535329),p,m,e[n+1],5,-165796510),m=a(m,f,d,p,e[n+6],9,-1069501632),p=a(p,m,f,d,e[n+11],14,643717713),d=a(d,p,m,f,e[n],20,-373897302),f=a(f,d,p,m,e[n+5],5,-701558691),m=a(m,f,d,p,e[n+10],9,38016083),p=a(p,m,f,d,e[n+15],14,-660478335),d=a(d,p,m,f,e[n+4],20,-405537848),f=a(f,d,p,m,e[n+9],5,568446438),m=a(m,f,d,p,e[n+14],9,-1019803690),p=a(p,m,f,d,e[n+3],14,-187363961),d=a(d,p,m,f,e[n+8],20,1163531501),f=a(f,d,p,m,e[n+13],5,-1444681467),m=a(m,f,d,p,e[n+2],9,-51403784),p=a(p,m,f,d,e[n+7],14,1735328473),f=s(f,d=a(d,p,m,f,e[n+12],20,-1926607734),p,m,e[n+5],4,-378558),m=s(m,f,d,p,e[n+8],11,-2022574463),p=s(p,m,f,d,e[n+11],16,1839030562),d=s(d,p,m,f,e[n+14],23,-35309556),f=s(f,d,p,m,e[n+1],4,-1530992060),m=s(m,f,d,p,e[n+4],11,1272893353),p=s(p,m,f,d,e[n+7],16,-155497632),d=s(d,p,m,f,e[n+10],23,-1094730640),f=s(f,d,p,m,e[n+13],4,681279174),m=s(m,f,d,p,e[n],11,-358537222),p=s(p,m,f,d,e[n+3],16,-722521979),d=s(d,p,m,f,e[n+6],23,76029189),f=s(f,d,p,m,e[n+9],4,-640364487),m=s(m,f,d,p,e[n+12],11,-421815835),p=s(p,m,f,d,e[n+15],16,530742520),f=o(f,d=s(d,p,m,f,e[n+2],23,-995338651),p,m,e[n],6,-198630844),m=o(m,f,d,p,e[n+7],10,1126891415),p=o(p,m,f,d,e[n+14],15,-1416354905),d=o(d,p,m,f,e[n+5],21,-57434055),f=o(f,d,p,m,e[n+12],6,1700485571),m=o(m,f,d,p,e[n+3],10,-1894986606),p=o(p,m,f,d,e[n+10],15,-1051523),d=o(d,p,m,f,e[n+1],21,-2054922799),f=o(f,d,p,m,e[n+8],6,1873313359),m=o(m,f,d,p,e[n+15],10,-30611744),p=o(p,m,f,d,e[n+6],15,-1560198380),d=o(d,p,m,f,e[n+13],21,1309151649),f=o(f,d,p,m,e[n+4],6,-145523070),m=o(m,f,d,p,e[n+11],10,-1120210379),p=o(p,m,f,d,e[n+2],15,718787259),d=o(d,p,m,f,e[n+9],21,-343485551),f=r(f,u),d=r(d,l),p=r(p,c),m=r(m,h);return[f,d,p,m]}function l(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function c(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function h(e){var t,r,n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function f(e){return unescape(encodeURIComponent(e))}function d(e){return function(e){return l(u(c(e),8*e.length))}(f(e))}function p(e,t){return function(e,t){var r,n,i=c(e),a=[],s=[];for(a[15]=s[15]=void 0,i.length>16&&(i=u(i,8*e.length)),r=0;r<16;r+=1)a[r]=909522486^i[r],s[r]=1549556828^i[r];return n=u(a.concat(c(t)),512+8*t.length),l(u(s.concat(n),640))}(f(e),f(t))}function m(e,t,r){return t?r?p(t,e):h(p(t,e)):r?d(e):h(d(e))}"object"==typeof t&&t.exports?t.exports=m:e.md5=m}(this)},{}],Dpmo:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./tree.xml")),a=n(e("blueimp-md5")),s=["disabled","type"],o=new window.DOMParser,u=new window.XMLSerializer,l=e=>{for(let t of e.querySelectorAll("*"))for(let e of s)t.removeAttribute(e);let t=u.serializeToString(e);return t.match(/<\?xml/g)?t:'<?xml version="1.0" encoding="UTF-8"?>\n'+t},c=Symbol(),h=Symbol();r.default=class{constructor(e){this.tree=o.parseFromString(i.default,"text/xml"),this.openNodes=[],this.nodeCounts={},this.data=o.parseFromString(e,"text/xml"),this.removeErrors(),this.merge(),this.data=null}get(e){let t=this.tree.querySelector(e);if(!t)return;let r=t.innerHTML;return!Number.isNaN(parseFloat(r))&&isFinite(r)?Number(r):r}set(e,t){let r=this.tree.querySelector(e);if(!r){let t=e.split(" ");for(let e=0;e<t.length;e++){let n=t.slice(0,e+1).join(" "),i=this.tree.querySelector(n);if(!i){let r=0===e?this.tree.documentElement:void 0;r=r||this.tree.querySelector(t.slice(0,e).join(" ")),i=this.tree.createElement(t[e]),r.appendChild(i)}r=i}}r.innerHTML=t,this[c]=void 0,this[h]=void 0}has(e){return null!==this.tree.querySelector(e)}remove(e){if(!this.has(e))return;let t=this.getNode(e);t.parentNode.removeChild(t),this[c]=void 0,this[h]=void 0}getNode(e){return this.tree.querySelector(e)}getTree(){return this.tree}toString(){return this[c]?this[c]:this[c]=l(this.tree)}merge(e=this.data.documentElement){if(e!==this.data.documentElement&&(this.openNodes.push(e.nodeName),!this.activeNode||this.currentNodeCount>0)){let t=1===this.openNodes.length?this.tree.documentElement:void 0;if(!t){let e=this.openNodes.slice(0,this.openNodes.length-1).join(" ");t=this.tree.querySelector(e)}let r=this.tree.createElement(e.nodeName);this.mergeAttributes(r,e),t.appendChild(r)}if(e.children.length>0)for(let t of Array.from(e.children))this.merge(t);else this.activeNode&&(this.mergeAttributes(this.activeNode,e),e.innerHTML&&(this.activeNode.innerHTML=e.innerHTML),this.currentNodeCount=this.currentNodeCount+1);this.openNodes.pop()}mergeAttributes(e,t){for(let r of t.getAttributeNames())e.setAttribute(r,t.getAttribute(r))}removeErrors(){let e=this.data.querySelector("parsererror");if(e){let t=e.parentElement;t&&(t.removeChild(e),this.error=e)}}get pathName(){return this.openNodes.join(" ")}get currentNodeCount(){return this.pathName in this.nodeCounts?this.nodeCounts[this.pathName]:0}set currentNodeCount(e){this.nodeCounts[this.pathName]=e}get activeNode(){return this.pathName?this.tree.querySelector(this.pathName+`:nth-of-type(${this.currentNodeCount+1})`):void 0}get checksum(){return this[h]?this[h]:this[h]=a.default(this.toString())}}},{"./tree.xml":"tBW9","blueimp-md5":"Pqnw"}],biOE:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={get:(e,t)=>{let r=e.querySelector(`Annotations Annotation[color="${t}"]`);return r?r.innerHTML:void 0},set:(e,t,r)=>{let n=e.ownerDocument,i=e.querySelector("Annotations");i||(i=n.createElement("Annotations"),e.appendChild(i));let a=i.querySelector(`Annotation[color="${t}"]`);return a||((a=n.createElement("Annotation")).setAttribute("color",t),i.appendChild(a)),a.innerHTML=r,!0}}},{}],nl8e:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})};r.default=class{constructor(e){this.enabled=!0,this.maxSize=8,this.pointer=-1,this.stack=[],this.canvas=e.canvas,e.size&&(this.maxSize=e.size),e.enabled&&(this.enabled=e.enabled),this.reset()}capture(){return n(this,void 0,void 0,function*(){if(!this.enabled)return;let e=this.canvas.getImageData();this.stack[++this.pointer]=e;for(let e=this.pointer+1;e<this.stack.length;e++)delete this.stack[e];for(;this.stack.length>this.maxSize;)this.stack.shift()})}restore(e){if(!this.enabled)return;if(e<0||this.stack.length<e||!this.stack[e])throw`History at index ${e} does not exist`;let t=this.stack[e];this.canvas.putImageData(t)}undo(){!this.enabled||this.pointer<=0||this.restore(--this.pointer)}redo(){!this.enabled||this.pointer>=this.stack.length||this.restore(++this.pointer)}reset(){this.stack=[],this.pointer=-1}}},{}],c9bV:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./history.js"));const i={size:8,enabled:!0};class a{constructor(e){this.el=document.createElement("canvas"),this.el.height=e.height,this.el.width=e.width;let t=this.el.getContext("2d");if(null===t)throw"Failed to get the CanvasRenderingContext2D";this.context=t;let r=Object.assign(i,e.history);this.history=new n.default({canvas:this,size:r.size,enabled:r.enabled})}clear(e="white"){this.drawRect({x:0,y:0,width:this.el.width,height:this.el.height,color:e}),this.history.capture()}drawRect({x:e,y:t,width:r,height:n,color:i}){let a=this.context;a.fillStyle=i,a.fillRect(e,t,r,n),this.save()}drawImage(e,t=[0,0]){this.context.drawImage(e,t[0],t[1]),this.save()}getImageData(e={x:0,y:0,width:this.el.width,height:this.el.height}){return this.context.getImageData(e.x,e.y,e.width,e.height)}putImageData(e,t=0,r=0){this.context.putImageData(e,t,r)}toBlob(e="image/png",t=1){return new Promise((r,n)=>{this.el.toBlob(e=>r(e),e,t)})}get historyEnabled(){return this.history.enabled}set historyEnabled(e){this.history.enabled=e,this.save()}get historySize(){return this.history.maxSize}set historySize(e){this.history.maxSize=e}undo(){this.history.undo()}redo(){this.history.redo()}save(){this.history.capture()}static fromImage(e){let t=new a({height:e.naturalWidth,width:e.naturalHeight});return t.drawImage(e),t}}r.default=a},{"./history.js":"nl8e"}],gJnt:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=class{constructor(e){this.active=!1,this.color="red",this.size=5,this.capStyle="round",this.fillPolygons=!0,this.canvas=e.canvas,this.context=e.canvas.context,e.color&&(this.color=e.color),e.size&&(this.size=e.size),e.capStyle&&(this.capStyle=e.capStyle),e.fillPolygons&&(this.fillPolygons=e.fillPolygons),e.nolisteners||this.setupListeners()}setupListeners(){let e=this.canvas.el;e.addEventListener("mousedown",e=>this.begin.apply(this,[e.clientX,e.clientY])),e.addEventListener("mousemove",e=>this.move.apply(this,[e.clientX,e.clientY])),e.addEventListener("mouseup",e=>this.end.apply(this,[e.clientX,e.clientY]))}begin(e,t){if(this.active)return;this.active=!0;let r=this.context;r.lineWidth=this.size,r.strokeStyle=this.color,r.fillStyle=this.color,r.lineCap=this.capStyle,r.beginPath(),r.moveTo(e,t),r.lineTo(e,t),r.stroke()}move(e,t){if(!this.active)return;let r=this.context;r.lineTo(e,t),r.stroke()}end(e,t){if(!this.active)return;let r=this.context;r.lineTo(e,t),r.stroke(),r.closePath(),this.fillPolygons&&r.fill(),this.active=!1,this.canvas.save()}}},{}],kWi2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Canvas",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"Brush",{enumerable:!0,get:function(){return i.default}});var n=a(e("./canvas.js")),i=a(e("./brush.js"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./canvas.js":"c9bV","./brush.js":"gJnt"}],YG3F:[function(e,t,r){"use strict";t.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},{}],"q/Zl":[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],cMKA:[function(e,t,r){var n=e("iota-array"),i=e("is-buffer"),a="undefined"!=typeof Float64Array;function s(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(s);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function u(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var i="generic"===e;if(-1===t){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===t)return a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",new Function("TrivialArray",a)(c[e][0]);a=["'use strict'"];var s=n(t),u=s.map(function(e){return"i"+e}),l="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=s.map(function(e){return"b"+e}).join(","),f=s.map(function(e){return"c"+e}).join(",");a.push("function "+r+"(a,"+h+","+f+",d){this.data=a","this.shape=["+h+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+r+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),i?a.push("return this.data.set("+l+",v)}"):a.push("return this.data["+l+"]=v}"),a.push("proto.get=function "+r+"_get("+u.join(",")+"){"),i?a.push("return this.data.get("+l+")}"):a.push("return this.data["+l+"]}"),a.push("proto.index=function "+r+"_index(",u.join(),"){return "+l+"}"),a.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),p=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");for(a.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");a.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t),v=new Array(t);for(m=0;m<t;++m)g[m]="a[i"+m+"]",v[m]="b[i"+m+"]";for(a.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+v.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset"),m=0;m<t;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(c[e],o)}function l(e){if(i(e))return"buffer";if(a)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,r,n){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===r){r=new Array(i);for(var a=i-1,s=1;a>=0;--a)r[a]=s,s*=t[a]}if(void 0===n)for(n=0,a=0;a<i;++a)r[a]<0&&(n-=(t[a]-1)*r[a]);for(var o=l(e),h=c[o];h.length<=i+1;)h.push(u(o,h.length-1));return(0,h[i+1])(e,t,r,n)}},{"iota-array":"YG3F","is-buffer":"q/Zl"}],"a/V3":[function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,i=e[0],a=e[0],s=1;s<n;++s)if(a=i,t(i=e[s],a)){if(s===r){r++;continue}e[r++]=i}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],i=e[0],a=1;a<r;++a,i=n)if(i=n,(n=e[a])!==i){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},{}],XMcq:[function(e,t,r){"use strict";var n=e("uniq");function i(e,t,r){var n,i,a=e.length,s=t.arrayArgs.length,o=t.indexArgs.length>0,u=[],l=[],c=0,h=0;for(n=0;n<a;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<s;++i)for(n=0;n<a;++n)h=c,c=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",h,"*t",i,"p",h,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=a-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<a;++n){for(h=c,c=e[n],i=0;i<s;++i)u.push(["p",i,"+=d",i,"s",n].join(""));o&&(n>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function a(e,t,r){for(var n=e.body,i=[],a=[],s=0;s<e.args.length;++s){var o=e.args[s];if(!(o.count<=0)){var u=new RegExp(o.name,"g"),l="",c=t.arrayArgs.indexOf(s);switch(t.argTypes[s]){case"offset":var h=t.offsetArgIndex.indexOf(s);c=t.offsetArgs[h].array,l="+q"+h;case"array":l="p"+c+l;var f="l"+s,d="a"+c;if(0===t.arrayBlockIndices[c])1===o.count?"generic"===r[c]?o.lvalue?(i.push(["var ",f,"=",d,".get(",l,")"].join("")),n=n.replace(u,f),a.push([d,".set(",l,",",f,")"].join(""))):n=n.replace(u,[d,".get(",l,")"].join("")):n=n.replace(u,[d,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",f,"=",d,".get(",l,")"].join("")),n=n.replace(u,f),o.lvalue&&a.push([d,".set(",l,",",f,")"].join(""))):(i.push(["var ",f,"=",d,"[",l,"]"].join("")),n=n.replace(u,f),o.lvalue&&a.push([d,"[",l,"]=",f].join("")));else{for(var p=[o.name],m=[l],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)p.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+c+"b"+g);if(u=new RegExp(p.join(""),"g"),l=m.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[d,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(s));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+a:t[n]=i.charAt(0)+a,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}t.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,o=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)u[l]=t[2*l],o[l]=t[2*l+1];var c=[],h=[],f=[],d=[],p=[];for(l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(f.push(0),d.push(r),c.push(r),h.push(r+e.arrayBlockIndices[l])):(f.push(e.arrayBlockIndices[l]),d.push(e.arrayBlockIndices[l]+r),c.push(0),h.push(e.arrayBlockIndices[l]));for(var m=[],g=0;g<o[l].length;g++)f[l]<=o[l][g]&&o[l][g]<d[l]&&m.push(o[l][g]-f[l]);p.push(m)}var v=["SS"],y=["'use strict'"],_=[];for(g=0;g<r;++g)_.push(["s",g,"=SS[",g,"]"].join(""));for(l=0;l<e.arrayArgs.length;++l){for(v.push("a"+l),v.push("t"+l),v.push("p"+l),g=0;g<r;++g)_.push(["t",l,"p",g,"=t",l,"[",f[l]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[l]);++g)_.push(["t",l,"b",g,"=t",l,"[",c[l]+g,"]"].join(""))}for(l=0;l<e.scalarArgs.length;++l)v.push("Y"+l);if(e.shapeArgs.length>0&&_.push("shape=SS.slice(0)"),e.indexArgs.length>0){var b=new Array(r);for(l=0;l<r;++l)b[l]="0";_.push(["index=[",b.join(","),"]"].join(""))}for(l=0;l<e.offsetArgs.length;++l){var w=e.offsetArgs[l],E=[];for(g=0;g<w.offset.length;++g)0!==w.offset[g]&&(1===w.offset[g]?E.push(["t",w.array,"p",g].join("")):E.push([w.offset[g],"*t",w.array,"p",g].join("")));0===E.length?_.push("q"+l+"=0"):_.push(["q",l,"=",E.join("+")].join(""))}var x=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((_=_.concat(x)).length>0&&y.push("var "+_.join(",")),l=0;l<e.arrayArgs.length;++l)y.push("p"+l+"|=0");e.pre.body.length>3&&y.push(a(e.pre,e,u));var A=a(e.body,e,u),T=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(p);T<r?y.push(function(e,t,r,n){for(var a=t.length,s=r.arrayArgs.length,o=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<s;++c)l.push(["var offset",c,"=p",c].join(""));for(c=e;c<a;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",o,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",o].join("")),l.push(["j",c,"-=",o,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<s;++c){for(var h=["offset"+c],f=e;f<a;++f)h.push(["j",f,"*t",c,"p",t[f]].join(""));l.push(["p",c,"=(",h.join("+"),")"].join(""))}for(l.push(i(t,r,n)),c=e;c<a;++c)l.push("}");return l.join("\n")}(T,p[0],e,A)):y.push(i(p[0],e,A)),e.post.body.length>3&&y.push(a(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",T,s(u)].join("");return new Function(["function ",S,"(",v.join(","),"){",y.join("\n"),"} return ",S].join(""))()}},{uniq:"a/V3"}],PgdI:[function(e,t,r){"use strict";var n=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],s=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var h=e.arrayArgs[c];r.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),a.push("t"+h),a.push("r"+h),s.push("t"+h),s.push("r"+h+".join()"),o.push("array"+h+".data"),o.push("array"+h+".stride"),o.push("array"+h+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)o.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",s.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e))}},{"./compile.js":"XMcq"}],"Kt/t":[function(e,t,r){"use strict";var n=e("./lib/thunk.js");function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var a=0;a<r.length;++a){var s=r[a];if("array"===s||"object"==typeof s&&s.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===s)t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if("index"===s){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===s){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof s||!s.offset)throw new Error("cwise: Unknown argument type "+r[a]);t.argTypes[a]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(a)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t)}},{"./lib/thunk.js":"PgdI"}],o12b:[function(e,t,r){"use strict";var n=e("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function s(e){return n({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName})}function o(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(s(e))}var u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var t=u[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];r[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":"Kt/t"}],gXRl:[function(e,t,r){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(e){return(e>0)-(e<0)},r.abs=function(e){var t=e>>31;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),r.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},r.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},r.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},r.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],fDKz:[function(e,t,r){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,r,n){var i=0|t[n];if(i<=0)return[];var a,s=new Array(i);if(n===t.length-1)for(a=0;a<i;++a)s[a]=r;else for(a=0;a<i;++a)s[a]=e(t,r,n+1);return s}(e,t,0)}return[]}},{}],yh9p:[function(e,t,r){"use strict";r.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){for(var t,r=l(e),n=r[0],s=r[1],o=new a(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),u=0,c=s>0?n-4:n,h=0;h<c;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,o[u++]=255&t),1===s&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t),o},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],s=0,o=r-i;s<o;s+=16383)a.push(h(e,s,s+16383>o?o:s+16383));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function h(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(c(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],JgNJ:[function(e,t,r){r.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,u=(1<<o)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+h],h+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),a-=l}return(d?-1:1)*s*Math.pow(2,a-n)},r.write=function(e,t,r,n,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(t*u-1)*Math.pow(2,i),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&o,d+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[r+d]=255&s,d+=p,s/=256,l-=8);e[r+d-p]|=128*m}},{}],seLU:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],dskh:[function(e,t,r){arguments[3];var n=arguments[3],i=e("base64-js"),a=e("ieee754"),s=e("isarray");function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r),i=(e=u(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):p(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(h(t),e=u(e,t<0?0:0|m(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|m(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t){if(l.isBuffer(t)){var r=0|m(t.length);return 0===(e=u(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?u(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){var a,s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=r;a<o;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){h=!1;break}if(h)return a}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function w(e,t,r,n){return H(V(t,e.length-r),e,r,n)}function E(e,t,r,n){return H(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return E(e,t,r,n)}function A(e,t,r,n){return H(Y(t),e,r,n)}function T(e,t,r,n){return H(function(e,t){for(var r,n,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}r.Buffer=l,r.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},r.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return c(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?u(e,t):void 0!==r?"string"==typeof n?u(e,t).fill(r,n):u(e,t).fill(r):u(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(n,i),c=e.slice(t,r),h=0;h<o;++h)if(u[h]!==c[h]){a=u[h],s=c[h];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=z(e[a]);return i}function L(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function B(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,i){return i||B(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,i){return i||B(e,0,r,8),a.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=l.isBuffer(e)?e:V(new l(e,n).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Y(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}},{"base64-js":"yh9p",ieee754:"JgNJ",isarray:"seLU",buffer:"dskh"}],"vfn/":[function(e,t,r){arguments[3],e("buffer").Buffer;var n=arguments[3],i=e("buffer").Buffer,a=e("bit-twiddle"),s=e("dup");n.__TYPEDARRAY_POOL||(n.__TYPEDARRAY_POOL={UINT8:s([32,0]),UINT16:s([32,0]),UINT32:s([32,0]),INT8:s([32,0]),INT16:s([32,0]),INT32:s([32,0]),FLOAT:s([32,0]),DOUBLE:s([32,0]),DATA:s([32,0]),UINT8C:s([32,0]),BUFFER:s([32,0])});var o="undefined"!=typeof Uint8ClampedArray,u=n.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=s([32,0])),u.BUFFER||(u.BUFFER=s([32,0]));var l=u.DATA,c=u.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,r=a.log2(t);l[r].push(e)}}function f(e){e=a.nextPow2(e);var t=a.log2(e),r=l[t];return r.length>0?r.pop():new ArrayBuffer(e)}function d(e){return new Uint8Array(f(e),0,e)}function p(e){return new Uint16Array(f(2*e),0,e)}function m(e){return new Uint32Array(f(4*e),0,e)}function g(e){return new Int8Array(f(e),0,e)}function v(e){return new Int16Array(f(2*e),0,e)}function y(e){return new Int32Array(f(4*e),0,e)}function _(e){return new Float32Array(f(4*e),0,e)}function b(e){return new Float64Array(f(8*e),0,e)}function w(e){return o?new Uint8ClampedArray(f(e),0,e):d(e)}function E(e){return new DataView(f(e),0,e)}function x(e){e=a.nextPow2(e);var t=a.log2(e),r=c[t];return r.length>0?r.pop():new i(e)}r.free=function(e){if(i.isBuffer(e))c[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|a.log2(t);l[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=function(e){h(e.buffer)},r.freeArrayBuffer=h,r.freeBuffer=function(e){c[a.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return f(e);switch(t){case"uint8":return d(e);case"uint16":return p(e);case"uint32":return m(e);case"int8":return g(e);case"int16":return v(e);case"int32":return y(e);case"float":case"float32":return _(e);case"double":case"float64":return b(e);case"uint8_clamped":return w(e);case"buffer":return x(e);case"data":case"dataview":return E(e);default:return null}return null},r.mallocArrayBuffer=f,r.mallocUint8=d,r.mallocUint16=p,r.mallocUint32=m,r.mallocInt8=g,r.mallocInt16=v,r.mallocInt32=y,r.mallocFloat32=r.mallocFloat=_,r.mallocFloat64=r.mallocDouble=b,r.mallocUint8Clamped=w,r.mallocDataView=E,r.mallocBuffer=x,r.clearCache=function(){for(var e=0;e<32;++e)u.UINT8[e].length=0,u.UINT16[e].length=0,u.UINT32[e].length=0,u.INT8[e].length=0,u.INT16[e].length=0,u.INT32[e].length=0,u.FLOAT[e].length=0,u.DOUBLE[e].length=0,u.UINT8C[e].length=0,l[e].length=0,c[e].length=0}},{"bit-twiddle":"gXRl",dup:"fDKz",buffer:"dskh"}],"6Wo/":[function(e,t,r){"use strict";var n=e("ndarray"),i=e("ndarray-ops"),a=e("typedarray-pool");t.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||function(e){s=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],o=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],u=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}(e),"number"==typeof arguments[1])return v(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1],r=l(t)?t:t.raw;if(r)return function(e,t,r,n,i,a){var s=g(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,a,t),new f(e,s,r,n,i,a)}(e,r,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return y(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,o=null,u=null;function l(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var c=function(e,t){i.muls(e,t,255)};function h(e,t,r){var n=e.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function f(e,t,r,n,i,a){this.gl=e,this.handle=t,this.format=i,this.type=a,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var s=this,o=[this._wrapS,this._wrapT];Object.defineProperties(o,[{get:function(){return s._wrapS},set:function(e){return s.wrapS=e}},{get:function(){return s._wrapT},set:function(e){return s.wrapT=e}}]),this._wrapVector=o;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return s._shape[0]},set:function(e){return s.width=e}},{get:function(){return s._shape[1]},set:function(e){return s.height=e}}]),this._shapeVector=u}var d=f.prototype;function p(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function m(e,t,r,s,o,u,l,h){var f=h.dtype,d=h.shape.slice();if(d.length<2||d.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var m=0,g=0,v=p(d,h.stride.slice());if("float32"===f?m=e.FLOAT:"float64"===f?(m=e.FLOAT,v=!1,f="float32"):"uint8"===f?m=e.UNSIGNED_BYTE:(m=e.UNSIGNED_BYTE,v=!1,f="uint8"),2===d.length)g=e.LUMINANCE,d=[d[0],d[1],1],h=n(h.data,d,[h.stride[0],h.stride[1],1],h.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])g=e.ALPHA;else if(2===d[2])g=e.LUMINANCE_ALPHA;else if(3===d[2])g=e.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");g=e.RGBA}d[2]}if(g!==e.LUMINANCE&&g!==e.ALPHA||o!==e.LUMINANCE&&o!==e.ALPHA||(g=o),g!==o)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var y=h.size,_=l.indexOf(s)<0;if(_&&l.push(s),m===u&&v)0===h.offset&&h.data.length===y?_?e.texImage2D(e.TEXTURE_2D,s,o,d[0],d[1],0,o,u,h.data):e.texSubImage2D(e.TEXTURE_2D,s,t,r,d[0],d[1],o,u,h.data):_?e.texImage2D(e.TEXTURE_2D,s,o,d[0],d[1],0,o,u,h.data.subarray(h.offset,h.offset+y)):e.texSubImage2D(e.TEXTURE_2D,s,t,r,d[0],d[1],o,u,h.data.subarray(h.offset,h.offset+y));else{var b;b=u===e.FLOAT?a.mallocFloat32(y):a.mallocUint8(y);var w=n(b,d,[d[2],d[2]*d[0],1]);m===e.FLOAT&&u===e.UNSIGNED_BYTE?c(w,h):i.assign(w,h),_?e.texImage2D(e.TEXTURE_2D,s,o,d[0],d[1],0,o,u,b.subarray(0,y)):e.texSubImage2D(e.TEXTURE_2D,s,t,r,d[0],d[1],o,u,b.subarray(0,y)),u===e.FLOAT?a.freeFloat32(b):a.freeUint8(b)}}function g(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function v(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=g(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null),new f(e,s,t,r,n,i)}function y(e,t){var r=t.dtype,s=t.shape.slice(),o=e.getParameter(e.MAX_TEXTURE_SIZE);if(s[0]<0||s[0]>o||s[1]<0||s[1]>o)throw new Error("gl-texture2d: Invalid texture size");var u=p(s,t.stride.slice()),l=0;"float32"===r?l=e.FLOAT:"float64"===r?(l=e.FLOAT,u=!1,r="float32"):"uint8"===r?l=e.UNSIGNED_BYTE:(l=e.UNSIGNED_BYTE,u=!1,r="uint8");var h,d,m=0;if(2===s.length)m=e.LUMINANCE,s=[s[0],s[1],1],t=n(t.data,s,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==s.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===s[2])m=e.ALPHA;else if(2===s[2])m=e.LUMINANCE_ALPHA;else if(3===s[2])m=e.RGB;else{if(4!==s[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=e.RGBA}}l!==e.FLOAT||e.getExtension("OES_texture_float")||(l=e.UNSIGNED_BYTE,u=!1);var v=t.size;if(u)h=0===t.offset&&t.data.length===v?t.data:t.data.subarray(t.offset,t.offset+v);else{var y=[s[2],s[2]*s[0],1];d=a.malloc(v,r);var _=n(d,s,y,0);"float32"!==r&&"float64"!==r||l!==e.UNSIGNED_BYTE?i.assign(_,t):c(_,t),h=d.subarray(0,v)}var b=g(e);return e.texImage2D(e.TEXTURE_2D,0,m,s[0],s[1],0,m,l,h),u||a.free(d),new f(e,b,s[0],s[1],m,l)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&s.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),o.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&s.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),o.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),u.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),u.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(u.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return h(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return h(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,h(this,this._shape[0],e),e}}}),d.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},d.setPixels=function(e,t,r,n){var i=this.gl;this.bind(),Array.isArray(t)?(n=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),n=n||0;var a=l(e)?e:e.raw;if(a)this._mipLevels.indexOf(n)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,t,r,this.format,this.type,a);else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");m(i,t,r,n,this.format,this.type,this._mipLevels,e)}}},{ndarray:"cMKA","ndarray-ops":"o12b","typedarray-pool":"vfn/"}],HIFI:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=i(e("./annotation-handler")),s=e("@talenfisher/canvas"),o=i(e("gl-texture2d"));r.default=class{constructor(e){this.manifest=e.manifest,this.color=this.manifest.get("Record3 Mask Background"),this.dataBuffer=e.data,this.definition=this.manifest.getNode("Record3 Mask"),this.annotations=new Proxy(this.definition,a.default),this.setupCanvas()}getTexture(e){if(this.canvas)return this.texture?this.texture:this.texture=o.default(e,this.canvas.el)}setupCanvas(){return n(this,void 0,void 0,function*(){if(0!==this.width&&0!==this.height)if(this.canvas=new s.Canvas({height:this.height,width:this.width}),this.dataBuffer){let e=yield function(e){return new Promise((t,r)=>{let n=URL.createObjectURL(new Blob([e])),i=new Image;i.onload=(()=>t(i)),i.src=n})}(this.dataBuffer),t=this.canvas.el;this.canvas.context,this.canvas.drawImage(e),this.texture&&this.texture.setPixels(t)}else this.canvas.clear(this.color)})}get height(){return this.manifest.get("Record3 MatrixDimension SizeY")||0}get width(){return this.manifest.get("Record3 MatrixDimension SizeX")||0}}},{"./annotation-handler":"biOE","@talenfisher/canvas":"kWi2","gl-texture2d":"6Wo/"}],FXui:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{get then(){return this.promise.then.bind(this.promise)}get catch(){return this.promise.catch.bind(this.promise)}}},{}],"8wly":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bufferToTypedArray=function(e,t){let r;switch(t){default:case"Float64":r=new Float64Array(e);break;case"Float32":r=new Float32Array(e);break;case"Int32":r=new Int32Array(e);break;case"Int16":r=new Int16Array(e)}return r},r.default={D:{name:"Float64",bytes:8},F:{name:"Float32",bytes:4},L:{name:"Int32",bytes:4},I:{name:"Int16",bytes:2}}},{}],JHoi:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./data-types")),a=Object.keys(i.default);r.default=class{constructor({name:e,manifest:t}){if(!t.has(`Record1 Axes C${e}`))throw new Error(`Axis '${e}' is not defined in the manifest`);this.name=e,this.definition=t.getNode(`Record1 Axes C${e}`),this.manifest=t}get increment(){let e=this.definition.querySelector("Increment");return null!==e?Number(e.innerHTML):0}get dataType(){let e=this.definition.querySelector("DataType");if(null===e||!a.includes(e.innerHTML)){let t=e?e.innerHTML:"null";throw new Error(`'${t}' is not a valid data type`)}return i.default[e.innerHTML.toUpperCase()]}get size(){return this.manifest.get(`Record3 MatrixDimension Size${this.name}`)||0}get values(){return{increment:this.increment,dataType:this.dataType,size:this.size}}}},{"./data-types":"8wly"}],MzYK:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},{}],HfRb:[function(e,t,r){t.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 worldCoordinate;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition;\nuniform bool highlight;\nuniform vec3 highlightColor;\nuniform sampler2D texture;\n\nvarying vec3 eyeDirection, surfaceNormal;\nvarying vec2 planeCoordinate;\nvarying vec4 vColor;\n\nbool approxEqual(vec3 first, vec3 second, float margin) {\n    vec3 diff = second - first;\n    return \n        abs(diff.x) <= margin &&\n        abs(diff.y) <= margin &&\n        abs(diff.z) <= margin;\n}\n\nvoid main() {\n    vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n    gl_Position = projection * view * worldPosition;\n    \n    planeCoordinate = uv;\n\n    vec3 rgb = texture2D(texture, uv).xyz;\n    float a = 1.0;\n\n    if(highlight && !approxEqual(highlightColor, rgb, 1.0e-02)) {\n        a = 0.7;\n    }\n\n    vColor = vec4(rgb, a);\n\n    vec4 cameraCoordinate = view * worldPosition;\n    cameraCoordinate.xyz /= cameraCoordinate.w;\n    eyeDirection = eyePosition - cameraCoordinate.xyz;\n    surfaceNormal = normalize((vec4(normal, 0) * inverseModel).xyz);\n}"},{}],u9LC:[function(e,t,r){t.exports="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nuniform float roughness, fresnel, ambient, diffuse, specular;\n\nvarying vec3 eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n    vec3 normal = normalize(surfaceNormal);\n    vec3 direction = normalize(eyeDirection);\n    \n    if(gl_FrontFacing) {\n        normal = -surfaceNormal;\n    }\n\n    float cSpecular = max(beckmannSpecular(direction, direction, normal, roughness), 0.0);\n    float cDiffuse = min(ambient + diffuse * max(dot(normal, direction), 0.0), 1.0);\n\n    gl_FragColor = vColor.a * vec4(cDiffuse * vColor.rgb + specular * cSpecular, 1.0);\n}"},{}],wYTo:[function(e,t,r){t.exports="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 planeCoordinate;\n\nvec2 splitFloat(float v) {\n    float adjust = 255.0 * v;\n    float upper = floor(adjust);\n    float lower = fract(adjust);\n    \n    return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n    vec2 ux = splitFloat(planeCoordinate.x);\n    vec2 uy = splitFloat(planeCoordinate.y);\n\n    gl_FragColor = vec4(1.0 / 255.0, ux.x, uy.x, ux.y * (uy.y / 16.0));\n}"},{}],yFAN:[function(e,t,r){"use strict";t.exports=function(e,t){for(var r={},n=0;n<e.length;++n)for(var i=e[n].name.split("."),a=r,s=0;s<i.length;++s){var o=i[s].split("[");if(o.length>1){o[0]in a||(a[o[0]]=[]),a=a[o[0]];for(var u=1;u<o.length;++u){var l=parseInt(o[u]);u<o.length-1||s<i.length-1?(l in a||(u<o.length-1?a[l]=[]:a[l]={}),a=a[l]):a[l]=t?n:e[n].type}}else s<i.length-1?(o[0]in a||(a[o[0]]={}),a=a[o[0]]):a[o[0]]=t?n:e[n].type}return r}},{}],"f+nq":[function(e,t,r){function n(e,t,r){this.shortMessage=t||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}n.prototype=new Error,n.prototype.name="GLError",n.prototype.constructor=n,t.exports=n},{}],ATFE:[function(e,t,r){"use strict";var n=e("./reflect"),i=e("./GLError");function a(e){return new Function("y","return function(){return y}")(e)}function s(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}t.exports=function(e,t,r,o){function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var a;if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+a+"fv(locations["+t+"],false,obj"+e+")"}throw new i("","Unknown uniform data type for "+name+": "+r)}if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new i("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+a+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+a+"fv(locations["+t+"],obj"+e+")";default:throw new i("","Unrecognized data type for vector "+name+": "+r)}}}function l(t){for(var n=["return function updateProperty(obj){"],i=function e(t,r){if("object"!=typeof r)return[[t,r]];var n=[];for(var i in r){var a=r[i],s=t;parseInt(i)+""===i?s+="["+i+"]":s+="."+i,"object"==typeof a?n.push.apply(n,e(s,a)):n.push([s,a])}return n}("",t),a=0;a<i.length;++a){var s=i[a],l=s[0],c=s[1];o[c]&&n.push(u(l,c,r[c].type))}return n.push("return obj}"),new Function("gl","locations",n.join("\n"))(e,o)}function c(n,u,c){if("object"==typeof c){var f=h(c);Object.defineProperty(n,u,{get:a(f),set:l(c),enumerable:!0,configurable:!1})}else o[c]?Object.defineProperty(n,u,{get:(d=c,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+d+"])}")(e,t,o)),set:l(c),enumerable:!0,configurable:!1}):n[u]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new i("","Invalid data type");return"b"===e.charAt(0)?s(r,!1):s(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r;if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+e);return s(r*r,0)}throw new i("","Unknown uniform data type for "+name+": "+e)}}(r[c].type);var d}function h(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)c(t,r,e[r])}else for(var n in t={},e)c(t,n,e[n]);return t}var f=n(r,!0);return{get:a(h(f)),set:l(f),enumerable:!0,configurable:!0}}},{"./reflect":"yFAN","./GLError":"f+nq"}],za74:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){for(var a={},u=0,l=r.length;u<l;++u){var c=r[u],h=c.name,f=c.type,d=c.locations;switch(f){case"bool":case"int":case"float":s(e,t,d[0],i,1,a,h);break;default:if(f.indexOf("vec")>=0){if((p=f.charCodeAt(f.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+h+": "+f);s(e,t,d[0],i,p,a,h)}else{if(!(f.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+h+": "+f);var p;if((p=f.charCodeAt(f.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+h+": "+f);o(e,t,d,i,p,a,h)}}}return a};var n=e("./GLError");function i(e,t,r,n,i,a){this._gl=e,this._wrapper=t,this._index=r,this._locations=n,this._dimension=i,this._constFunc=a}var a=i.prototype;function s(e,t,r,n,a,s,o){for(var u=["gl","v"],l=[],c=0;c<a;++c)u.push("x"+c),l.push("x"+c);u.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var h=Function.apply(null,u),f=new i(e,t,r,n,a,h);Object.defineProperty(s,o,{set:function(t){return e.disableVertexAttribArray(n[r]),h(e,n[r],t),t},get:function(){return f},enumerable:!0})}function o(e,t,r,n,i,a,o){for(var u=new Array(i),l=new Array(i),c=0;c<i;++c)s(e,t,r[c],n,i,u,c),l[c]=u[c];Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)l[t].location=e[t];else for(t=0;t<i;++t)l[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;t<i;++t)e[t]=n[r[t]];return e},enumerable:!0}),u.pointer=function(t,a,s,o){t=t||e.FLOAT,a=!!a,s=s||i*i,o=o||0;for(var u=0;u<i;++u){var l=n[r[u]];e.vertexAttribPointer(l,i,t,a,s,o+u*i),e.enableVertexAttribArray(l)}};var h=new Array(i),f=e["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(t){for(var a=0;a<i;++a){var s=n[r[a]];if(e.disableVertexAttribArray(s),Array.isArray(t[0]))f.call(e,s,t[a]);else{for(var o=0;o<i;++o)h[o]=t[i*a+o];f.call(e,s,h)}}return t},get:function(){return u},enumerable:!0})}a.pointer=function(e,t,r,n){var i=this._gl,a=this._locations[this._index];i.vertexAttribPointer(a,this._dimension,e||i.FLOAT,!!t,r||0,n||0),i.enableVertexAttribArray(a)},a.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},{"./GLError":"f+nq"}],wcjg:[function(e,t,r){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(r){return function(r,n){var i,a,s,o,u,l,c,h,f,d=1,p=r.length,m="";for(a=0;a<p;a++)if("string"==typeof r[a])m+=r[a];else if("object"==typeof r[a]){if((o=r[a]).keys)for(i=n[d],s=0;s<o.keys.length;s++){if(null==i)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[s],o.keys[s-1]));i=i[o.keys[s]]}else i=o.param_no?n[o.param_no]:n[d++];if(e.not_type.test(o.type)&&e.not_primitive.test(o.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(o.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(t("[sprintf] expecting number but found %T",i));switch(e.number.test(o.type)&&(h=i>=0),o.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,o.width?parseInt(o.width):0);break;case"e":i=o.precision?parseFloat(i).toExponential(o.precision):parseFloat(i).toExponential();break;case"f":i=o.precision?parseFloat(i).toFixed(o.precision):parseFloat(i);break;case"g":i=o.precision?String(Number(i.toPrecision(o.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=o.precision?i.substring(0,o.precision):i;break;case"t":i=String(!!i),i=o.precision?i.substring(0,o.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=o.precision?i.substring(0,o.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=o.precision?i.substring(0,o.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(o.type)?m+=i:(!e.number.test(o.type)||h&&!o.sign?f="":(f=h?"+":"-",i=i.toString().replace(e.sign,"")),l=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",c=o.width-(f+i).length,u=o.width&&c>0?l.repeat(c):"",m+=o.align?f+i+u:"0"===l?f+u+i:u+f+i)}return m}(function(t){if(i[t])return i[t];for(var r,n=t,a=[],s=0;n;){if(null!==(r=e.text.exec(n)))a.push(r[0]);else if(null!==(r=e.modulo.exec(n)))a.push("%");else{if(null===(r=e.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var o=[],u=r[2],l=[];if(null===(l=e.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(l[1]);""!==(u=u.substring(l[0].length));)if(null!==(l=e.key_access.exec(u)))o.push(l[1]);else{if(null===(l=e.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(l[1])}r[2]=o}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}n=n.substring(r[0].length)}return i[t]=a}(r),arguments)}function n(e,r){return t.apply(null,[e].concat(r||[]))}var i=Object.create(null);void 0!==r&&(r.sprintf=t,r.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=n)}()},{}],P29P:[function(e,t,r){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],WP8n:[function(e,t,r){var n=e("./1.0/numbers");t.exports=function(e){return n[e]}},{"./1.0/numbers":"P29P"}],"1+Ac":[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],Upv1:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],"7RDA":[function(e,t,r){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],zeoU:[function(e,t,r){var n=e("./literals");t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":"1+Ac"}],xM6f:[function(e,t,r){var n=e("./builtins");n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":"7RDA"}],"2Np4":[function(e,t,r){t.exports=function(e){var t,r,x,A=0,T=0,S=u,R=[],k=[],C=1,I=0,M=0,L=!1,N=!1,P="",U=a,O=n;"300 es"===(e=e||{}).version&&(U=o,O=s);var B={},D={};for(A=0;A<U.length;A++)B[U[A]]=!0;for(A=0;A<O.length;A++)D[O[A]]=!0;return function(e){return k=[],null!==e?function(e){var n;for(A=0,e.toString&&(e=e.toString()),P+=e.replace(/\r\n/g,"\n"),x=P.length;t=P[A],A<x;){switch(n=A,S){case c:A="/"===t&&"*"===r?(R.push(t),F(R.join("")),S=u,A+1):(R.push(t),r=t,A+1);break;case h:case f:A="\r"!==t&&"\n"!==t||"\\"===r?(R.push(t),r=t,A+1):(F(R.join("")),S=u,A);break;case d:A=j();break;case p:A="."===t?(R.push(t),S=m,r=t,A+1):/[eE]/.test(t)?(R.push(t),S=m,r=t,A+1):"x"===t&&1===R.length&&"0"===R[0]?(S=w,R.push(t),r=t,A+1):/[^\d]/.test(t)?(F(R.join("")),S=u,A):(R.push(t),r=t,A+1);break;case w:A=/[^a-fA-F0-9]/.test(t)?(F(R.join("")),S=u,A):(R.push(t),r=t,A+1);break;case m:"f"===t&&(R.push(t),r=t,A+=1),A=/[eE]/.test(t)?(R.push(t),r=t,A+1):("-"!==t&&"+"!==t||!/[eE]/.test(r))&&/[^\d]/.test(t)?(F(R.join("")),S=u,A):(R.push(t),r=t,A+1);break;case l:A=V();break;case _:A=/[^\s]/g.test(t)?(F(R.join("")),S=u,A):(R.push(t),r=t,A+1);break;case u:R=R.length?[]:R,A="/"===r&&"*"===t?(M=T+A-1,S=c,r=t,A+1):"/"===r&&"/"===t?(M=T+A-1,S=h,r=t,A+1):"#"===t?(S=f,M=T+A,A):/\s/.test(t)?(S=_,M=T+A,A):(L=/\d/.test(t),N=/[^\w_]/.test(t),M=T+A,S=L?p:N?d:l,A)}if(n!==A)switch(P[n]){case"\n":I=0,++C;break;default:++I}}return T+=A,P=P.slice(A),k}(e):(R.length&&F(R.join("")),S=b,F("(eof)"),k)};function F(e){e.length&&k.push({type:E[S],data:e,position:M,line:C,column:I})}function j(){if("."===r&&/\d/.test(t))return S=m,A;if("/"===r&&"*"===t)return S=c,A;if("/"===r&&"/"===t)return S=h,A;if("."===t&&R.length){for(;z(R););return S=m,A}if(";"===t||")"===t||"("===t){if(R.length)for(;z(R););return F(t),S=u,A+1}var e=2===R.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;z(R););return S=u,A}return R.push(t),r=t,A+1}function z(e){for(var t,r,n=0;;){if(t=i.indexOf(e.slice(0,e.length+n).join("")),r=i[t],-1===t){if(n--+e.length>0)continue;r=e.slice(0,1).join("")}return F(r),M+=r.length,(R=R.slice(r.length)).length}}function V(){if(/[^\d\w_]/.test(t)){var e=R.join("");return S=D[e]?y:B[e]?v:g,F(R.join("")),S=u,A}return R.push(t),r=t,A+1}};var n=e("./lib/literals"),i=e("./lib/operators"),a=e("./lib/builtins"),s=e("./lib/literals-300es"),o=e("./lib/builtins-300es"),u=999,l=9999,c=0,h=1,f=2,d=3,p=4,m=5,g=6,v=7,y=8,_=9,b=10,w=11,E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/literals":"1+Ac","./lib/operators":"Upv1","./lib/builtins":"7RDA","./lib/literals-300es":"zeoU","./lib/builtins-300es":"xM6f"}],qTvY:[function(e,t,r){var n=e("./index");t.exports=function(e,t){var r=n(t),i=[];return(i=i.concat(r(e))).concat(r(null))}},{"./index":"2Np4"}],Ylh2:[function(e,t,r){t.exports=function(e){return atob(e)}},{}],f7tL:[function(e,t,r){var n=e("glsl-tokenizer"),i=e("atob-lite");t.exports=function(e){for(var t=Array.isArray(e)?e:n(e),r=0;r<t.length;r++){var a=t[r];if("preprocessor"===a.type){var s=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var o=s[1],u=s[2];return(o?i(u):u).trim()}}}}},{"glsl-tokenizer":"qTvY","atob-lite":"Ylh2"}],nhwh:[function(e,t,r){"use strict";var n,i="";t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var r=e.length*t;if(n!==e||void 0===n)n=e,i="";else if(i.length>=r)return i.substr(0,r);for(;r>i.length&&t>1;)1&t&&(i+=e),t>>=1,e+=e;return i=(i+=e).substr(0,r)}},{}],IZpX:[function(e,t,r){"use strict";var n=e("repeat-string");t.exports=function(e,t,r){return n(r=void 0!==r?r+"":" ",t)+e}},{"repeat-string":"nhwh"}],"P+TM":[function(e,t,r){var n=e("pad-left");t.exports=function(e,t,r){t="number"==typeof t?t:1,r=r||": ";var i=e.split(/\r?\n/),a=String(i.length+t-1).length;return i.map(function(e,i){var s=i+t,o=String(s).length;return n(s,a-o)+r+e}).join("\n")}},{"pad-left":"IZpX"}],"3ox6":[function(e,t,r){var n=e("sprintf-js").sprintf,i=e("gl-constants/lookup"),a=e("glsl-shader-name"),s=e("add-line-numbers");t.exports=function(e,t,r){"use strict";var o=a(t)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var l=n("Error compiling %s shader %s:\n",u,o),c=n("%s%s",l,e),h=e.split("\n"),f={},d=0;d<h.length;d++){var p=h[d];if(""!==p&&"\0"!==p){var m=parseInt(p.split(":")[2]);if(isNaN(m))throw new Error(n("Could not parse error: %s",p));f[m]=p}}var g=s(t).split("\n");for(d=0;d<g.length;d++)if((f[d+3]||f[d+2]||f[d+1])&&(l+=g[d]+"\n",f[d+1])){var v=f[d+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),l+=n("^^^ %s\n\n",v)}return{long:l.trim(),short:c.trim()}}},{"sprintf-js":"wcjg","gl-constants/lookup":"WP8n","glsl-shader-name":"f7tL","add-line-numbers":"P+TM"}],A5Yq:[function(e,t,r){t.exports=function(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}},{}],bior:[function(e,t,r){var n=e("./hidden-store.js");t.exports=function(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},{"./hidden-store.js":"A5Yq"}],"1UYZ":[function(e,t,r){var n=e("./create-store.js");t.exports=function(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){return e(t).value=r,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},{"./create-store.js":"bior"}],aI5b:[function(e,t,r){"use strict";r.shader=function(e,t,r){return f(e).getShaderReference(t,r)},r.program=function(e,t,r,n,i){return f(e).getProgram(t,r,n,i)};var n=e("./GLError"),i=e("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap),s=0;function o(e,t,r,n,i,a,s){this.id=e,this.src=t,this.type=r,this.shader=n,this.count=a,this.programs=[],this.cache=s}function u(e){this.gl=e,this.shaders=[{},{}],this.programs={}}o.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,r=this.programs,n=0,i=r.length;n<i;++n){var a=e.programs[r[n]];a&&(delete e.programs[n],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var l=u.prototype;function c(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(a);try{var o=i(s,r,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new n(s,"Error compiling shader:\n"+s)}throw new n(s,o.short,o.long)}return a}function h(e,t,r,i,a){var s=e.createProgram();e.attachShader(s,t),e.attachShader(s,r);for(var o=0;o<i.length;++o)e.bindAttribLocation(s,a[o],i[o]);if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){var u=e.getProgramInfoLog(s);throw new n(u,"Error linking program: "+u)}return s}function f(e){var t=a.get(e);return t||(t=new u(e),a.set(e,t)),t}l.getShaderReference=function(e,t){var r=this.gl,n=this.shaders[e===r.FRAGMENT_SHADER|0],i=n[t];if(i&&r.isShader(i.shader))i.count+=1;else{var a=c(r,e,t);i=n[t]=new o(s++,t,e,a,[],1,this)}return i},l.getProgram=function(e,t,r,n){var i=[e.id,t.id,r.join(":"),n.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=h(this.gl,e.shader,t.shader,r,n),e.programs.push(i),t.programs.push(i)),a}},{"./GLError":"f+nq","gl-format-compiler-error":"3ox6","weakmap-shim":"1UYZ"}],jBqk:[function(e,t,r){"use strict";r.uniforms=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],i=0;i<r;++i){var s=e.getActiveUniform(t,i);if(s){var o=a(e,s.type);if(s.size>1)for(var u=0;u<s.size;++u)n.push({name:s.name.replace("[0]","["+u+"]"),type:o});else n.push({name:s.name,type:o})}}return n},r.attributes=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=[],i=0;i<r;++i){var s=e.getActiveAttrib(t,i);s&&n.push({name:s.name,type:a(e,s.type)})}return n};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function a(e,t){if(!i){var r=Object.keys(n);i={};for(var a=0;a<r.length;++a){var s=r[a];i[e[s]]=n[s]}}return i[t]}},{}],"uU+/":[function(e,t,r){"use strict";var n=e("./lib/create-uniforms"),i=e("./lib/create-attributes"),a=e("./lib/reflect"),s=e("./lib/shader-cache"),o=e("./lib/runtime-reflect"),u=e("./lib/GLError");function l(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=l.prototype;function h(e,t){return e.name<t.name?-1:1}c.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(t>r)for(e=r;e<t;e++)this.gl.enableVertexAttribArray(e);else if(r>t)for(e=t;e<r;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},c.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(e,t,r,l){if(!t||1===arguments.length){var c=e;e=c.vertex,t=c.fragment,r=c.uniforms,l=c.attributes}var f=this,d=f.gl,p=f._vref;f._vref=s.shader(d,d.VERTEX_SHADER,e),p&&p.dispose(),f.vertShader=f._vref.shader;var m=this._fref;if(f._fref=s.shader(d,d.FRAGMENT_SHADER,t),m&&m.dispose(),f.fragShader=f._fref.shader,!r||!l){var g=d.createProgram();if(d.attachShader(g,f.fragShader),d.attachShader(g,f.vertShader),d.linkProgram(g),!d.getProgramParameter(g,d.LINK_STATUS)){var v=d.getProgramInfoLog(g);throw new u(v,"Error linking program:"+v)}r=r||o.uniforms(d,g),l=l||o.attributes(d,g),d.deleteProgram(g)}(l=l.slice()).sort(h);var y,_=[],b=[],w=[];for(y=0;y<l.length;++y){var E=l[y];if(E.type.indexOf("mat")>=0){for(var x=0|E.type.charAt(E.type.length-1),A=new Array(x),T=0;T<x;++T)A[T]=w.length,b.push(E.name+"["+T+"]"),"number"==typeof E.location?w.push(E.location+T):Array.isArray(E.location)&&E.location.length===x&&"number"==typeof E.location[T]?w.push(0|E.location[T]):w.push(-1);_.push({name:E.name,type:E.type,locations:A})}else _.push({name:E.name,type:E.type,locations:[w.length]}),b.push(E.name),"number"==typeof E.location?w.push(0|E.location):w.push(-1)}var S=0;for(y=0;y<w.length;++y)if(w[y]<0){for(;w.indexOf(S)>=0;)S+=1;w[y]=S}var R=new Array(r.length);function k(){f.program=s.program(d,f._vref,f._fref,b,w);for(var e=0;e<r.length;++e)R[e]=d.getUniformLocation(f.program,r[e].name)}k(),f._relink=k,f.types={uniforms:a(r),attributes:a(l)},f.attributes=i(d,f,_,w),Object.defineProperty(f,"uniforms",n(d,f,r,R))},t.exports=function(e,t,r,n,i){var a=new l(e);return a.update(t,r,n,i),a}},{"./lib/create-uniforms":"ATFE","./lib/create-attributes":"za74","./lib/reflect":"yFAN","./lib/shader-cache":"aI5b","./lib/runtime-reflect":"jBqk","./lib/GLError":"f+nq"}],Tpxu:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./glsl/vertex.glsl")),a=n(e("./glsl/fragment.glsl")),s=n(e("./glsl/pick.glsl")),o=n(e("gl-shader")),u={mesh:a.default,pick:s.default};r.default=function(e,t="mesh"){let r=i.default,n=u[t]||void 0;if(!n)throw new Error(`${t} is not a valid fragment shader`);let a=o.default(e,r,n,void 0,[{name:"worldCoordinate",type:"vec3"},{name:"normal",type:"vec3"},{name:"uv",type:"vec2"}]);return a.attributes.worldCoordinate.location=0,a.attributes.normal.location=1,a.attributes.uv.location=2,a}},{"./glsl/vertex.glsl":"HfRb","./glsl/fragment.glsl":"u9LC","./glsl/pick.glsl":"wYTo","gl-shader":"uU+/"}],"1IGT":[function(e,t,r){"use strict";var n=e("typedarray-pool"),i=e("ndarray-ops"),a=e("ndarray"),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(e,t,r,n,i){this.gl=e,this.type=t,this.handle=r,this.length=n,this.usage=i}var u=o.prototype;function l(e,t,r,n,i,a){var s=i.length*i.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,i,n),s;if(s+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,i),r}function c(e,t){for(var r=n.malloc(e.length,t),i=e.length,a=0;a<i;++a)r[a]=e[a];return r}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var r=e.dtype;if(s.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16"),r===e.dtype&&function(e,t){for(var r=1,n=t.length-1;n>=0;--n){if(t[n]!==r)return!1;r*=e[n]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=l(this.gl,this.type,this.length,this.usage,e.data,t):this.length=l(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var o=n.malloc(e.size,r),u=a(o,e.shape);i.assign(u,e),this.length=l(this.gl,this.type,this.length,this.usage,t<0?o:o.subarray(0,e.size),t),n.free(o)}}else if(Array.isArray(e)){var h;h=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(e,"uint16"):c(e,"float32"),this.length=l(this.gl,this.type,this.length,this.usage,t<0?h:h.subarray(0,e.length),t),n.free(h)}else if("object"==typeof e&&"number"==typeof e.length)this.length=l(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=function(e,t,r,n){if(r=r||e.ARRAY_BUFFER,n=n||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),a=new o(e,r,i,0,n);return a.update(t),a}},{"typedarray-pool":"vfn/","ndarray-ops":"o12b",ndarray:"cMKA"}],dYB2:[function(e,t,r){"use strict";t.exports=function(e,t,r){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var n=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var s=a.buffer,o=a.size||4,u=a.type||e.FLOAT,l=!!a.normalized,c=a.stride||0,h=a.offset||0;s.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,o,u,l,c,h)}else{if("number"==typeof a)e.vertexAttrib1f(i,a);else if(1===a.length)e.vertexAttrib1f(i,a[0]);else if(2===a.length)e.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)e.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}e.disableVertexAttribArray(i)}}for(;i<n;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<n;++i)e.disableVertexAttribArray(i)}},{}],AjWg:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e,t,r,n,i,a){this.location=e,this.dimension=t,this.a=r,this.b=n,this.c=i,this.d=a}function a(e,t,r){this.gl=e,this._ext=t,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(e,t,r){if(this.bind(),n(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var a=0;a<e.length;++a){var s=e[a];"number"==typeof s?this._attribs.push(new i(a,1,s)):Array.isArray(s)&&this._attribs.push(new i(a,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!t,this._elementsType=r||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},t.exports=function(e,t){return new a(e,t,t.createVertexArrayOES())}},{"./do-bind.js":"dYB2"}],RyM8:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,r){this._elements=t,this._attributes=e,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._elements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},t.exports=function(e){return new i(e)}},{"./do-bind.js":"dYB2"}],V1D6:[function(e,t,r){"use strict";var n=e("./lib/vao-native.js"),i=e("./lib/vao-emulated.js");function a(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}t.exports=function(e,t,r,s){var o,u=e.createVertexArray?new a(e):e.getExtension("OES_vertex_array_object");return(o=u?n(e,u):i(e)).update(t,r,s),o}},{"./lib/vao-native.js":"AjWg","./lib/vao-emulated.js":"RyM8"}],CJSY:[function(e,t,r){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],bLoX:[function(e,t,r){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],mCqr:[function(e,t,r){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],"xBp+":[function(e,t,r){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],TUrw:[function(e,t,r){t.exports=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],OS9i:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=r*o-n*s,_=r*u-i*s,b=r*l-a*s,w=n*u-i*o,E=n*l-a*o,x=i*l-a*u,A=c*m-h*p,T=c*g-f*p,S=c*v-d*p,R=h*g-f*m,k=h*v-d*m,C=f*v-d*g,I=y*C-_*k+b*R+w*S-E*T+x*A;return I?(I=1/I,e[0]=(o*C-u*k+l*R)*I,e[1]=(i*k-n*C-a*R)*I,e[2]=(m*x-g*E+v*w)*I,e[3]=(f*E-h*x-d*w)*I,e[4]=(u*S-s*C-l*T)*I,e[5]=(r*C-i*S+a*T)*I,e[6]=(g*b-p*x-v*_)*I,e[7]=(c*x-f*b+d*_)*I,e[8]=(s*k-o*S+l*A)*I,e[9]=(n*S-r*k-a*A)*I,e[10]=(p*E-m*b+v*y)*I,e[11]=(h*b-c*E-d*y)*I,e[12]=(o*T-s*R-u*A)*I,e[13]=(r*R-n*T+i*A)*I,e[14]=(m*_-p*w-g*y)*I,e[15]=(c*w-h*_+f*y)*I,e):null}},{}],Fgz6:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=o*(f*v-d*g)-h*(u*v-l*g)+m*(u*d-l*f),e[1]=-(n*(f*v-d*g)-h*(i*v-a*g)+m*(i*d-a*f)),e[2]=n*(u*v-l*g)-o*(i*v-a*g)+m*(i*l-a*u),e[3]=-(n*(u*d-l*f)-o*(i*d-a*f)+h*(i*l-a*u)),e[4]=-(s*(f*v-d*g)-c*(u*v-l*g)+p*(u*d-l*f)),e[5]=r*(f*v-d*g)-c*(i*v-a*g)+p*(i*d-a*f),e[6]=-(r*(u*v-l*g)-s*(i*v-a*g)+p*(i*l-a*u)),e[7]=r*(u*d-l*f)-s*(i*d-a*f)+c*(i*l-a*u),e[8]=s*(h*v-d*m)-c*(o*v-l*m)+p*(o*d-l*h),e[9]=-(r*(h*v-d*m)-c*(n*v-a*m)+p*(n*d-a*h)),e[10]=r*(o*v-l*m)-s*(n*v-a*m)+p*(n*l-a*o),e[11]=-(r*(o*d-l*h)-s*(n*d-a*h)+c*(n*l-a*o)),e[12]=-(s*(h*g-f*m)-c*(o*g-u*m)+p*(o*f-u*h)),e[13]=r*(h*g-f*m)-c*(n*g-i*m)+p*(n*f-i*h),e[14]=-(r*(o*g-u*m)-s*(n*g-i*m)+p*(n*u-i*o)),e[15]=r*(o*f-u*h)-s*(n*f-i*h)+c*(n*u-i*o),e}},{}],"5JuV":[function(e,t,r){t.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],g=e[15];return(t*s-r*a)*(h*g-f*m)-(t*o-n*a)*(c*g-f*p)+(t*u-i*a)*(c*m-h*p)+(r*o-n*s)*(l*g-f*d)-(r*u-i*s)*(l*m-h*d)+(n*u-i*o)*(l*p-c*d)}},{}],Uhn0:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],_=r[0],b=r[1],w=r[2],E=r[3];return e[0]=_*n+b*o+w*h+E*m,e[1]=_*i+b*u+w*f+E*g,e[2]=_*a+b*l+w*d+E*v,e[3]=_*s+b*c+w*p+E*y,_=r[4],b=r[5],w=r[6],E=r[7],e[4]=_*n+b*o+w*h+E*m,e[5]=_*i+b*u+w*f+E*g,e[6]=_*a+b*l+w*d+E*v,e[7]=_*s+b*c+w*p+E*y,_=r[8],b=r[9],w=r[10],E=r[11],e[8]=_*n+b*o+w*h+E*m,e[9]=_*i+b*u+w*f+E*g,e[10]=_*a+b*l+w*d+E*v,e[11]=_*s+b*c+w*p+E*y,_=r[12],b=r[13],w=r[14],E=r[15],e[12]=_*n+b*o+w*h+E*m,e[13]=_*i+b*u+w*f+E*g,e[14]=_*a+b*l+w*d+E*v,e[15]=_*s+b*c+w*p+E*y,e}},{}],bJFL:[function(e,t,r){t.exports=function(e,t,r){var n,i,a,s,o,u,l,c,h,f,d,p,m=r[0],g=r[1],v=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=n*m+o*g+h*v+t[12],e[13]=i*m+u*g+f*v+t[13],e[14]=a*m+l*g+d*v+t[14],e[15]=s*m+c*g+p*v+t[15]),e}},{}],HTs9:[function(e,t,r){t.exports=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],sYT5:[function(e,t,r){t.exports=function(e,t,r,n){var i,a,s,o,u,l,c,h,f,d,p,m,g,v,y,_,b,w,E,x,A,T,S,R,k=n[0],C=n[1],I=n[2],M=Math.sqrt(k*k+C*C+I*I);return Math.abs(M)<1e-6?null:(k*=M=1/M,C*=M,I*=M,i=Math.sin(r),s=1-(a=Math.cos(r)),o=t[0],u=t[1],l=t[2],c=t[3],h=t[4],f=t[5],d=t[6],p=t[7],m=t[8],g=t[9],v=t[10],y=t[11],_=k*k*s+a,b=C*k*s+I*i,w=I*k*s-C*i,E=k*C*s-I*i,x=C*C*s+a,A=I*C*s+k*i,T=k*I*s+C*i,S=C*I*s-k*i,R=I*I*s+a,e[0]=o*_+h*b+m*w,e[1]=u*_+f*b+g*w,e[2]=l*_+d*b+v*w,e[3]=c*_+p*b+y*w,e[4]=o*E+h*x+m*A,e[5]=u*E+f*x+g*A,e[6]=l*E+d*x+v*A,e[7]=c*E+p*x+y*A,e[8]=o*T+h*S+m*R,e[9]=u*T+f*S+g*R,e[10]=l*T+d*S+v*R,e[11]=c*T+p*S+y*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}},{}],"X+ZC":[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*n,e[5]=s*i+c*n,e[6]=o*i+h*n,e[7]=u*i+f*n,e[8]=l*i-a*n,e[9]=c*i-s*n,e[10]=h*i-o*n,e[11]=f*i-u*n,e}},{}],oVHP:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*n,e[1]=s*i-c*n,e[2]=o*i-h*n,e[3]=u*i-f*n,e[8]=a*n+l*i,e[9]=s*n+c*i,e[10]=o*n+h*i,e[11]=u*n+f*i,e}},{}],sYuD:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*n,e[1]=s*i+c*n,e[2]=o*i+h*n,e[3]=u*i+f*n,e[4]=l*i-a*n,e[5]=c*i-s*n,e[6]=h*i-o*n,e[7]=f*i-u*n,e}},{}],Tuda:[function(e,t,r){t.exports=function(e,t,r){var n,i,a,s=r[0],o=r[1],u=r[2],l=Math.sqrt(s*s+o*o+u*u);return Math.abs(l)<1e-6?null:(s*=l=1/l,o*=l,u*=l,n=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=s*s*a+i,e[1]=o*s*a+u*n,e[2]=u*s*a-o*n,e[3]=0,e[4]=s*o*a-u*n,e[5]=o*o*a+i,e[6]=u*o*a+s*n,e[7]=0,e[8]=s*u*a+o*n,e[9]=o*u*a-s*n,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},{}],D8JY:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=n+n,u=i+i,l=a+a,c=n*o,h=n*u,f=n*l,d=i*u,p=i*l,m=a*l,g=s*o,v=s*u,y=s*l;return e[0]=1-(d+m),e[1]=h+y,e[2]=f-v,e[3]=0,e[4]=h-y,e[5]=1-(c+m),e[6]=p+g,e[7]=0,e[8]=f+v,e[9]=p-g,e[10]=1-(c+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],"mh/h":[function(e,t,r){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],kE8D:[function(e,t,r){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],Qwe8:[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],mzKb:[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],"6UCw":[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],"8bSX":[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=r+r,o=n+n,u=i+i,l=r*s,c=n*s,h=n*o,f=i*s,d=i*o,p=i*u,m=a*s,g=a*o,v=a*u;return e[0]=1-h-p,e[1]=c+v,e[2]=f-g,e[3]=0,e[4]=c-v,e[5]=1-l-p,e[6]=d+m,e[7]=0,e[8]=f+g,e[9]=d-m,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],"/wKG":[function(e,t,r){t.exports=function(e,t,r,n,i,a,s){var o=1/(r-t),u=1/(i-n),l=1/(a-s);return e[0]=2*a*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(i+n)*u,e[10]=(s+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*l,e[15]=0,e}},{}],uUkt:[function(e,t,r){t.exports=function(e,t,r,n,i){var a=1/Math.tan(t/2),s=1/(n-i);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*s,e[15]=0,e}},{}],"3HEe":[function(e,t,r){t.exports=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+o),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(s-o)*u*.5,e[9]=(i-a)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}},{}],geji:[function(e,t,r){t.exports=function(e,t,r,n,i,a,s){var o=1/(t-r),u=1/(n-i),l=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*o,e[13]=(i+n)*u,e[14]=(s+a)*l,e[15]=1,e}},{}],"4DbU":[function(e,t,r){var n=e("./identity");t.exports=function(e,t,r,i){var a,s,o,u,l,c,h,f,d,p,m=t[0],g=t[1],v=t[2],y=i[0],_=i[1],b=i[2],w=r[0],E=r[1],x=r[2];return Math.abs(m-w)<1e-6&&Math.abs(g-E)<1e-6&&Math.abs(v-x)<1e-6?n(e):(h=m-w,f=g-E,d=v-x,a=_*(d*=p=1/Math.sqrt(h*h+f*f+d*d))-b*(f*=p),s=b*(h*=p)-y*d,o=y*f-_*h,(p=Math.sqrt(a*a+s*s+o*o))?(a*=p=1/p,s*=p,o*=p):(a=0,s=0,o=0),u=f*o-d*s,l=d*a-h*o,c=h*s-f*a,(p=Math.sqrt(u*u+l*l+c*c))?(u*=p=1/p,l*=p,c*=p):(u=0,l=0,c=0),e[0]=a,e[1]=u,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=d,e[11]=0,e[12]=-(a*m+s*g+o*v),e[13]=-(u*m+l*g+c*v),e[14]=-(h*m+f*g+d*v),e[15]=1,e)}},{"./identity":"xBp+"}],oMVO:[function(e,t,r){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],VVjU:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./create":"CJSY","./clone":"bLoX","./copy":"mCqr","./identity":"xBp+","./transpose":"TUrw","./invert":"OS9i","./adjoint":"Fgz6","./determinant":"5JuV","./multiply":"Uhn0","./translate":"bJFL","./scale":"HTs9","./rotate":"sYT5","./rotateX":"X+ZC","./rotateY":"oVHP","./rotateZ":"sYuD","./fromRotation":"Tuda","./fromRotationTranslation":"D8JY","./fromScaling":"mh/h","./fromTranslation":"kE8D","./fromXRotation":"Qwe8","./fromYRotation":"mzKb","./fromZRotation":"6UCw","./fromQuat":"8bSX","./frustum":"/wKG","./perspective":"uUkt","./perspectiveFromFieldOfView":"3HEe","./ortho":"geji","./lookAt":"4DbU","./str":"oMVO"}],gl3E:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./identity")),a=n(e("./shaders/index")),s=n(e("gl-buffer")),o=e("typedarray-pool"),u=n(e("gl-vao")),l=e("gl-mat4"),c=32;r.default=class{constructor(e){this.clipBounds=[[0,0,0],[0,0,0]],this.dirty=!1,this.ready=!1,this.vertexCount=0,this.uniforms={model:i.default,view:i.default,projection:i.default.slice(),inverseModel:i.default.slice(),highlight:!1,highlightColor:[0,0,0],ambient:1,diffuse:1,specular:1,roughness:1,fresnel:1.5,lightPosition:[0,0,0],eyePosition:[0,0,0],clipBounds:this.clipBounds},this.pickUniforms=Object.assign({},this.uniforms),this.x3p=e.x3p,this.renderer=e.renderer,this.canvas=e.canvas,this.gl=this.canvas.getContext("webgl"),this.shader=a.default(this.gl),this.pickShader=a.default(this.gl,"pick"),this.coordinateBuffer=s.default(this.gl),this.texture=this.x3p.mask.getTexture(this.gl),this.vao=u.default(this.gl,[{buffer:this.coordinateBuffer,size:3,stride:c,offset:0},{buffer:this.coordinateBuffer,size:3,stride:c,offset:12},{buffer:this.coordinateBuffer,size:2,stride:c,offset:24}]),this.update(e)}draw(e){if(!this.ready)return;this.gl.disable(this.gl.CULL_FACE),this.texture.bind(0);let t=this.uniforms;t.model=e.model,t.projection=e.projection,t.view=e.view,t.inverseModel=l.invert(t.inverseModel,t.model),t.highlight=void 0!==this.highlightColor,t.highlightColor=this.highlightColor||[0,0,0];let r=i.default.slice();l.multiply(r,t.view,t.model),l.multiply(r,t.projection,r),l.invert(r,r);for(let e=0;e<3;e++)t.eyePosition[e]=r[12+e]/r[15];this.shader.bind(),this.shader.uniforms=t,this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,this.vertexCount),this.vao.unbind()}drawPick(e){let t=this.pickUniforms;t.model=e.model||i.default,t.view=e.view||i.default,t.projection=e.projection||i.default,t.highlight=!1,t.highlightColor=[0,0,0],this.pickShader.bind(),this.pickShader.uniforms=t,this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,this.vertexCount),this.vao.unbind()}update(e){let t=new Worker("./assets/dist/worker.f20abf7c.js"),{x:r,y:n,z:i}=this.x3p.axes,a=this.x3p.manifest.get("Record1 Axes Origin");if(e&&e.lighting){let t=e.lighting;Object.assign(this.uniforms,t)}t.postMessage({pointBuffer:this.x3p.pointBuffer,axes:{x:r.values,y:n.values,z:i.values},origin:a},[this.x3p.pointBuffer]),t.onmessage=(e=>{this.renderer.setProgressValue(e.data.progress),1===e.data.progress&&(this.vertexCount=e.data.vertexCount,this.coordinateBuffer.update(e.data.buffer.subarray(0,e.data.elementCount)),this.shape=e.data.shape,this.bounds=e.data.bounds,o.freeFloat(e.data.buffer),this.dirty=!0,this.ready=!0,this.onready&&this.onready())})}pick(e){if(!e)return;let t=this.shape,r={index:[0,0],color:[0,0,0]},n=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(n),a=n-i,s=t[1]*(e.value[1]+(15&e.value[2])/16)/255,o=Math.floor(s),u=s-o;return i++,o++,r.index[0]=a<.5?i:i+1,r.index[1]=u<.5?o:o+1,r}dispose(){this.shader.dispose(),this.pickShader.dispose(),this.vao.dispose(),this.coordinateBuffer.dispose()}}},{"./identity":"MzYK","./shaders/index":"Tpxu","gl-buffer":"1IGT","typedarray-pool":"vfn/","gl-vao":"V1D6","gl-mat4":"VVjU","./worker/index.ts":[["worker.f20abf7c.js","R/2G"],"worker.f20abf7c.map","R/2G"]}],"z/6T":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={eye:[0,0,1.4],up:[0,0,0],zoomMax:1.7}},{}],"70rD":[function(e,t,r){},{}],nAQP:[function(e,t,r){arguments[3];var n=arguments[3];t.exports=n.performance&&n.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},{}],DbuA:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,i,a){var s=i-1,o=i*i,u=s*s,l=(1+2*i)*u,c=i*u,h=o*(3-2*i),f=o*s;if(e.length){a||(a=new Array(e.length));for(var d=e.length-1;d>=0;--d)a[d]=l*e[d]+c*t[d]+h*r[d]+f*n[d];return a}return l*e+c*t+h*r+f*n},t.exports.derivative=function(e,t,r,n,i,a){var s=6*i*i-6*i,o=3*i*i-4*i+1,u=-6*i*i+6*i,l=3*i*i-2*i;if(e.length){a||(a=new Array(e.length));for(var c=e.length-1;c>=0;--c)a[c]=s*e[c]+o*t[c]+u*r[c]+l*n[c];return a}return s*e+o*t+u*r[c]+l*n}},{}],"++2h":[function(e,t,r){"use strict";function n(e,t,r,n,i,a){var s=["function ",e,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return a?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),r?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),a?s.push("return -1};"):s.push("return i};"),s.join("")}function i(e,t,r,i){return new Function([n("A","x"+e+"y",t,["y"],!1,i),n("B","x"+e+"y",t,["y"],!0,i),n("P","c(x,y)"+e+"0",t,["y","c"],!1,i),n("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],YRVQ:[function(e,t,r){"use strict";t.exports=function(e,t,r){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return"number"==typeof e?new s(n=u(e),n,0):new s(e,u(e.length),0);case 2:var n;if("number"==typeof t)return new s(e,n=u(e.length),+t);r=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new s(e,t,r)}};var n=e("cubic-hermite"),i=e("binary-search-bounds");function a(e,t,r){return Math.min(t,Math.max(e,r))}function s(e,t,r){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[r],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var o=s.prototype;function u(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}o.flush=function(e){var t=i.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},o.curve=function(e){var t=this._time,r=t.length,s=i.le(t,e),o=this._scratch[0],u=this._state,l=this._velocity,c=this.dimension,h=this.bounds;if(s<0)for(var f=c-1,d=0;d<c;++d,--f)o[d]=u[f];else if(s>=r-1){f=u.length-1;var p=e-t[r-1];for(d=0;d<c;++d,--f)o[d]=u[f]+p*l[f]}else{f=c*(s+1)-1;var m=t[s],g=t[s+1]-m||1,v=this._scratch[1],y=this._scratch[2],_=this._scratch[3],b=this._scratch[4],w=!0;for(d=0;d<c;++d,--f)v[d]=u[f],_[d]=l[f]*g,y[d]=u[f+c],b[d]=l[f+c]*g,w=w&&v[d]===y[d]&&_[d]===b[d]&&0===_[d];if(w)for(d=0;d<c;++d)o[d]=v[d];else n(v,_,y,b,(e-m)/g,o)}var E=h[0],x=h[1];for(d=0;d<c;++d)o[d]=a(E[d],x[d],o[d]);return o},o.dcurve=function(e){var t=this._time,r=t.length,a=i.le(t,e),s=this._scratch[0],o=this._state,u=this._velocity,l=this.dimension;if(a>=r-1)for(var c=o.length-1,h=(t[r-1],0);h<l;++h,--c)s[h]=u[c];else{c=l*(a+1)-1;var f=t[a],d=t[a+1]-f||1,p=this._scratch[1],m=this._scratch[2],g=this._scratch[3],v=this._scratch[4],y=!0;for(h=0;h<l;++h,--c)p[h]=o[c],g[h]=u[c]*d,m[h]=o[c+l],v[h]=u[c+l]*d,y=y&&p[h]===m[h]&&g[h]===v[h]&&0===g[h];if(y)for(h=0;h<l;++h)s[h]=0;else for(n.derivative(p,g,m,v,(e-f)/d,s),h=0;h<l;++h)s[h]/=d}return s},o.lastT=function(){var e=this._time;return e[e.length-1]},o.stable=function(){for(var e=this._velocity,t=e.length,r=this.dimension-1;r>=0;--r)if(e[--t])return!1;return!0},o.jump=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,s=n.length-this.dimension,o=this.bounds,u=o[0],l=o[1];this._time.push(t,e);for(var c=0;c<2;++c)for(var h=0;h<r;++h)n.push(n[s++]),i.push(0);for(this._time.push(e),h=r;h>0;--h)n.push(a(u[h-1],l[h-1],arguments[h])),i.push(0)}},o.push=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,s=n.length-this.dimension,o=e-t,u=this.bounds,l=u[0],c=u[1],h=o>1e-6?1/o:0;this._time.push(e);for(var f=r;f>0;--f){var d=a(l[f-1],c[f-1],arguments[f]);n.push(d),i.push((d-n[s++])*h)}}},o.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var r=this._state,n=this._velocity,i=this.bounds,s=i[0],o=i[1];this._time.push(e);for(var u=t;u>0;--u)r.push(a(s[u-1],o[u-1],arguments[u])),n.push(0)}},o.move=function(e){var t=this.lastT(),r=this.dimension;if(!(e<=t||arguments.length!==r+1)){var n=this._state,i=this._velocity,s=n.length-this.dimension,o=this.bounds,u=o[0],l=o[1],c=e-t,h=c>1e-6?1/c:0;this._time.push(e);for(var f=r;f>0;--f){var d=arguments[f];n.push(a(u[f-1],l[f-1],n[s++]+d)),i.push(d*h)}}},o.idle=function(e){var t=this.lastT();if(!(e<t)){var r=this.dimension,n=this._state,i=this._velocity,s=n.length-r,o=this.bounds,u=o[0],l=o[1],c=e-t;this._time.push(e);for(var h=r-1;h>=0;--h)n.push(a(u[h],l[h],n[s]+c*i[s])),i.push(0),s+=1}}},{"cubic-hermite":"DbuA","binary-search-bounds":"++2h"}],uUtD:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],s=r[0],o=r[1],u=r[2];return e[0]=i*u-a*o,e[1]=a*s-n*u,e[2]=n*o-i*s,e}},{}],JpY9:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}},{}],wcjZ:[function(e,t,r){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],"1R2v":[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.up||[0,1,0],n=e.right||h(r),i=e.radius||1,a=e.theta||0,c=e.phi||0;if(t=[].slice.call(t,0,3),r=[].slice.call(r,0,3),o(r,r),n=[].slice.call(n,0,3),o(n,n),"eye"in e){var d=e.eye,p=[d[0]-t[0],d[1]-t[1],d[2]-t[2]];s(n,p,r),l(n[0],n[1],n[2])<1e-6?n=h(r):o(n,n),i=l(p[0],p[1],p[2]);var m=u(r,p)/i,g=u(n,p)/i;c=Math.acos(m),a=Math.acos(g)}return i=Math.log(i),new f(e.zoomMin,e.zoomMax,t,r,n,i,a,c)};var n=e("filtered-vector"),i=e("gl-mat4/invert"),a=e("gl-mat4/rotate"),s=e("gl-vec3/cross"),o=e("gl-vec3/normalize"),u=e("gl-vec3/dot");function l(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function c(e){return Math.min(1,Math.max(-1,e))}function h(e){var t=Math.abs(e[0]),r=Math.abs(e[1]),n=Math.abs(e[2]),i=[0,0,0];t>Math.max(r,n)?i[2]=1:r>Math.max(t,n)?i[0]=1:i[1]=1;for(var a=0,s=0,u=0;u<3;++u)a+=e[u]*e[u],s+=i[u]*e[u];for(u=0;u<3;++u)i[u]-=s/a*e[u];return o(i,i),i}function f(e,t,r,i,a,s,o,u){this.center=n(r),this.up=n(i),this.right=n(a),this.radius=n([s]),this.angle=n([o,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}var d=f.prototype;d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,r=this.computedRight,n=0,i=0,a=0;a<3;++a)i+=t[a]*r[a],n+=t[a]*t[a];var u=Math.sqrt(n),c=0;for(a=0;a<3;++a)r[a]-=t[a]*i/n,c+=r[a]*r[a],t[a]/=u;var h=Math.sqrt(c);for(a=0;a<3;++a)r[a]/=h;var f=this.computedToward;s(f,t,r),o(f,f);var d=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],m=this.computedAngle[1],g=Math.cos(p),v=Math.sin(p),y=Math.cos(m),_=Math.sin(m),b=this.computedCenter,w=g*y,E=v*y,x=_,A=-g*_,T=-v*_,S=y,R=this.computedEye,k=this.computedMatrix;for(a=0;a<3;++a){var C=w*r[a]+E*f[a]+x*t[a];k[4*a+1]=A*r[a]+T*f[a]+S*t[a],k[4*a+2]=C,k[4*a+3]=0}var I=k[1],M=k[5],L=k[9],N=k[2],P=k[6],U=k[10],O=M*U-L*P,B=L*N-I*U,D=I*P-M*N,F=l(O,B,D);for(O/=F,B/=F,D/=F,k[0]=O,k[4]=B,k[8]=D,a=0;a<3;++a)R[a]=b[a]+k[2+4*a]*d;for(a=0;a<3;++a){c=0;for(var j=0;j<3;++j)c+=k[a+4*j]*R[j];k[12+a]=-c}k[15]=1},d.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r};var p=[0,0,0];d.rotate=function(e,t,r,n){if(this.angle.move(e,t,r),n){this.recalcMatrix(e);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var s=this.computedUp,o=this.computedRight,u=this.computedToward,l=0;l<3;++l)i[4*l]=s[l],i[4*l+1]=o[l],i[4*l+2]=u[l];for(a(i,i,n,p),l=0;l<3;++l)s[l]=i[4*l],o[l]=i[4*l+1];this.up.set(e,s[0],s[1],s[2]),this.right.set(e,o[0],o[1],o[2])}},d.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),s=i[5],o=i[9],u=l(a,s,o);a/=u,s/=u,o/=u;var c=i[0],h=i[4],f=i[8],d=c*a+h*s+f*o,p=l(c-=a*d,h-=s*d,f-=o*d),m=(c/=p)*t+a*r,g=(h/=p)*t+s*r,v=(f/=p)*t+o*r;this.center.move(e,m,g,v);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+n),this.radius.set(e,Math.log(y))},d.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},d.setMatrix=function(e,t,r,n){var a=1;"number"==typeof r&&(a=0|r),(a<0||a>3)&&(a=1);var s=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var o=t[a],u=t[a+4],h=t[a+8];if(n){var f=Math.abs(o),d=Math.abs(u),p=Math.abs(h),m=Math.max(f,d,p);f===m?(o=o<0?-1:1,u=h=0):p===m?(h=h<0?-1:1,o=u=0):(u=u<0?-1:1,o=h=0)}else{var g=l(o,u,h);o/=g,u/=g,h/=g}var v,y,_=t[s],b=t[s+4],w=t[s+8],E=_*o+b*u+w*h,x=l(_-=o*E,b-=u*E,w-=h*E),A=u*(w/=x)-h*(b/=x),T=h*(_/=x)-o*w,S=o*b-u*_,R=l(A,T,S);if(A/=R,T/=R,S/=R,this.center.jump(e,H,X,q),this.radius.idle(e),this.up.jump(e,o,u,h),this.right.jump(e,_,b,w),2===a){var k=t[1],C=t[5],I=t[9],M=k*_+C*b+I*w,L=k*A+C*T+I*S;v=O<0?-Math.PI/2:Math.PI/2,y=Math.atan2(L,M)}else{var N=t[2],P=t[6],U=t[10],O=N*o+P*u+U*h,B=N*_+P*b+U*w,D=N*A+P*T+U*S;v=Math.asin(c(O)),y=Math.atan2(D,B)}this.angle.jump(e,y,v),this.recalcMatrix(e);var F=t[2],j=t[6],z=t[10],V=this.computedMatrix;i(V,t);var Y=V[15],H=V[12]/Y,X=V[13]/Y,q=V[14]/Y,G=Math.exp(this.computedRadius[0]);this.center.jump(e,H-F*G,X-j*G,q-z*G)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},d.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.lookAt=function(e,t,r,n){this.recalcMatrix(e),t=t||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],a=n[1],s=n[2],o=l(i,a,s);if(!(o<1e-6)){i/=o,a/=o,s/=o;var u=t[0]-r[0],h=t[1]-r[1],f=t[2]-r[2],d=l(u,h,f);if(!(d<1e-6)){u/=d,h/=d,f/=d;var p=this.computedRight,m=p[0],g=p[1],v=p[2],y=i*m+a*g+s*v,_=l(m-=y*i,g-=y*a,v-=y*s);if(!(_<.01&&(_=l(m=a*f-s*h,g=s*u-i*f,v=i*h-a*u))<1e-6)){m/=_,g/=_,v/=_,this.up.set(e,i,a,s),this.right.set(e,m,g,v),this.center.set(e,r[0],r[1],r[2]),this.radius.set(e,Math.log(d));var b=a*v-s*g,w=s*m-i*v,E=i*g-a*m,x=l(b,w,E),A=i*u+a*h+s*f,T=m*u+g*h+v*f,S=(b/=x)*u+(w/=x)*h+(E/=x)*f,R=Math.asin(c(A)),k=Math.atan2(S,T),C=this.angle._state,I=C[C.length-1],M=C[C.length-2];I%=2*Math.PI;var L=Math.abs(I+2*Math.PI-k),N=Math.abs(I-k),P=Math.abs(I-2*Math.PI-k);L<N&&(I+=2*Math.PI),P<N&&(I-=2*Math.PI),this.angle.jump(this.angle.lastT(),I,M),this.angle.set(e,k,R)}}}}},{"filtered-vector":"YRVQ","gl-mat4/invert":"OS9i","gl-mat4/rotate":"sYT5","gl-vec3/cross":"uUtD","gl-vec3/normalize":"JpY9","gl-vec3/dot":"wcjZ"}],dZIm:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,i,a,s,o,u,l){var c=t+a+l;if(h>0){var h=Math.sqrt(c+1);e[0]=.5*(s-u)/h,e[1]=.5*(o-n)/h,e[2]=.5*(r-a)/h,e[3]=.5*h}else{var f=Math.max(t,a,l);h=Math.sqrt(2*f-c+1),t>=f?(e[0]=.5*h,e[1]=.5*(i+r)/h,e[2]=.5*(o+n)/h,e[3]=.5*(s-u)/h):a>=f?(e[0]=.5*(r+i)/h,e[1]=.5*h,e[2]=.5*(u+s)/h,e[3]=.5*(o-n)/h):(e[0]=.5*(n+o)/h,e[1]=.5*(s+u)/h,e[2]=.5*h,e[3]=.5*(r-i)/h)}return e}},{}],"1E1e":[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.rotation||[0,0,0,1],n=e.radius||1;t=[].slice.call(t,0,3),c(r=[].slice.call(r,0,4),r);var i=new h(r,t,Math.log(n));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i};var n=e("filtered-vector"),i=e("gl-mat4/lookAt"),a=e("gl-mat4/fromQuat"),s=e("gl-mat4/invert"),o=e("./lib/quatFromFrame");function u(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function l(e,t,r,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2)+Math.pow(n,2))}function c(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=l(r,n,i,a);s>1e-6?(e[0]=r/s,e[1]=n/s,e[2]=i/s,e[3]=a/s):(e[0]=e[1]=e[2]=0,e[3]=1)}function h(e,t,r){this.radius=n([r]),this.center=n(t),this.rotation=n(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var f=h.prototype;f.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},f.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;c(t,t);var r=this.computedMatrix;a(r,t);var n=this.computedCenter,i=this.computedEye,s=this.computedUp,o=Math.exp(this.computedRadius[0]);i[0]=n[0]+o*r[2],i[1]=n[1]+o*r[6],i[2]=n[2]+o*r[10],s[0]=r[1],s[1]=r[5],s[2]=r[9];for(var u=0;u<3;++u){for(var l=0,h=0;h<3;++h)l+=r[u+4*h]*i[h];r[12+u]=-l}},f.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r},f.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},f.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},f.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix,a=i[1],s=i[5],o=i[9],l=u(a,s,o);a/=l,s/=l,o/=l;var c=i[0],h=i[4],f=i[8],d=c*a+h*s+f*o,p=u(c-=a*d,h-=s*d,f-=o*d);c/=p,h/=p,f/=p;var m=i[2],g=i[6],v=i[10],y=m*a+g*s+v*o,_=m*c+g*h+v*f,b=u(m-=y*a+_*c,g-=y*s+_*h,v-=y*o+_*f);m/=b,g/=b,v/=b;var w=c*t+a*r,E=h*t+s*r,x=f*t+o*r;this.center.move(e,w,E,x);var A=Math.exp(this.computedRadius[0]);A=Math.max(1e-4,A+n),this.radius.set(e,Math.log(A))},f.rotate=function(e,t,r,n){this.recalcMatrix(e),t=t||0,r=r||0;var i=this.computedMatrix,a=i[0],s=i[4],o=i[8],c=i[1],h=i[5],f=i[9],d=i[2],p=i[6],m=i[10],g=t*a+r*c,v=t*s+r*h,y=t*o+r*f,_=-(p*y-m*v),b=-(m*g-d*y),w=-(d*v-p*g),E=Math.sqrt(Math.max(0,1-Math.pow(_,2)-Math.pow(b,2)-Math.pow(w,2))),x=l(_,b,w,E);x>1e-6?(_/=x,b/=x,w/=x,E/=x):(_=b=w=0,E=1);var A=this.computedRotation,T=A[0],S=A[1],R=A[2],k=A[3],C=T*E+k*_+S*w-R*b,I=S*E+k*b+R*_-T*w,M=R*E+k*w+T*b-S*_,L=k*E-T*_-S*b-R*w;if(n){_=d,b=p,w=m;var N=Math.sin(n)/u(_,b,w);_*=N,b*=N,w*=N,L=L*(E=Math.cos(t))-(C=C*E+L*_+I*w-M*b)*_-(I=I*E+L*b+M*_-C*w)*b-(M=M*E+L*w+C*b-I*_)*w}var P=l(C,I,M,L);P>1e-6?(C/=P,I/=P,M/=P,L/=P):(C=I=M=0,L=1),this.rotation.set(e,C,I,M,L)},f.lookAt=function(e,t,r,n){this.recalcMatrix(e),r=r||this.computedCenter,t=t||this.computedEye,n=n||this.computedUp;var a=this.computedMatrix;i(a,t,r,n);var s=this.computedRotation;o(s,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),c(s,s),this.rotation.set(e,s[0],s[1],s[2],s[3]);for(var u=0,l=0;l<3;++l)u+=Math.pow(r[l]-t[l],2);this.radius.set(e,.5*Math.log(Math.max(u,1e-6))),this.center.set(e,r[0],r[1],r[2])},f.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},f.setMatrix=function(e,t){var r=this.computedRotation;o(r,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),c(r,r),this.rotation.set(e,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;s(n,t);var i=n[15];if(Math.abs(i)>1e-6){var a=n[12]/i,u=n[13]/i,l=n[14]/i;this.recalcMatrix(e);var h=Math.exp(this.computedRadius[0]);this.center.set(e,a-n[2]*h,u-n[6]*h,l-n[10]*h),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},f.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},f.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},f.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},f.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},f.fromJSON=function(e){var t=this.lastT(),r=e.center;r&&this.center.set(t,r[0],r[1],r[2]);var n=e.rotation;n&&this.rotation.set(t,n[0],n[1],n[2],n[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"filtered-vector":"YRVQ","gl-mat4/lookAt":"4DbU","gl-mat4/fromQuat":"8bSX","gl-mat4/invert":"OS9i","./lib/quatFromFrame":"dZIm"}],nrYL:[function(e,t,r){t.exports=function(e,t,r,n){var i=t[0],a=t[1],s=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=s+n*(r[2]-s),e}},{}],s2pK:[function(e,t,r){var n={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=(n.create(),n.create());t.exports=function(e,t,r,a,s,o){return n.identity(e),n.fromRotationTranslation(e,o,t),e[3]=s[0],e[7]=s[1],e[11]=s[2],e[15]=s[3],n.identity(i),0!==a[2]&&(i[9]=a[2],n.multiply(e,e,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],n.multiply(e,e,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],n.multiply(e,e,i)),n.scale(e,e,r),e}},{"gl-mat4/identity":"xBp+","gl-mat4/translate":"bJFL","gl-mat4/multiply":"Uhn0","gl-mat4/create":"CJSY","gl-mat4/scale":"HTs9","gl-mat4/fromRotationTranslation":"D8JY"}],"5fBt":[function(e,t,r){t.exports=function(e,t){var r=t[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)e[i]=t[i]*n;return!0}},{}],uBHl:[function(e,t,r){t.exports=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}},{}],OrHu:[function(e,t,r){var n=e("./normalize"),i=e("gl-mat4/create"),a=e("gl-mat4/clone"),s=e("gl-mat4/determinant"),o=e("gl-mat4/invert"),u=e("gl-mat4/transpose"),l={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},c=i(),h=i(),f=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function m(e,t,r,n,i){e[0]=t[0]*n+r[0]*i,e[1]=t[1]*n+r[1]*i,e[2]=t[2]*n+r[2]*i}t.exports=function(e,t,r,i,g,v){if(t||(t=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),g||(g=[0,0,0,1]),v||(v=[0,0,0,1]),!n(c,e))return!1;if(a(h,c),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(s(h)<1e-8))return!1;var y=c[3],_=c[7],b=c[11],w=c[12],E=c[13],x=c[14],A=c[15];if(0!==y||0!==_||0!==b){if(f[0]=y,f[1]=_,f[2]=b,f[3]=A,!o(h,h))return!1;u(h,h),function(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3];e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*s,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*s,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*s,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*s}(g,f,h)}else g[0]=g[1]=g[2]=0,g[3]=1;if(t[0]=w,t[1]=E,t[2]=x,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(d,c),r[0]=l.length(d[0]),l.normalize(d[0],d[0]),i[0]=l.dot(d[0],d[1]),m(d[1],d[1],d[0],1,-i[0]),r[1]=l.length(d[1]),l.normalize(d[1],d[1]),i[0]/=r[1],i[1]=l.dot(d[0],d[2]),m(d[2],d[2],d[0],1,-i[1]),i[2]=l.dot(d[1],d[2]),m(d[2],d[2],d[1],1,-i[2]),r[2]=l.length(d[2]),l.normalize(d[2],d[2]),i[1]/=r[2],i[2]/=r[2],l.cross(p,d[1],d[2]),l.dot(d[0],p)<0)for(var T=0;T<3;T++)r[T]*=-1,d[T][0]*=-1,d[T][1]*=-1,d[T][2]*=-1;return v[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),v[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),v[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),v[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(v[0]=-v[0]),d[0][2]>d[2][0]&&(v[1]=-v[1]),d[1][0]>d[0][1]&&(v[2]=-v[2]),!0}},{"./normalize":"5fBt","gl-mat4/create":"CJSY","gl-mat4/clone":"bLoX","gl-mat4/determinant":"5JuV","gl-mat4/invert":"OS9i","gl-mat4/transpose":"TUrw","gl-vec3/length":"uBHl","gl-vec3/normalize":"JpY9","gl-vec3/dot":"wcjZ","gl-vec3/cross":"uUtD"}],BuYX:[function(e,t,r){t.exports=function(e,t,r,n){var i,a,s,o,u,l=t[0],c=t[1],h=t[2],f=t[3],d=r[0],p=r[1],m=r[2],g=r[3];return(a=l*d+c*p+h*m+f*g)<0&&(a=-a,d=-d,p=-p,m=-m,g=-g),1-a>1e-6?(i=Math.acos(a),s=Math.sin(i),o=Math.sin((1-n)*i)/s,u=Math.sin(n*i)/s):(o=1-n,u=n),e[0]=o*l+u*d,e[1]=o*c+u*p,e[2]=o*h+u*m,e[3]=o*f+u*g,e}},{}],dlsB:[function(e,t,r){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":"BuYX"}],Kcce:[function(e,t,r){var n=e("gl-vec3/lerp"),i=e("mat4-recompose"),a=e("mat4-decompose"),s=e("gl-mat4/determinant"),o=e("quat-slerp"),u=h(),l=h(),c=h();function h(){return{translate:f(),scale:f(1),skew:f(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function f(e){return[e||0,e||0,e||0]}t.exports=function(e,t,r,h){if(0===s(t)||0===s(r))return!1;var f=a(t,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=a(r,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!(!f||!d||(n(c.translate,u.translate,l.translate,h),n(c.skew,u.skew,l.skew,h),n(c.scale,u.scale,l.scale,h),n(c.perspective,u.perspective,l.perspective,h),o(c.quaternion,u.quaternion,l.quaternion,h),i(e,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},{"gl-vec3/lerp":"nrYL","mat4-recompose":"s2pK","mat4-decompose":"OrHu","gl-mat4/determinant":"5JuV","quat-slerp":"dlsB"}],Lqmf:[function(e,t,r){"use strict";var n=e("binary-search-bounds"),i=e("mat4-interpolate"),a=e("gl-mat4/invert"),s=e("gl-mat4/rotateX"),o=e("gl-mat4/rotateY"),u=e("gl-mat4/rotateZ"),l=e("gl-mat4/lookAt"),c=e("gl-mat4/translate"),h=(e("gl-mat4/scale"),e("gl-vec3/normalize")),f=[0,0,0];function d(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(e){return new d((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=d.prototype;p.recalcMatrix=function(e){var t=this._time,r=n.le(t,e),s=this.computedMatrix;if(!(r<0)){var o=this._components;if(r===t.length-1)for(var u=16*r,l=0;l<16;++l)s[l]=o[u++];else{var c=t[r+1]-t[r],f=(u=16*r,this.prevMatrix),d=!0;for(l=0;l<16;++l)f[l]=o[u++];var p=this.nextMatrix;for(l=0;l<16;++l)p[l]=o[u++],d=d&&f[l]===p[l];if(c<1e-6||d)for(l=0;l<16;++l)s[l]=f[l];else i(s,f,p,(e-t[r])/c)}var m=this.computedUp;m[0]=s[1],m[1]=s[5],m[2]=s[9],h(m,m);var g=this.computedInverse;a(g,s);var v=this.computedEye,y=g[15];v[0]=g[12]/y,v[1]=g[13]/y,v[2]=g[14]/y;var _=this.computedCenter,b=Math.exp(this.computedRadius[0]);for(l=0;l<3;++l)_[l]=v[l]-s[2+4*l]*b}},p.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,r=t.length-16,n=0;n<16;++n)t.push(t[r++]);this._time.push(e)}},p.flush=function(e){var t=n.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(e,t,r,n){this.recalcMatrix(e),t=t||this.computedEye,r=r||f,n=n||this.computedUp,this.setMatrix(e,l(this.computedMatrix,t,r,n));for(var i=0,a=0;a<3;++a)i+=Math.pow(r[a]-t[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},p.rotate=function(e,t,r,n){this.recalcMatrix(e);var i=this.computedInverse;t&&o(i,i,t),r&&s(i,i,r),n&&u(i,i,n),this.setMatrix(e,a(this.computedMatrix,i))};var m=[0,0,0];p.pan=function(e,t,r,n){m[0]=-(t||0),m[1]=-(r||0),m[2]=-(n||0),this.recalcMatrix(e);var i=this.computedInverse;c(i,i,m),this.setMatrix(e,a(i,i))},p.translate=function(e,t,r,n){m[0]=t||0,m[1]=r||0,m[2]=n||0,this.recalcMatrix(e);var i=this.computedMatrix;c(i,i,m),this.setMatrix(e,i)},p.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var r=0;r<16;++r)this._components.push(t[r])}},p.setDistance=function(e,t){this.computedRadius[0]=t},p.setDistanceLimits=function(e,t){var r=this._limits;r[0]=e,r[1]=t},p.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":"++2h","mat4-interpolate":"Kcce","gl-mat4/invert":"OS9i","gl-mat4/rotateX":"X+ZC","gl-mat4/rotateY":"oVHP","gl-mat4/rotateZ":"sYuD","gl-mat4/lookAt":"4DbU","gl-mat4/translate":"bJFL","gl-mat4/scale":"HTs9","gl-vec3/normalize":"JpY9"}],"3Jfz":[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).eye||[0,0,1],r=e.center||[0,0,0],o=e.up||[0,1,0],u=e.distanceLimits||[0,1/0],l=e.mode||"turntable",c=n(),h=i(),f=a();return c.setDistanceLimits(u[0],u[1]),c.lookAt(0,t,r,o),h.setDistanceLimits(u[0],u[1]),h.lookAt(0,t,r,o),f.setDistanceLimits(u[0],u[1]),f.lookAt(0,t,r,o),new s({turntable:c,orbit:h,matrix:f},l)};var n=e("turntable-camera-controller"),i=e("orbit-camera-controller"),a=e("matrix-camera-controller");function s(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=s.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var t=e[0],r=[],n=0;n<e[1];++n)r.push("a"+n);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+r.join()+")}";o[t]=Function.apply(null,r.concat(i))}),o.recalcMatrix=function(e){this._active.recalcMatrix(e)},o.getDistance=function(e){return this._active.getDistance(e)},o.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},o.lastT=function(){return this._active.lastT()},o.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var r=this._active,n=this._controllerList[t],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},{"turntable-camera-controller":"1R2v","orbit-camera-controller":"1E1e","matrix-camera-controller":"Lqmf"}],yodp:[function(e,t,r){"use strict";function n(e){return e.target||e.srcElement||window}r.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},r.element=n,r.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},r.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],"9a0v":[function(e,t,r){"use strict";t.exports=function(e,t){t||(t=e,e=window);var r=0,i=0,a=0,s={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function u(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==s.alt,s.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==s.shift,s.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==s.control,s.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==s.meta,s.meta=!!e.metaKey),t}function l(e,o){var l=n.x(o),c=n.y(o);"buttons"in o&&(e=0|o.buttons),(e!==r||l!==i||c!==a||u(o))&&(r=0|e,i=l||0,a=c||0,t&&t(r,i,a,s))}function c(e){l(0,e)}function h(){(r||i||a||s.shift||s.alt||s.meta||s.control)&&(i=a=0,r=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function f(e){u(e)&&t&&t(r,i,a,s)}function d(e){0===n.buttons(e)?l(0,e):l(r,e)}function p(e){l(r|n.buttons(e),e)}function m(e){l(r&~n.buttons(e),e)}function g(){o||(o=!0,e.addEventListener("mousemove",d),e.addEventListener("mousedown",p),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",c),e.addEventListener("mouseenter",c),e.addEventListener("mouseout",c),e.addEventListener("mouseover",c),e.addEventListener("blur",h),e.addEventListener("keyup",f),e.addEventListener("keydown",f),e.addEventListener("keypress",f),e!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}g();var v={element:e};return Object.defineProperties(v,{enabled:{get:function(){return o},set:function(t){t?g():o&&(o=!1,e.removeEventListener("mousemove",d),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",c),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseout",c),e.removeEventListener("mouseover",c),e.removeEventListener("blur",h),e.removeEventListener("keyup",f),e.removeEventListener("keydown",f),e.removeEventListener("keypress",f),e!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var n=e("mouse-event")},{"mouse-event":"yodp"}],LL1D:[function(e,t,r){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var r=parseFloat(e,10);return t[0]=r,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],"8imh":[function(e,t,r){"use strict";var n=e("parse-unit");t.exports=o;var i=s("in",document.body);function a(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*o(r[1],e)}function s(e,t){var r=document.createElement("div");r.style.height="128"+e,t.appendChild(r);var n=a(r,"height")/128;return t.removeChild(r),n}function o(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return s(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6;case"px":return 1}var r=n(e);if(!isNaN(r[0])&&r[1]){var u=o(r[1],t);return"number"==typeof u?r[0]*u:null}return null}},{"parse-unit":"LL1D"}],"2BDW":[function(e,t,r){"use strict";var n=e("to-px");t.exports=function(e,t,r){"function"==typeof e&&(r=!!t,t=e,e=window);var i=n("ex",e),a=function(e){r&&e.preventDefault();var n=e.deltaX||0,a=e.deltaY||0,s=e.deltaZ||0,o=1;switch(e.deltaMode){case 1:o=i;break;case 2:o=window.innerHeight}if(a*=o,s*=o,(n*=o)||a||s)return t(n,a,s,e)};return e.addEventListener("wheel",a),a}},{"to-px":"8imh"}],pbSk:[function(e,t,r){var n={left:0,top:0};function i(e){return e===window||e===document||e===document.body?n:e.getBoundingClientRect()}t.exports=function(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n=e.clientX||0,a=e.clientY||0,s=i(t);return r[0]=n-s.left,r[1]=a-s.top,r}},{}],Pym4:[function(e,t,r){t.exports=!0},{}],TsnK:[function(e,t,r){"use strict";var n=e("is-browser");t.exports=n&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":"Pym4"}],ulWn:[function(e,t,r){"use strict";t.exports=function(e,t){e=e||document.body;var r=[.01,1/0];"distanceLimits"in(t=t||{})&&(r[0]=t.distanceLimits[0],r[1]=t.distanceLimits[1]),"zoomMin"in t&&(r[0]=t.zoomMin),"zoomMax"in t&&(r[1]=t.zoomMax);var l=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,f=e.clientWidth,d=e.clientHeight,p={view:l,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:l.modes,tick:function(){var t=n(),r=this.delay;l.idle(t-r),l.flush(t-(100+2*r));var i=t-2*r;l.recalcMatrix(i);for(var a=!0,s=l.computedMatrix,o=0;o<16;++o)a=a&&c[o]===s[o],c[o]=s[o];var u=e.clientWidth===f&&e.clientHeight===d;return f=e.clientWidth,d=e.clientHeight,a?!u:(h=Math.exp(l.computedRadius[0]),!0)},lookAt:function(e,t,r){l.lookAt(l.lastT(),e,t,r)},rotate:function(e,t,r){l.rotate(l.lastT(),e,t,r)},pan:function(e,t,r){l.pan(l.lastT(),e,t,r)},translate:function(e,t,r){l.translate(l.lastT(),e,t,r)}};Object.defineProperties(p,{matrix:{get:function(){return l.computedMatrix},set:function(e){return l.setMatrix(l.lastT(),e),l.computedMatrix},enumerable:!0},mode:{get:function(){return l.getMode()},set:function(e){return l.setMode(e),l.getMode()},enumerable:!0},center:{get:function(){return l.computedCenter},set:function(e){return l.lookAt(l.lastT(),e),l.computedCenter},enumerable:!0},eye:{get:function(){return l.computedEye},set:function(e){return l.lookAt(l.lastT(),null,e),l.computedEye},enumerable:!0},up:{get:function(){return l.computedUp},set:function(e){return l.lookAt(l.lastT(),null,null,e),l.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(e){return l.setDistance(l.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return l.getDistanceLimits(r)},set:function(e){return l.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var m=0,g=0,v=[],y={shift:!1,control:!1,alt:!1,meta:!1};function _(t,r,i,a){var s=1/e.clientHeight,o=s*(r-m),u=s*(i-g),c=p.flipX?1:-1,f=p.flipY?1:-1,d=Math.PI*p.rotateSpeed,v=n();if(1&t)a.shift?l.rotate(v,0,0,-o*d):l.rotate(v,c*d*o,-f*d*u,0);else if(2&t)l.pan(v,-p.translateSpeed*o*h,p.translateSpeed*u*h,0);else if(4&t){var _=p.zoomSpeed*u/window.innerHeight*(v-l.lastT())*50;l.pan(v,0,0,h*(Math.exp(_)-1))}m=r,g=i,y=a}return a(e,_),e.addEventListener("touchstart",function(t){if(t.preventDefault(),t.targetTouches.length<2){var r=o(t.changedTouches[0],e);_(0,r[0],r[1],y),_(1,r[0],r[1],y)}else if(2===t.targetTouches.length)for(let e of t.targetTouches)v.push(e)},!!u&&{passive:!1}),e.addEventListener("touchmove",function(t){if(t.targetTouches.length<2){var r=o(t.changedTouches[0],e);_(1,r[0],r[1],y)}else if(2===t.targetTouches.length){let e,r,i=n(),a=t.targetTouches[0],s=t.targetTouches[1];for(let t=0;t<v.length;t++){let n=v[t];n.identifier===a.identifier&&(e=n,v[t]=a),n.identifier===s.identifier&&(r=n,v[t]=s)}let o=Math.abs(e.clientX-r.clientX),u=Math.abs(e.clientY-r.clientY),c=Math.abs(a.clientX-s.clientY),h=Math.abs(a.clientY-s.clientY),f=o/c,d=u/h,m=Math.max(f,d);m===f&&o>c&&(m=-m),m===d&&u>h&&(m=-m);let g=p.zoomSpeed;l.pan(i,0,0,-g*m/(window.innerHeight/20))}},!!u&&{passive:!1}),e.addEventListener("touchend",function(t){t.preventDefault(),o(t.changedTouches[0],e),_(0,m,g,y);for(let e of t.targetTouches)for(let t=0;t<v.length;t++)v[t]==e.identifier&&v.splice(t,1)},!!u&&{passive:!1}),s(e,function(e,t,r){var i=p.flipX?1:-1,a=p.flipY?1:-1,s=n();if(Math.abs(e)>Math.abs(t))l.rotate(s,0,0,-e*i*Math.PI*p.rotateSpeed/window.innerWidth);else{var o=p.zoomSpeed*a*t/window.innerHeight*(s-l.lastT())/100;l.pan(s,0,0,h*(Math.exp(o)-1))}},!0),p};var n=e("right-now"),i=e("3d-view"),a=e("mouse-change"),s=e("mouse-wheel"),o=e("mouse-event-offset"),u=e("has-passive-events")},{"right-now":"nAQP","3d-view":"3Jfz","mouse-change":"9a0v","mouse-wheel":"2BDW","mouse-event-offset":"pbSk","has-passive-events":"TsnK"}],C2Sb:[function(e,t,r){"use strict";var n=e("gl-texture2d");t.exports=function(e,t,r,n){i||(i=e.FRAMEBUFFER_UNSUPPORTED,a=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,s=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,o=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var l=e.getExtension("WEBGL_draw_buffers");if(!u&&l&&function(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),a=0;a<n;++a)i[a]=e.COLOR_ATTACHMENT0+a;for(a=n;a<r;++a)i[a]=e.NONE;u[n]=i}}(e,l),Array.isArray(t)&&(n=r,r=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var c=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>c||r<0||r>c)throw new Error("gl-fbo: Parameters are too large for FBO");var h=1;if("color"in(n=n||{})){if((h=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!l)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>e.getParameter(l.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var f=e.UNSIGNED_BYTE,d=e.getExtension("OES_texture_float");if(n.float&&h>0){if(!d)throw new Error("gl-fbo: Context does not support floating point textures");f=e.FLOAT}else n.preferFloat&&h>0&&d&&(f=e.FLOAT);var p=!0;"depth"in n&&(p=!!n.depth);var g=!1;return"stencil"in n&&(g=!!n.stencil),new m(e,t,r,f,h,p,g,l)};var i,a,s,o,u=null;function l(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function c(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function h(e){switch(e){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case o:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function f(e,t,r,i,a,s){if(!i)return null;var o=n(e,t,r,a,i);return o.magFilter=e.NEAREST,o.minFilter=e.NEAREST,o.mipSamples=1,o.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,s,e.TEXTURE_2D,o.handle,0),o}function d(e,t,r,n,i){var a=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,n,t,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,a),a}function p(e){var t=l(e.gl),r=e.gl,n=e.handle=r.createFramebuffer(),i=e._shape[0],a=e._shape[1],s=e.color.length,o=e._ext,p=e._useStencil,m=e._useDepth,g=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var v=0;v<s;++v)e.color[v]=f(r,i,a,g,r.RGBA,r.COLOR_ATTACHMENT0+v);0===s?(e._color_rb=d(r,i,a,r.RGBA4,r.COLOR_ATTACHMENT0),o&&o.drawBuffersWEBGL(u[0])):s>1&&o.drawBuffersWEBGL(u[s]);var y=r.getExtension("WEBGL_depth_texture");y?p?e.depth=f(r,i,a,y.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):m&&(e.depth=f(r,i,a,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):m&&p?e._depth_rb=d(r,i,a,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):m?e._depth_rb=d(r,i,a,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):p&&(e._depth_rb=d(r,i,a,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var _=r.checkFramebufferStatus(r.FRAMEBUFFER);if(_!==r.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(r.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),v=0;v<e.color.length;++v)e.color[v].dispose(),e.color[v]=null;e._color_rb&&(r.deleteRenderbuffer(e._color_rb),e._color_rb=null),c(r,t),h(_)}c(r,t)}function m(e,t,r,n,i,a,s,o){this.gl=e,this._shape=[0|t,0|r],this._destroyed=!1,this._ext=o,this.color=new Array(i);for(var u=0;u<i;++u)this.color[u]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=a,this._useStencil=s;var l=this,c=[0|t,0|r];Object.defineProperties(c,{0:{get:function(){return l._shape[0]},set:function(e){return l.width=e}},1:{get:function(){return l._shape[1]},set:function(e){return l.height=e}}}),this._shapeVector=c,p(this)}var g=m.prototype;function v(e,t,r){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==r){var n=e.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||t>i||r<0||r>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=r;for(var a=l(n),s=0;s<e.color.length;++s)e.color[s].shape=e._shape;e._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,e._shape[0],e._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,e.handle);var o=n.checkFramebufferStatus(n.FRAMEBUFFER);o!==n.FRAMEBUFFER_COMPLETE&&(e.dispose(),c(n,a),h(o)),c(n,a)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],r=0|e[1];return v(this,t,r),[t,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return v(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,v(this,this._shape[0],e),e},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":"6Wo/"}],MSjk:[function(e,t,r){!function(e,t){"use strict";t(void 0!==r?r:e.esprima={})}(this,function(e){"use strict";var t,r,n,i,a,s,o,u,l,c,h,f,d,p,m,g,v,y;function _(e,t){if(!e)throw new Error("ASSERT: "+t)}function b(e){return e>=48&&e<=57}function w(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E(e){return"01234567".indexOf(e)>=0}function x(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function A(e){return 10===e||13===e||8232===e||8233===e}function T(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&o.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function S(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&o.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function R(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function k(e){return"eval"===e||"arguments"===e}function C(e,t,r,n,i){var a;_("number"==typeof r,"Comment must have valid position"),v.lastCommentStart>=r||(v.lastCommentStart=r,a={type:e,value:t},y.range&&(a.range=[r,n]),y.loc&&(a.loc=i),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}function I(e){var t,r,n,i;for(t=h-e,r={start:{line:f,column:h-d-e}};h<p;)if(n=l.charCodeAt(h),++h,A(n))return y.comments&&(i=l.slice(t+e,h-1),r.end={line:f,column:h-d-1},C("Line",i,t,h-1,r)),13===n&&10===l.charCodeAt(h)&&++h,++f,void(d=h);y.comments&&(i=l.slice(t+e,h),r.end={line:f,column:h-d},C("Line",i,t,h,r))}function M(){var e,t,r,n;for(y.comments&&(e=h-2,t={start:{line:f,column:h-d-2}});h<p;)if(A(r=l.charCodeAt(h)))13===r&&10===l.charCodeAt(h+1)&&++h,++f,d=++h,h>=p&&q({},s.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===l.charCodeAt(h+1))return++h,++h,void(y.comments&&(n=l.slice(e+2,h-2),t.end={line:f,column:h-d},C("Block",n,e,h,t)));++h}else++h;q({},s.UnexpectedToken,"ILLEGAL")}function L(){var e,t;for(t=0===h;h<p;)if(x(e=l.charCodeAt(h)))++h;else if(A(e))++h,13===e&&10===l.charCodeAt(h)&&++h,++f,d=h,t=!0;else if(47===e)if(47===(e=l.charCodeAt(h+1)))++h,++h,I(2),t=!0;else{if(42!==e)break;++h,++h,M()}else if(t&&45===e){if(45!==l.charCodeAt(h+1)||62!==l.charCodeAt(h+2))break;h+=3,I(3)}else{if(60!==e)break;if("!--"!==l.slice(h+1,h+4))break;++h,++h,++h,++h,I(4)}}function N(e){var t,r,n,i=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(h<p&&w(l[h])))return"";n=l[h++],i=16*i+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(i)}function P(){var e,t;for(e=l.charCodeAt(h++),t=String.fromCharCode(e),92===e&&(117!==l.charCodeAt(h)&&q({},s.UnexpectedToken,"ILLEGAL"),++h,(e=N("u"))&&"\\"!==e&&T(e.charCodeAt(0))||q({},s.UnexpectedToken,"ILLEGAL"),t=e);h<p&&S(e=l.charCodeAt(h));)++h,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==l.charCodeAt(h)&&q({},s.UnexpectedToken,"ILLEGAL"),++h,(e=N("u"))&&"\\"!==e&&S(e.charCodeAt(0))||q({},s.UnexpectedToken,"ILLEGAL"),t+=e);return t}function U(){var e,r,n,i,a=h,o=l.charCodeAt(h),u=l[h];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,y.tokenize&&(40===o?y.openParenToken=y.tokens.length:123===o&&(y.openCurlyToken=y.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(o),lineNumber:f,lineStart:d,start:a,end:h};default:if(61===(e=l.charCodeAt(h+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:t.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(e),lineNumber:f,lineStart:d,start:a,end:h};case 33:case 61:return h+=2,61===l.charCodeAt(h)&&++h,{type:t.Punctuator,value:l.slice(a,h),lineNumber:f,lineStart:d,start:a,end:h}}}return">>>="===(i=l.substr(h,4))?(h+=4,{type:t.Punctuator,value:i,lineNumber:f,lineStart:d,start:a,end:h}):">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?(h+=3,{type:t.Punctuator,value:n,lineNumber:f,lineStart:d,start:a,end:h}):u===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(u)>=0||"=>"===r?(h+=2,{type:t.Punctuator,value:r,lineNumber:f,lineStart:d,start:a,end:h}):"<>=!+-*%&|^/".indexOf(u)>=0?(++h,{type:t.Punctuator,value:u,lineNumber:f,lineStart:d,start:a,end:h}):void q({},s.UnexpectedToken,"ILLEGAL")}function O(){var e,r,n;if(_(b((n=l[h]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=h,e="","."!==n){if(e=l[h++],n=l[h],"0"===e){if("x"===n||"X"===n)return++h,function(e){for(var r="";h<p&&w(l[h]);)r+=l[h++];return 0===r.length&&q({},s.UnexpectedToken,"ILLEGAL"),T(l.charCodeAt(h))&&q({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:f,lineStart:d,start:e,end:h}}(r);if(E(n)&&function(){var e,t;for(e=h+1;e<p;++e){if("8"===(t=l[e])||"9"===t)return!1;if(!E(t))return!0}return!0}())return function(e){for(var r="0"+l[h++];h<p&&E(l[h]);)r+=l[h++];return(T(l.charCodeAt(h))||b(l.charCodeAt(h)))&&q({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:f,lineStart:d,start:e,end:h}}(r)}for(;b(l.charCodeAt(h));)e+=l[h++];n=l[h]}if("."===n){for(e+=l[h++];b(l.charCodeAt(h));)e+=l[h++];n=l[h]}if("e"===n||"E"===n)if(e+=l[h++],"+"!==(n=l[h])&&"-"!==n||(e+=l[h++]),b(l.charCodeAt(h)))for(;b(l.charCodeAt(h));)e+=l[h++];else q({},s.UnexpectedToken,"ILLEGAL");return T(l.charCodeAt(h))&&q({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:f,lineStart:d,start:r,end:h}}function B(){var e,r,n,i;return g=null,L(),e=h,r=function(){var e,t,r,n;for(_("/"===(e=l[h]),"Regular expression literal must start with a slash"),t=l[h++],r=!1,n=!1;h<p;)if(t+=e=l[h++],"\\"===e)A((e=l[h++]).charCodeAt(0))&&q({},s.UnterminatedRegExp),t+=e;else if(A(e.charCodeAt(0)))q({},s.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||q({},s.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,r,n;for(t="",r="";h<p&&S((e=l[h]).charCodeAt(0));)if(++h,"\\"===e&&h<p)if("u"===(e=l[h])){if(n=++h,e=N("u"))for(r+=e,t+="\\u";n<h;++n)t+=l[n];else h=n,r+="u",t+="\\u";G({},s.UnexpectedToken,"ILLEGAL")}else t+="\\",G({},s.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),i=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){q({},s.InvalidRegExp)}return r}(r.value,n.value),y.tokenize?{type:t.RegularExpression,value:i,lineNumber:f,lineStart:d,start:e,end:h}:{literal:r.literal+n.literal,value:i,start:e,end:h}}function D(){var e,t,r,n;return L(),e=h,t={start:{line:f,column:h-d}},r=B(),t.end={line:f,column:h-d},y.tokenize||(y.tokens.length>0&&(n=y.tokens[y.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:r.literal,range:[e,h],loc:t})),r}function F(){var e;return L(),h>=p?{type:t.EOF,lineNumber:f,lineStart:d,start:h,end:h}:T(e=l.charCodeAt(h))?function(){var e,r;return e=h,{type:1===(r=92===l.charCodeAt(h)?P():function(){var e,t;for(e=h++;h<p;){if(92===(t=l.charCodeAt(h)))return h=e,P();if(!S(t))break;++h}return l.slice(e,h)}()).length?t.Identifier:function(e){if(c&&R(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(r)?t.Keyword:"null"===r?t.NullLiteral:"true"===r||"false"===r?t.BooleanLiteral:t.Identifier,value:r,lineNumber:f,lineStart:d,start:e,end:h}}():40===e||41===e||59===e?U():39===e||34===e?function(){var e,r,n,i,a,o,u,c,m="",g=!1;for(u=f,c=d,_("'"===(e=l[h])||'"'===e,"String literal must starts with a quote"),r=h,++h;h<p;){if((n=l[h++])===e){e="";break}if("\\"===n)if((n=l[h++])&&A(n.charCodeAt(0)))++f,"\r"===n&&"\n"===l[h]&&++h,d=h;else switch(n){case"u":case"x":o=h,(a=N(n))?m+=a:(h=o,m+=n);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:E(n)?(0!==(i="01234567".indexOf(n))&&(g=!0),h<p&&E(l[h])&&(g=!0,i=8*i+"01234567".indexOf(l[h++]),"0123".indexOf(n)>=0&&h<p&&E(l[h])&&(i=8*i+"01234567".indexOf(l[h++]))),m+=String.fromCharCode(i)):m+=n}else{if(A(n.charCodeAt(0)))break;m+=n}}return""!==e&&q({},s.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:m,octal:g,startLineNumber:u,startLineStart:c,lineNumber:f,lineStart:d,start:r,end:h}}():46===e?b(l.charCodeAt(h+1))?O():U():b(e)?O():y.tokenize&&47===e?function(){var e,t;if(!(e=y.tokens[y.tokens.length-1]))return D();if("Punctuator"===e.type){if("]"===e.value)return U();if(")"===e.value)return!(t=y.tokens[y.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?U():D();if("}"===e.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(!(t=y.tokens[y.openCurlyToken-4]))return U()}else{if(!y.tokens[y.openCurlyToken-4]||"Keyword"!==y.tokens[y.openCurlyToken-4].type)return U();if(!(t=y.tokens[y.openCurlyToken-5]))return D()}return n.indexOf(t.value)>=0?U():D()}return D()}return"Keyword"===e.type&&"this"!==e.value?D():U()}():U()}function j(){var e,n,i;return L(),e={start:{line:f,column:h-d}},n=F(),e.end={line:f,column:h-d},n.type!==t.EOF&&(i=l.slice(n.start,n.end),y.tokens.push({type:r[n.type],value:i,range:[n.start,n.end],loc:e})),n}function z(){var e;return h=(e=g).end,f=e.lineNumber,d=e.lineStart,g=void 0!==y.tokens?j():F(),h=e.end,f=e.lineNumber,d=e.lineStart,e}function V(){var e,t,r;e=h,t=f,r=d,g=void 0!==y.tokens?j():F(),h=e,f=t,d=r}function Y(e,t){this.line=e,this.column=t}function H(e,t,r,n){this.start=new Y(e,t),this.end=new Y(r,n)}function X(){var e,t,r,n;return e=h,t=f,r=d,L(),n=f!==t,h=e,f=t,d=r,n}function q(e,t){var r,n=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return _(t<n.length,"Message reference must be in range"),n[t]});throw"number"==typeof e.lineNumber?((r=new Error("Line "+e.lineNumber+": "+i)).index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-d+1):((r=new Error("Line "+f+": "+i)).index=h,r.lineNumber=f,r.column=h-d+1),r.description=i,r}function G(){try{q.apply(null,arguments)}catch(e){if(!y.errors)throw e;y.errors.push(e)}}function W(e){if(e.type===t.EOF&&q(e,s.UnexpectedEOS),e.type===t.NumericLiteral&&q(e,s.UnexpectedNumber),e.type===t.StringLiteral&&q(e,s.UnexpectedString),e.type===t.Identifier&&q(e,s.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))q(e,s.UnexpectedReserved);else if(c&&R(e.value))return void G(e,s.StrictReservedWord);q(e,s.UnexpectedToken,e.value)}q(e,s.UnexpectedToken,e.value)}function Z(e){var r=z();r.type===t.Punctuator&&r.value===e||W(r)}function K(e){var r=z();r.type===t.Keyword&&r.value===e||W(r)}function J(e){return g.type===t.Punctuator&&g.value===e}function Q(e){return g.type===t.Keyword&&g.value===e}function $(){var e,r=h,n=f,i=d,a=g;if(59===l.charCodeAt(h)||J(";"))z();else{if(e=f,L(),f!==e)return h=r,f=n,d=i,void(g=a);g.type===t.EOF||J("}")||W(g)}}function ee(e){return e.type===i.Identifier||e.type===i.MemberExpression}function te(e,t){var r,n,i;return r=c,i=g,n=_e(),t&&c&&k(e[0].name)&&G(t,s.StrictParamName),c=r,m.markEnd(m.createFunctionExpression(null,e,[],n),i)}function re(){var e,r;return r=g,(e=z()).type===t.StringLiteral||e.type===t.NumericLiteral?(c&&e.octal&&G(e,s.StrictOctalLiteral),m.markEnd(m.createLiteral(e),r)):m.markEnd(m.createIdentifier(e.value),r)}function ne(){var e,r,n,i,a,o;return o=g,(e=g).type===t.Identifier?(n=re(),"get"!==e.value||J(":")?"set"!==e.value||J(":")?(Z(":"),i=he(),m.markEnd(m.createProperty("init",n,i),o)):(r=re(),Z("("),(e=g).type!==t.Identifier?(Z(")"),G(e,s.UnexpectedToken,e.value),i=te([])):(a=[pe()],Z(")"),i=te(a,e)),m.markEnd(m.createProperty("set",r,i),o)):(r=re(),Z("("),Z(")"),i=te([]),m.markEnd(m.createProperty("get",r,i),o))):e.type!==t.EOF&&e.type!==t.Punctuator?(r=re(),Z(":"),i=he(),m.markEnd(m.createProperty("init",r,i),o)):void W(e)}function ie(){var e,r,n,o;if(J("("))return function(){var e;return Z("("),e=fe(),Z(")"),e}();if(J("["))return function(){var e,t=[];for(e=g,Z("[");!J("]");)J(",")?(z(),t.push(null)):(t.push(he()),J("]")||Z(","));return z(),m.markEnd(m.createArrayExpression(t),e)}();if(J("{"))return function(){var e,t,r,n,o,u=[],l={},h=String;for(o=g,Z("{");!J("}");)t=(e=ne()).key.type===i.Identifier?e.key.name:h(e.key.value),n="init"===e.kind?a.Data:"get"===e.kind?a.Get:a.Set,r="$"+t,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===a.Data?c&&n===a.Data?G({},s.StrictDuplicateProperty):n!==a.Data&&G({},s.AccessorDataProperty):n===a.Data?G({},s.AccessorDataProperty):l[r]&n&&G({},s.AccessorGetSet),l[r]|=n):l[r]=n,u.push(e),J("}")||Z(",");return Z("}"),m.markEnd(m.createObjectExpression(u),o)}();if(e=g.type,o=g,e===t.Identifier)n=m.createIdentifier(z().value);else if(e===t.StringLiteral||e===t.NumericLiteral)c&&g.octal&&G(g,s.StrictOctalLiteral),n=m.createLiteral(z());else if(e===t.Keyword){if(Q("function"))return function(){var e,t,r,n,i,a,o,u,l,h=null;return u=g,K("function"),J("(")||(e=g,h=pe(),c?k(e.value)&&G(e,s.StrictFunctionName):k(e.value)?(r=e,n=s.StrictFunctionName):R(e.value)&&(r=e,n=s.StrictReservedWord)),l=(i=be(r)).params,t=i.stricted,r=i.firstRestricted,i.message&&(n=i.message),o=c,a=_e(),c&&r&&q(r,n),c&&t&&G(t,n),c=o,m.markEnd(m.createFunctionExpression(h,l,[],a),u)}();Q("this")?(z(),n=m.createThisExpression()):W(z())}else e===t.BooleanLiteral?((r=z()).value="true"===r.value,n=m.createLiteral(r)):e===t.NullLiteral?((r=z()).value=null,n=m.createLiteral(r)):J("/")||J("/=")?(n=void 0!==y.tokens?m.createLiteral(D()):m.createLiteral(B()),V()):W(z());return m.markEnd(n,o)}function ae(){var e=[];if(Z("("),!J(")"))for(;h<p&&(e.push(he()),!J(")"));)Z(",");return Z(")"),e}function se(){return Z("."),r=g,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=z())||W(e),m.markEnd(m.createIdentifier(e.value),r);var e,r}function oe(){var e;return Z("["),e=fe(),Z("]"),e}function ue(){var e,r,n=g;return e=function(){var e,t,r,n,i=v.allowIn;for(n=g,v.allowIn=!0,e=Q("new")?function e(){var t,r,n;return n=g,K("new"),t=function(){var t,r,n;for(_(v.allowIn,"callee of new expression always allow in keyword."),n=g,t=Q("new")?e():ie();J(".")||J("[");)J("[")?(r=oe(),t=m.createMemberExpression("[",t,r)):(r=se(),t=m.createMemberExpression(".",t,r)),m.markEnd(t,n);return t}(),r=J("(")?ae():[],m.markEnd(m.createNewExpression(t,r),n)}():ie();;){if(J("."))r=se(),e=m.createMemberExpression(".",e,r);else if(J("("))t=ae(),e=m.createCallExpression(e,t);else{if(!J("["))break;r=oe(),e=m.createMemberExpression("[",e,r)}m.markEnd(e,n)}return v.allowIn=i,e}(),g.type===t.Punctuator&&(!J("++")&&!J("--")||X()||(c&&e.type===i.Identifier&&k(e.name)&&G({},s.StrictLHSPostfix),ee(e)||G({},s.InvalidLHSInAssignment),r=z(),e=m.markEnd(m.createPostfixExpression(r.value,e),n))),e}function le(){var e,r,n;return g.type!==t.Punctuator&&g.type!==t.Keyword?r=ue():J("++")||J("--")?(n=g,e=z(),r=le(),c&&r.type===i.Identifier&&k(r.name)&&G({},s.StrictLHSPrefix),ee(r)||G({},s.InvalidLHSInAssignment),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):J("+")||J("-")||J("~")||J("!")?(n=g,e=z(),r=le(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Q("delete")||Q("void")||Q("typeof")?(n=g,e=z(),r=le(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n),c&&"delete"===r.operator&&r.argument.type===i.Identifier&&G({},s.StrictDelete)):r=ue(),r}function ce(e,r){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function he(){var e,r,n,a,o,u;return e=g,o=g,a=r=function(){var e,t,r,n,i;return i=g,e=function(){var e,t,r,n,i,a,s,o,u,l;if(e=g,u=le(),0===(i=ce(n=g,v.allowIn)))return u;for(n.prec=i,z(),t=[e,g],a=[u,n,s=le()];(i=ce(g,v.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,u=a.pop(),r=m.createBinaryExpression(o,u,s),t.pop(),e=t[t.length-1],m.markEnd(r,e),a.push(r);(n=z()).prec=i,a.push(n),t.push(g),r=le(),a.push(r)}for(r=a[l=a.length-1],t.pop();l>1;)r=m.createBinaryExpression(a[l-1].value,a[l-2],r),l-=2,e=t.pop(),m.markEnd(r,e);return r}(),J("?")&&(z(),t=v.allowIn,v.allowIn=!0,r=he(),v.allowIn=t,Z(":"),n=he(),e=m.createConditionalExpression(e,r,n),m.markEnd(e,i)),e}(),g.type!==t.Punctuator||"="!==(u=g.value)&&"*="!==u&&"/="!==u&&"%="!==u&&"+="!==u&&"-="!==u&&"<<="!==u&&">>="!==u&&">>>="!==u&&"&="!==u&&"^="!==u&&"|="!==u||(ee(r)||G({},s.InvalidLHSInAssignment),c&&r.type===i.Identifier&&k(r.name)&&G(e,s.StrictLHSAssignment),e=z(),n=he(),a=m.markEnd(m.createAssignmentExpression(e.value,r,n),o)),a}function fe(){var e,t=g;if(e=he(),J(",")){for(e=m.createSequenceExpression([e]);h<p&&J(",");)z(),e.expressions.push(he());m.markEnd(e,t)}return e}function de(){var e,t;return t=g,Z("{"),e=function(){for(var e,t=[];h<p&&!J("}")&&void 0!==(e=Ee());)t.push(e);return t}(),Z("}"),m.markEnd(m.createBlockStatement(e),t)}function pe(){var e,r;return r=g,(e=z()).type!==t.Identifier&&W(e),m.markEnd(m.createIdentifier(e.value),r)}function me(e){var t,r,n=null;return r=g,t=pe(),c&&k(t.name)&&G({},s.StrictVarName),"const"===e?(Z("="),n=he()):J("=")&&(z(),n=he()),m.markEnd(m.createVariableDeclarator(t,n),r)}function ge(e){var t=[];do{if(t.push(me(e)),!J(","))break;z()}while(h<p);return t}function ve(){var e,t,r,n=[];for(r=g,Q("default")?(z(),e=null):(K("case"),e=fe()),Z(":");h<p&&!(J("}")||Q("default")||Q("case"));)t=ye(),n.push(t);return m.markEnd(m.createSwitchCase(e,n),r)}function ye(){var e,r,n,a,o,u,f,d,y,_=g.type;if(_===t.EOF&&W(g),_===t.Punctuator&&"{"===g.value)return de();if(a=g,_===t.Punctuator)switch(g.value){case";":return m.markEnd((Z(";"),m.createEmptyStatement()),a);case"(":return m.markEnd(function(){var e=fe();return $(),m.createExpressionStatement(e)}(),a)}if(_===t.Keyword)switch(g.value){case"break":return m.markEnd(function(){var e,r=null;return K("break"),59===l.charCodeAt(h)?(z(),v.inIteration||v.inSwitch||q({},s.IllegalBreak),m.createBreakStatement(null)):X()?(v.inIteration||v.inSwitch||q({},s.IllegalBreak),m.createBreakStatement(null)):(g.type===t.Identifier&&(e="$"+(r=pe()).name,Object.prototype.hasOwnProperty.call(v.labelSet,e)||q({},s.UnknownLabel,r.name)),$(),null!==r||v.inIteration||v.inSwitch||q({},s.IllegalBreak),m.createBreakStatement(r))}(),a);case"continue":return m.markEnd(function(){var e,r=null;return K("continue"),59===l.charCodeAt(h)?(z(),v.inIteration||q({},s.IllegalContinue),m.createContinueStatement(null)):X()?(v.inIteration||q({},s.IllegalContinue),m.createContinueStatement(null)):(g.type===t.Identifier&&(e="$"+(r=pe()).name,Object.prototype.hasOwnProperty.call(v.labelSet,e)||q({},s.UnknownLabel,r.name)),$(),null!==r||v.inIteration||q({},s.IllegalContinue),m.createContinueStatement(r))}(),a);case"debugger":return m.markEnd((K("debugger"),$(),m.createDebuggerStatement()),a);case"do":return m.markEnd((K("do"),y=v.inIteration,v.inIteration=!0,f=ye(),v.inIteration=y,K("while"),Z("("),d=fe(),Z(")"),J(";")&&z(),m.createDoWhileStatement(f,d)),a);case"for":return m.markEnd(function(){var e,t,r,n,i,a,o,u,l,c,h=v.allowIn;return e=t=r=null,K("for"),Z("("),J(";")?z():(Q("var")||Q("let")?(v.allowIn=!1,c=g,u=z(),l=ge(),e=m.markEnd(m.createVariableDeclaration(l,u.value),c),v.allowIn=h,1===e.declarations.length&&Q("in")&&(z(),n=e,i=fe(),e=null)):(v.allowIn=!1,e=fe(),v.allowIn=h,Q("in")&&(ee(e)||G({},s.InvalidLHSInForIn),z(),n=e,i=fe(),e=null)),void 0===n&&Z(";")),void 0===n&&(J(";")||(t=fe()),Z(";"),J(")")||(r=fe())),Z(")"),o=v.inIteration,v.inIteration=!0,a=ye(),v.inIteration=o,void 0===n?m.createForStatement(e,t,r,a):m.createForInStatement(n,i,a)}(),a);case"function":return m.markEnd(we(),a);case"if":return m.markEnd(function(){var e,t,r;return K("if"),Z("("),e=fe(),Z(")"),t=ye(),Q("else")?(z(),r=ye()):r=null,m.createIfStatement(e,t,r)}(),a);case"return":return m.markEnd((u=null,K("return"),v.inFunctionBody||G({},s.IllegalReturn),32===l.charCodeAt(h)&&T(l.charCodeAt(h+1))?(u=fe(),$(),m.createReturnStatement(u)):X()?m.createReturnStatement(null):(J(";")||J("}")||g.type===t.EOF||(u=fe()),$(),m.createReturnStatement(u))),a);case"switch":return m.markEnd(function(){var e,t,r,n,i;if(K("switch"),Z("("),e=fe(),Z(")"),Z("{"),t=[],J("}"))return z(),m.createSwitchStatement(e,t);for(n=v.inSwitch,v.inSwitch=!0,i=!1;h<p&&!J("}");)null===(r=ve()).test&&(i&&q({},s.MultipleDefaultsInSwitch),i=!0),t.push(r);return v.inSwitch=n,Z("}"),m.createSwitchStatement(e,t)}(),a);case"throw":return m.markEnd(function(){var e;return K("throw"),X()&&q({},s.NewlineAfterThrow),e=fe(),$(),m.createThrowStatement(e)}(),a);case"try":return m.markEnd(function(){var e,t,r,n,i=[],a=null;return K("try"),e=de(),Q("catch")&&i.push((n=g,K("catch"),Z("("),J(")")&&W(g),t=pe(),c&&k(t.name)&&G({},s.StrictCatchVariable),Z(")"),r=de(),m.markEnd(m.createCatchClause(t,r),n))),Q("finally")&&(z(),a=de()),0!==i.length||a||q({},s.NoCatchOrFinally),m.createTryStatement(e,[],i,a)}(),a);case"var":return m.markEnd((K("var"),o=ge(),$(),m.createVariableDeclaration(o,"var")),a);case"while":return m.markEnd(function(){var e,t,r;return K("while"),Z("("),e=fe(),Z(")"),r=v.inIteration,v.inIteration=!0,t=ye(),v.inIteration=r,m.createWhileStatement(e,t)}(),a);case"with":return m.markEnd(function(){var e,t;return c&&(L(),G({},s.StrictModeWith)),K("with"),Z("("),e=fe(),Z(")"),t=ye(),m.createWithStatement(e,t)}(),a)}return(e=fe()).type===i.Identifier&&J(":")?(z(),n="$"+e.name,Object.prototype.hasOwnProperty.call(v.labelSet,n)&&q({},s.Redeclaration,"Label",e.name),v.labelSet[n]=!0,r=ye(),delete v.labelSet[n],m.markEnd(m.createLabeledStatement(e,r),a)):($(),m.markEnd(m.createExpressionStatement(e),a))}function _e(){var e,r,n,a,o,u,f,d,y=[];for(d=g,Z("{");h<p&&g.type===t.StringLiteral&&(r=g,e=Ee(),y.push(e),e.expression.type===i.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(a=v.labelSet,o=v.inIteration,u=v.inSwitch,f=v.inFunctionBody,v.labelSet={},v.inIteration=!1,v.inSwitch=!1,v.inFunctionBody=!0;h<p&&!J("}")&&void 0!==(e=Ee());)y.push(e);return Z("}"),v.labelSet=a,v.inIteration=o,v.inSwitch=u,v.inFunctionBody=f,m.markEnd(m.createBlockStatement(y),d)}function be(e){var t,r,n,i,a,o,u=[];if(Z("("),!J(")"))for(i={};h<p&&(r=g,t=pe(),a="$"+r.value,c?(k(r.value)&&(n=r,o=s.StrictParamName),Object.prototype.hasOwnProperty.call(i,a)&&(n=r,o=s.StrictParamDupe)):e||(k(r.value)?(e=r,o=s.StrictParamName):R(r.value)?(e=r,o=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,a)&&(e=r,o=s.StrictParamDupe)),u.push(t),i[a]=!0,!J(")"));)Z(",");return Z(")"),{params:u,stricted:n,firstRestricted:e,message:o}}function we(){var e,t,r,n,i,a,o,u,l,h;return h=g,K("function"),n=g,e=pe(),c?k(n.value)&&G(n,s.StrictFunctionName):k(n.value)?(o=n,u=s.StrictFunctionName):R(n.value)&&(o=n,u=s.StrictReservedWord),t=(a=be(o)).params,i=a.stricted,o=a.firstRestricted,a.message&&(u=a.message),l=c,r=_e(),c&&o&&q(o,u),c&&i&&G(i,u),c=l,m.markEnd(m.createFunctionDeclaration(e,t,[],r),h)}function Ee(){if(g.type===t.Keyword)switch(g.value){case"const":case"let":return e=g.value,n=g,K(e),r=ge(e),$(),m.markEnd(m.createVariableDeclaration(r,e),n);case"function":return we();default:return ye()}var e,r,n;if(g.type!==t.EOF)return ye()}function xe(){var e,r;return L(),V(),r=g,c=!1,e=function(){for(var e,r,n,a=[];h<p&&(r=g).type===t.StringLiteral&&(e=Ee(),a.push(e),e.expression.type===i.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(c=!0,n&&G(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;h<p&&void 0!==(e=Ee());)a.push(e);return a}(),m.markEnd(m.createProgram(e),r)}function Ae(){var e,t,r,n=[];for(e=0;e<y.tokens.length;++e)r={type:(t=y.tokens[e]).type,value:t.value},y.range&&(r.range=t.range),y.loc&&(r.loc=t.loc),n.push(r);y.tokens=n}(r={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",r[t.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},a={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},o={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},u={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===i.Program&&e.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=e.range[1]?(r=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=e.range[0];)t=y.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=y.leadingComments,y.leadingComments=[]),r&&(e.trailingComments=r),y.bottomRightStack.push(e)}},markEnd:function(e,t){return y.range&&(e.range=[t.start,h]),y.loc&&(e.loc=new H(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),f,h-d),this.postProcess(e)),y.attachComment&&this.processComment(e),e},postProcess:function(e){return y.source&&(e.loc.source=y.source),e},createArrayExpression:function(e){return{type:i.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:i.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?i.LogicalExpression:i.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:i.BlockStatement,body:e}},createBreakStatement:function(e){return{type:i.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:i.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:i.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:i.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:i.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:i.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(e){return{type:i.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:i.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:i.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:i.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:i.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:i.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:i.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:i.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:i.Literal,value:e.value,raw:l.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:i.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:i.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:i.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:i.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:i.Program,body:e}},createProperty:function(e,t,r){return{type:i.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:i.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:i.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:i.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:i.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(e){return{type:i.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:i.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:i.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:i.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:i.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:i.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:i.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:i.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,r){var n,i;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=u,h=0,f=(l=e).length>0?1:0,d=0,p=l.length,g=null,v={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},(r=r||{}).tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range="boolean"==typeof r.range&&r.range,y.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(y.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(y.errors=[]);try{if(V(),g.type===t.EOF)return y.tokens;for(z();g.type!==t.EOF;)try{z()}catch(e){if(y.errors){y.errors.push(e);break}throw e}Ae(),i=y.tokens,void 0!==y.comments&&(i.comments=y.comments),void 0!==y.errors&&(i.errors=y.errors)}catch(e){throw e}finally{y={}}return i},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=u,h=0,f=(l=e).length>0?1:0,d=0,p=l.length,g=null,v={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},void 0!==t&&(y.range="boolean"==typeof t.range&&t.range,y.loc="boolean"==typeof t.loc&&t.loc,y.attachComment="boolean"==typeof t.attachComment&&t.attachComment,y.loc&&null!==t.source&&void 0!==t.source&&(y.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(y.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(y.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{r=xe(),void 0!==y.comments&&(r.comments=y.comments),void 0!==y.tokens&&(Ae(),r.tokens=y.tokens),void 0!==y.errors&&(r.errors=y.errors)}catch(e){throw e}finally{y={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),i)i.hasOwnProperty(e)&&(t[e]=i[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],"+Mqr":[function(e,t,r){arguments[3];var n=arguments[3],i=e("esprima"),a=e("uniq"),s=0;function o(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function u(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}function l(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:void 0!==n?e in n:"undefined"!=typeof self&&e in self}t.exports=function(e){for(var t=["(",e,")()"].join(""),r=i.parse(t,{range:!0}),n="_inline_"+s+++"_",c=function(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}(r),h=new Array(c.length),f=0;f<c.length;++f)h[f]=new o([n,"arg",f,"_"].join(""),!1,!1);for(var d=new Array(t.length),p=(f=0,t.length);f<p;++f)d[f]=t.charAt(f);var m,g=[],v=[];function y(e,t){for(var r=e.range[0],n=e.range[1],i=r+1;i<n;++i)d[i]="";d[r]=t}return function e(t,r){if(t.parent=r,"MemberExpression"===t.type)t.computed?(e(t.object,t),e(t.property,t)):"ThisExpression"===t.object.type?y(t,(_="this_"+t.property.name.replace(/\_/g,"__"),v.push(_),_)):e(t.object,t);else{if("ThisExpression"===t.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===t.type){var i=t.name,a=c.indexOf(i);if(a>=0){var s=h[a],o=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?1:3:"UpdateExpression"===e.parent.type?3:2}(t);1&o&&(s.lvalue=!0),2&o&&(s.rvalue=!0),++s.count,y(t,s.name)}else l(i)||y(t,function(e){var t=n+i.replace(/\_/g,"__");return g.push(t),t}())}else if("Literal"===t.type)"string"==typeof t.value&&y(t,"'"+t.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===t.type)throw new Error("cwise-parser: with() statements not allowed");for(var u=Object.keys(t),f=0,d=u.length;f<d;++f)if("parent"!==u[f]){var p=t[u[f]];if(p)if(p instanceof Array)for(var m=0;m<p.length;++m)p[m]&&"string"==typeof p[m].type&&e(p[m],t);else"string"==typeof p.type&&e(p,t)}}}var _}(r.body[0].expression.callee.body,void 0),a(g),a(v),new u((m=r.body[0].expression.callee.body,d.slice(m.range[0],m.range[1]).join("")),h,v,g)}},{esprima:"MSjk",uniq:"a/V3"}],p0w9:[function(e,t,r){"use strict";var n=e("cwise-parser"),i=e("cwise-compiler"),a=["args","body"],s=["pre","post","printCode","funcName","blockSize"];t.exports=function(e){for(var t in e)a.indexOf(t)<0&&s.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<a.length;++r)if(!e[a[r]])throw new Error("cwise: Missing argument: "+a[r]);return i({args:e.args,pre:n(e.pre||function(){}),body:n(e.body),post:n(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}},{"cwise-parser":"+Mqr","cwise-compiler":"Kt/t"}],H3Gr:[function(e,t,r){"use strict";t.exports=function(e,t){return new c(e,n(e,t),i.mallocUint8(t[0]*t[1]*4))};var n=e("gl-fbo"),i=e("typedarray-pool"),a=e("ndarray"),s=e("cwise"),o=e("bit-twiddle").nextPow2,u=s({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:function(){this.closestD2=1e8,this.closestX=-1,this.closestY=-1},body:function(e,t,r,n,i,a,s){if(e<255||t<255||r<255||n<255){var o=i-s[0],u=a-s[1],l=o*o+u*u;l<this.closestD2&&(this.closestD2=l,this.closestX=s[0],this.closestY=s[1])}},post:function(){return[this.closestX,this.closestY,this.closestD2]}});function l(e,t,r,n,i){this.coord=[e,t],this.id=r,this.value=n,this.distance=i}function c(e,t,r){this.gl=e,this.fbo=t,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],r=this.fbo.shape[1];if(r*t*4>this.buffer.length){i.free(this.buffer);for(var n=this.buffer=i.mallocUint8(o(r*t*4)),a=0;a<r*t*4;++a)n[a]=255}return e}}}),h.begin=function(){var e=this.gl;this.shape,e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},h.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(e,t,r){if(!this.gl)return null;var n=this.fbo.shape.slice();e|=0,t|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max(e-r,0),n[0]),s=0|Math.min(Math.max(e+r,0),n[0]),o=0|Math.min(Math.max(t-r,0),n[1]),c=0|Math.min(Math.max(t+r,0),n[1]);if(s<=i||c<=o)return null;var h=[s-i,c-o],f=a(this.buffer,[h[0],h[1],4],[4,4*n[0],1],4*(i+n[0]*o)),d=u(f.hi(h[0],h[1],1),r,r),p=d[0],m=d[1];return p<0||Math.pow(this.radius,2)<d[2]?null:new l(p+i|0,m+o|0,f.get(p,m,0),[f.get(p,m,1),f.get(p,m,2),f.get(p,m,3)],Math.sqrt(d[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"gl-fbo":"C2Sb","typedarray-pool":"vfn/",ndarray:"cMKA",cwise:"p0w9","bit-twiddle":"gXRl"}],b60D:[function(e,t,r){"use strict";var n,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=i(e("./mesh")),s=i(e("./camera")),o=(e("fs"),i(e("@talenfisher/multitouch-camera"))),u=i(e("gl-select-static")),l=i(e("mouse-change")),c=e("gl-mat4"),h=Symbol(),f=":root {\n    --x3pjs-primary-color: #1f376c;\n    --x3pjs-error-color: red;\n    --x3pjs-progress-background: #ccc;\n}\n\n.x3pjs-render {\n    position: relative;\n    height: 100%;\n    width: 100%;\n}\n\n.x3pjs-render canvas {\n    min-height: 100%;\n    min-width: 100%;\n}\n\n.x3pjs-render-screen {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    left: 0;\n    background: rgba(255, 255, 255, 0.8);\n    text-align: center;\n    padding: 30px;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity .5s;\n}\n\n.x3pjs-render-screen.active {\n    opacity: 1;\n}\n\n.x3pjs-progress-bar {\n    top: calc(50% - 30px);\n    background: var(--x3pjs-progress-background);\n    display: inline-block;\n    width: 80%;\n    height: 30px;\n    border-radius: 25px;\n    position: relative;\n}\n\n.x3pjs-progress-bar > div {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 0;\n    border-radius: 25px;\n\n    background: var(--x3pjs-primary-color);\n}";n=h,r.default=class{constructor(e){this.progress={},this.stopped=!1,this.dirty=!1,this.bounds=[[0,0,0],[0,0,0]],this.scale=0,this.fovy=Math.PI/4,this.near=.01,this.far=100,this.cameraParams={model:new Array(16),view:null,projection:new Array(16)},this[n]="normal",this.canvas=e.canvas,window.addEventListener("resize",this.resizeListener.bind(this)),this.resizeListener(),this.containerize(),this.addProgressBar(),this.gl=this.getContext(this.canvas),this.camera=o.default(this.canvas,s.default),this.select=u.default(this.gl,this.shape),this.mouseListener=l.default(this.canvas,this.mouseHandler.bind(this));let t=Object.assign({renderer:this},e);this.mesh=new a.default(t),this.mesh.onready=(()=>{this.dirty=!0,this.updateBounds(),this.render()})}render(){if(this.stopped)return;requestAnimationFrame(this.render.bind(this));let e=this.camera.tick();(this.dirty||e)&&(this.updateCameraParams(),e&&this.drawMesh(),"still"===this.mode&&this.drawPick())}resizeListener(){this.canvas.setAttribute("width",this.canvas.offsetWidth.toString()),this.canvas.setAttribute("height",this.canvas.offsetHeight.toString()),this.dirty=!0}dispose(){this.stopped=!0,this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.mesh.dispose(),this.select.dispose(),this.mouseListener.enabled=!1,window.removeEventListener("resize",this.resizeListener.bind(this))}get canvasIsAttached(){return null!==this.doc}get doc(){return this.canvas.ownerDocument}get mode(){return this[h]}set mode(e){if(!["normal","still"].includes(e))throw new Error("Mode must be either normal or still");this[h]=e,this.update()}get width(){return this.gl.drawingBufferWidth}get height(){return this.gl.drawingBufferHeight}get shape(){return[this.width,this.height]}update(){switch(this[h]){default:case"normal":this.camera.rotateSpeed=1;break;case"still":this.camera.rotateSpeed=0}}drawMesh(){let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,this.width,this.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.depthMask(!0),e.colorMask(!0,!0,!0,!0),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.disable(e.BLEND),e.disable(e.CULL_FACE),this.mesh.draw(this.cameraParams),this.dirty=!1}drawPick(){let e=this.gl;e.colorMask(!0,!0,!0,!0),e.depthMask(!0),e.disable(e.BLEND),e.enable(e.DEPTH_TEST),this.select.shape=this.shape,this.select.begin(),this.mesh.drawPick(this.cameraParams),this.select.end(),this.dirty=!1}setProgressValue(e){if(this.progress.screen&&this.progress.bar){const{screen:t,bar:r}=this.progress;r.style.width=100*e+"%",1===e&&setTimeout(()=>{t.classList.remove("active")},500)}}mouseHandler(e,t,r){if("still"!==this.mode)return;this.dirty=!0;let n=this.select.query(t,this.shape[1]-r-1,10),i=this.mesh.pick(n);i&&(this.selection=i,this.onpick&&this.onpick(i))}resetModelMatrix(){let e=this.cameraParams.model;e[15]=1;for(let t=0;t<15;t++)e[t]=0}updateCameraParams(){c.perspective(this.cameraParams.projection,this.fovy,this.width/this.height,this.near,this.far),this.cameraParams.view=this.camera.matrix,this.resetModelMatrix();let e=this.cameraParams.model;for(let t=0;t<3;t++)e[5*t]=1/this.scale,e[12+t]=.5*-e[5*t]*(this.bounds[0][t]+this.bounds[1][t])}updateBounds(){let e=this.mesh.bounds;for(let t=0;t<3;t++){let[r,n]=e;if(n[t]<r[t])this.bounds[0][t]=-1,this.bounds[1][t]=1;else{let e=.05*(n[t]-r[t]);this.bounds[0][t]=r[t]-e,this.bounds[1][t]=n[t]+e}this.scale=Math.max(this.scale,this.bounds[1][t]-this.bounds[0][t])}}getContext(e){if(this.gl)return this.gl;let t=e.getContext("webgl",{premultipliedAlpha:!0,antialias:!0});if(null===t)throw new Error("Unable to get the WebGL Rendering Context");return t}containerize(){if(!this.canvasIsAttached)return;let e=this.canvas.parentElement;if(e.classList.contains("x3pjs-render"))return this.canvasContainer=e,void this.removeScreens();let t=this.doc,r=t.createElement("style");r.innerHTML=f,t.head.appendChild(r);let n=this.canvas.parentElement,i=t.createElement("div");i.classList.add("x3pjs-render"),n.removeChild(this.canvas),i.appendChild(this.canvas),n.appendChild(i),this.canvasContainer=i}createScreen(e){if(!this.canvasIsAttached||!this.canvasContainer)return;let t=this.doc.createElement("div");return t.classList.add("x3pjs-render-screen"),t.id=e,this.canvasContainer.appendChild(t),t}removeScreens(){if(this.canvasContainer)for(let e of Array.from(this.canvasContainer.children))e.classList.contains("x3pjs-render-screen")&&this.canvasContainer.removeChild(e)}addProgressBar(){if(!this.canvasIsAttached||!this.canvasContainer)return;let e=this.doc,t=e.createElement("div"),r=e.createElement("div");t.classList.add("x3pjs-progress-bar"),t.appendChild(r);let n=this.createScreen("x3pjs-progress-screen");n.appendChild(t),n.classList.add("active"),this.progress={bar:r,screen:n}}}},{"./mesh":"gl3E","./camera":"z/6T",fs:"70rD","@talenfisher/multitouch-camera":"ulWn","gl-select-static":"H3Gr","mouse-change":"9a0v","gl-mat4":"VVjU"}],KAEt:[function(e,t,r){arguments[3];var n=arguments[3];!function(e,t){void 0!==r?t():(t(),e.FileSaver={})}(this,function(){"use strict";function e(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,s){var o=a.URL||a.webkitURL,u=document.createElement("a");n=n||t.name||"download",u.download=n,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?i(u):r(u.href)?e(t,n,s):i(u,u.target="_blank")):(u.href=o.createObjectURL(t),setTimeout(function(){o.revokeObjectURL(u.href)},4e4),setTimeout(function(){i(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(t,a),n);else if(r(t))e(t,n,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){i(s)})}}:function(t,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,r,n);var s="application/octet-stream"===t.type,o=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&o)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(t)}else{var c=a.URL||a.webkitURL,h=c.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});a.saveAs=s.saveAs=s,void 0!==t&&(t.exports=s)})},{}],Z35u:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=i(e("./axis")),s=i(e("./renderer")),o=e("file-saver");r.default=class{constructor(e){this.saveMask=!0,this.options=e,this.loader=e.loader,this.manifest=e.manifest,this.pointBuffer=e.pointBuffer,this.mask=e.mask,this.name=e.name,this.axes={x:new a.default({name:"X",manifest:this.manifest}),y:new a.default({name:"Y",manifest:this.manifest}),z:new a.default({name:"Z",manifest:this.manifest})}}save(){return n(this,void 0,void 0,function*(){if(this.loader.write("main.xml",this.manifest.toString()),this.loader.write("md5checksum.hex",`${this.manifest.checksum} *main.xml`),this.saveMask&&this.mask.canvas){let e=this.mask.canvas,t=yield e.toBlob();this.loader.write("bindata/mask.png",t)}})}download(e=this.name){return n(this,void 0,void 0,function*(){let t=yield this.loader.toBlob();t&&o.saveAs(t,e)})}render(e){if(this.pointBuffer)return new s.default({x3p:this,canvas:e,lighting:{ambient:.05,diffuse:.4,specular:.2,roughness:.5}})}}},{"./axis":"JHoi","./renderer":"b60D","file-saver":"KAEt"}],FRpO:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(s(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),n=(l=r.slice()).length,u=0;u<n;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,s,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(r=this._events[e]).length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(o=s;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],"4Bm0":[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],pBGv:[function(e,t,r){var n,i,a=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var c,h=[],f=!1,d=-1;function p(){f&&c&&(f=!1,c.length?h=c.concat(h):d=-1,h.length&&m())}function m(){if(!f){var e=u(p);f=!0;for(var t=h.length;t;){for(c=h,h=[];++d<t;)c&&c[d].run();d=-1,t=h.length}c=null,f=!1,l(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new g(e,t)),1!==h.length||f||u(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],Yj0v:[function(e,t,r){e("process");var n=e("process");!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,t)});case 3:return n.nextTick(function(){e.call(null,t,r)});case 4:return n.nextTick(function(){e.call(null,t,r,i)});default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return n.nextTick(function(){e.apply(null,a)})}}}:t.exports=n},{process:"pBGv"}],Q8A6:[function(e,t,r){t.exports=e("events").EventEmitter},{events:"FRpO"}],"38Wu":[function(e,t,r){var n=e("buffer"),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(a(n,r),r.Buffer=s),a(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:"dskh"}],Q14w:[function(e,t,r){e("buffer").Buffer;var n=e("buffer").Buffer;function i(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===i(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===i(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===i(e)},r.isError=function(e){return"[object Error]"===i(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=n.isBuffer},{buffer:"dskh"}],Um5I:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("util");function a(e,t,r){e.copy(t,r)}t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t=n.allocUnsafe(e>>>0),r=this.head,i=0;r;)a(r.data,t,i),i+=r.data.length,r=r.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":"38Wu",util:"70rD"}],avqi:[function(e,t,r){"use strict";var n=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":"Yj0v"}],yM1o:[function(e,t,r){arguments[3];var n=arguments[3];function i(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},{}],"3I0x":[function(e,r,n){e("process"),arguments[3];var i=e("process"),a=arguments[3],s=e("process-nextick-args");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}r.exports=_;var u,l=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?t:s.nextTick;_.WritableState=y;var c=e("core-util-is");c.inherits=e("inherits");var h={deprecate:e("util-deprecate")},f=e("./internal/streams/stream"),d=e("safe-buffer").Buffer,p=a.Uint8Array||function(){};var m,g=e("./internal/streams/destroy");function v(){}function y(t,r){u=u||e("./_stream_duplex"),t=t||{};var n=r instanceof u;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){T(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(t){if(u=u||e("./_stream_duplex"),!(m.call(_,this)||this instanceof u))return new _(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function b(e,t){var r=new Error("write after end");e.emit("error",r),s.nextTick(t,r)}function w(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),s.nextTick(n,a),i=!1),i}function E(e,t,r,n,i,a){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var o=t.objectMode?1:n.length;t.length+=o;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,o,n,i,a);return u}function x(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function A(e,t,r,n,i){--t.pendingcb,r?(s.nextTick(i,n),s.nextTick(M,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),M(e,t))}function T(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)A(e,r,n,t,i);else{var a=k(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||R(e,r),n?l(S,e,r,a,i):S(e,r,a,i)}}function S(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),M(e,t)}function R(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,x(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(x(e,t,!1,t.objectMode?1:l.length,l,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),M(e,t)})}function I(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function M(e,t){var r=k(t);return r&&(I(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function L(e,t,r){t.ending=!0,M(e,t),r&&(t.finished?s.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}c.inherits(_,f),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===_&&e&&e._writableState instanceof y}})):m=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,r){var n=this._writableState,i=!1,a=!n.objectMode&&function(e){return d.isBuffer(e)||e instanceof p}(e);return a&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=v),n.ended?b(this,r):(a||w(this,n,e,r))&&(n.pendingcb++,i=E(this,n,a,e,t,r)),i},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||R(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||L(this,n,r)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}},{"process-nextick-args":"Yj0v","core-util-is":"Q14w",inherits:"4Bm0","util-deprecate":"yM1o","./internal/streams/stream":"Q8A6","safe-buffer":"38Wu","./internal/streams/destroy":"avqi","./_stream_duplex":"wldW",process:"pBGv"}],wldW:[function(e,t,r){"use strict";var n=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=h;var a=e("core-util-is");a.inherits=e("inherits");var s=e("./_stream_readable"),o=e("./_stream_writable");a.inherits(h,s);for(var u=i(o.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=o.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"process-nextick-args":"Yj0v","core-util-is":"Q14w",inherits:"4Bm0","./_stream_readable":"Ogwm","./_stream_writable":"3I0x"}],"3+3F":[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}r.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":"38Wu"}],Ogwm:[function(e,t,r){arguments[3],e("process");var n=arguments[3],i=e("process"),a=e("process-nextick-args");t.exports=w;var s,o=e("isarray");w.ReadableState=b;e("events").EventEmitter;var u=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,h=n.Uint8Array||function(){};var f=e("core-util-is");f.inherits=e("inherits");var d=e("util"),p=void 0;p=d&&d.debuglog?d.debuglog("stream"):function(){};var m,g=e("./internal/streams/BufferList"),v=e("./internal/streams/destroy");f.inherits(w,l);var y=["error","close","destroy","pause","resume"];function _(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function b(t,r){t=t||{};var n=r instanceof(s=s||e("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(m||(m=e("string_decoder/").StringDecoder),this.decoder=new m(t.encoding),this.encoding=t.encoding)}function w(t){if(s=s||e("./_stream_duplex"),!(this instanceof w))return new w(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function E(e,t,r,n,i){var a,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}}(e,s)):(i||(a=function(e,t){var r;return function(e){return c.isBuffer(e)||e instanceof h}(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):k(e,s)):x(e,s,t,!1))):n||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),k(e,t)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=v.destroy,w.prototype._undestroy=v.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},w.prototype.unshift=function(e){return E(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return m||(m=e("string_decoder/").StringDecoder),this._readableState.decoder=new m(t),this._readableState.encoding=t,this};var A=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(R,e):R(e))}function R(e){p("emit readable"),e.emit("readable"),L(e)}function k(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function I(e){p("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?i+=a:i+=a.slice(0,e),0==(e-=s)){s===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0==(e-=s)){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function P(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(U,t,e))}function U(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):S(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&P(this),null;var n,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&P(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,p("pipe count=%d opts=%j",n.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?v:o;function o(){p("onend"),e.end()}n.endEmitted?a.nextTick(s):r.once("end",s),e.on("unpipe",function t(i,a){p("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,p("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",v),r.removeListener("data",f),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())});var l=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&u(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var c=!1,h=!1;function f(t){p("ondata"),h=!1,!1!==e.write(t)||h||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==O(n.pipes,e))&&!c&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function d(t){p("onerror",t),v(),e.removeListener("error",d),0===u(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",g),v()}function g(){p("onfinish"),e.removeListener("close",m),v()}function v(){p("unpipe"),r.unpipe(e)}return r.on("data",f),_(e,"error",d),e.once("close",m),e.once("finish",g),e.emit("pipe",r),n.flowing||(p("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,r);return this}var s=O(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},w.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):a.nextTick(I,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(M,e,t))}(this,e)),this},w.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<y.length;a++)e.on(y[a],this.emit.bind(this,y[a]));return this._read=function(t){p("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=N},{"process-nextick-args":"Yj0v",isarray:"seLU",events:"FRpO","./internal/streams/stream":"Q8A6","safe-buffer":"38Wu","core-util-is":"Q14w",inherits:"4Bm0",util:"70rD","./internal/streams/BufferList":"Um5I","./internal/streams/destroy":"avqi","./_stream_duplex":"wldW","string_decoder/":"3+3F",process:"pBGv"}],I3bg:[function(e,t,r){"use strict";t.exports=s;var n=e("./_stream_duplex"),i=e("core-util-is");function a(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){u(e,t,r)}):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":"wldW","core-util-is":"Q14w",inherits:"4Bm0"}],kQBK:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_transform"),i=e("core-util-is");function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}i.inherits=e("inherits"),i.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":"I3bg","core-util-is":"Q14w",inherits:"4Bm0"}],uwsL:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_readable.js":"Ogwm","./lib/_stream_writable.js":"3I0x","./lib/_stream_duplex.js":"wldW","./lib/_stream_transform.js":"I3bg","./lib/_stream_passthrough.js":"kQBK"}],GAH2:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":"3I0x"}],dMbb:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":"wldW"}],yG3q:[function(e,t,r){t.exports=e("./readable").Transform},{"./readable":"uwsL"}],jlpe:[function(e,t,r){t.exports=e("./readable").PassThrough},{"./readable":"uwsL"}],fnRj:[function(e,t,r){t.exports=i;var n=e("events").EventEmitter;function i(){n.call(this)}e("inherits")(i,n),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",u));var s=!1;function o(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",l),e.on("error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},{events:"FRpO",inherits:"4Bm0","readable-stream/readable.js":"uwsL","readable-stream/writable.js":"GAH2","readable-stream/duplex.js":"dMbb","readable-stream/transform.js":"yG3q","readable-stream/passthrough.js":"jlpe"}],fOjT:[function(e,t,r){t.exports=e("stream")},{stream:"fnRj"}],untT:[function(e,t,r){e("buffer").Buffer;var n=e("buffer").Buffer;if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==n,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),r.blob=0===a.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":"fOjT",buffer:"dskh"}],Ps3q:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,s,o,u,l,c=[],h=0,f=e.length,d=f,p="string"!==n.getTypeOf(e);h<e.length;)d=f-h,p?(t=e[h++],r=h<f?e[h++]:0,i=h<f?e[h++]:0):(t=e.charCodeAt(h++),r=h<f?e.charCodeAt(h++):0,i=h<f?e.charCodeAt(h++):0),s=t>>2,o=(3&t)<<4|r>>4,u=d>1?(15&r)<<2|i>>6:64,l=d>2?63&i:64,c.push(a.charAt(s)+a.charAt(o)+a.charAt(u)+a.charAt(l));return c.join("")},r.decode=function(e){var t,r,n,s,o,u,l=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&f--,e.charAt(e.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(s=a.indexOf(e.charAt(l++)))>>4,r=(15&s)<<4|(o=a.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(u=a.indexOf(e.charAt(l++))),h[c++]=t,64!==o&&(h[c++]=r),64!==u&&(h[c++]=n);return h}},{"./utils":"dvMn","./support":"untT"}],c5OX:[function(e,t,r){e("buffer").Buffer;var n=e("buffer").Buffer;t.exports={isNode:void 0!==n,newBufferFrom:function(e,t){if(n.from&&n.from!==Uint8Array.from)return n.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new n(e,t)},allocBuffer:function(e){if(n.alloc)return n.alloc(e);var t=new n(e);return t.fill(0),t},isBuffer:function(e){return n.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{buffer:"dskh"}],e0Yl:[function(e,r,n){"use strict";r.exports="function"==typeof t?t:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}],uUPe:[function(e,t,r){arguments[3];var n,i,a=arguments[3],s=a.MutationObserver||a.WebKitMutationObserver;if(s){var o=0,u=new s(f),l=a.document.createTextNode("");u.observe(l,{characterData:!0}),n=function(){l.data=o=++o%2}}else if(a.setImmediate||void 0===a.MessageChannel)n="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var e=a.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},a.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var c=new a.MessageChannel;c.port1.onmessage=f,n=function(){c.port2.postMessage(0)}}var h=[];function f(){var e,t;i=!0;for(var r=h.length;r;){for(t=h,h=[],e=-1;++e<r;)t[e]();r=h.length}i=!1}t.exports=function(e){1!==h.push(e)||i||n()}},{}],xz3w:[function(e,t,r){"use strict";var n=e("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return a.reject(e,t)}n===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,n)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,a.reject(e,t))}function i(t){r||(r=!0,a.resolve(e,t))}var s=p(function(){t(i,n)});"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=l,l.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==u?h(r,this.state===o?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){a.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=p(f,t);if("error"===r.status)return a.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=o,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return a.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,u=-1,l=new this(i);++u<r;)c(e[u],u);return l;function c(e,i){t.resolve(e).then(function(e){s[i]=e,++o!==r||n||(n=!0,a.resolve(l,s))},function(e){n||(n=!0,a.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,s=-1,o=new this(i);++s<t;)n=e[s],this.resolve(n).then(function(e){r||(r=!0,a.resolve(o,e))},function(e){r||(r=!0,a.reject(o,e))});return o}},{immediate:"uUPe"}],"8JlO":[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:"xz3w"}],dvMn:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("set-immediate-shim"),o=e("./external");function u(e){return c(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}function l(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,r){var n=[],i=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=h.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=h.applyCanBeUsed.nodebuffer),i)for(;t>1;)try{return h.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return h.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=f;var p={};p.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,a.allocBuffer(e.length))}},p.array={string:f,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},p.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return a.newBufferFrom(e)}},p.nodebuffer={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:l},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return p[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&a.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){s(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,a,s,l){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var n=r.getTypeOf(t);return n?("arraybuffer"===n?t=r.transformTo("uint8array",t):"string"===n&&(l?t=i.decode(t):a&&!0!==s&&(t=u(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./support":"untT","./base64":"Ps3q","./nodejsUtils":"c5OX","set-immediate-shim":"e0Yl","./external":"8JlO"}],ZKdc:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],"Sm7/":[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),u=0;u<256;u++)o[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;o[254]=o[254]=1;var l=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+o[e[r]]>t?r:t};function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}r.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,r,n,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),s=0,a=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,a,s=e.length,u=new Array(2*s);for(r=0,t=0;t<s;)if((i=e[t++])<128)u[r++]=i;else if((a=o[i])>4)u[r++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<s;)i=i<<6|63&e[t++],a--;a>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(c,s),c.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=l(t),o=t;s!==t.length&&(i.uint8array?(o=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(o=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(o),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,n.inherits(h,s),h.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=h},{"./utils":"dvMn","./support":"untT","./nodejsUtils":"c5OX","./stream/GenericWorker":"ZKdc"}],yPXq:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function a(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,n),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"./GenericWorker":"ZKdc","../utils":"dvMn"}],LZfN:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),r&&r(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"readable-stream":"fOjT","../utils":"dvMn"}],"2P9T":[function(e,t,r){e("buffer").Buffer;var n=e("buffer").Buffer,i=e("../utils"),a=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),u=e("../support"),l=e("../external"),c=null;if(u.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,r){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return i.transformTo(e,t)}}function f(e,t){var r,i=0,a=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(s),r=0;r<t.length;r++)a.set(t[r],i),i+=t[r].length;return a;case"nodebuffer":return n.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}function d(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,i.checkSupport(n),this._worker=e.pipe(new a(n)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new l.Promise(function(r,n){var i=[],a=e._internalType,s=e._outputType,o=e._mimeType;e.on("data",function(e,r){i.push(e),t&&t(r)}).on("error",function(e){i=[],n(e)}).on("end",function(){try{var e=h(s,f(a,i),o);r(e)}catch(e){n(e)}i=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){i.delay(t,arguments,r)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../utils":"dvMn","./ConvertWorker":"yPXq","./GenericWorker":"ZKdc","../base64":"Ps3q","../support":"untT","../external":"8JlO","../nodejs/NodejsStreamOutputAdapter":"LZfN",buffer:"dskh"}],lUr3:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],ABU1:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":"dvMn","./GenericWorker":"ZKdc"}],S9RN:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":"dvMn","./GenericWorker":"ZKdc"}],cvyR:[function(e,t,r){"use strict";var n=e("./utils");var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();function a(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}function s(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t.charCodeAt(o))];return-1^e}t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?a(0|t,e,e.length,0):s(0|t,e,e.length,0):0}},{"./utils":"dvMn"}],gpbE:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,n),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"./GenericWorker":"ZKdc","../crc32":"cvyR","../utils":"dvMn"}],PO9O:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/DataLengthProbe"),s=e("./stream/Crc32Probe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}a=e("./stream/DataLengthProbe"),o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":"8JlO","./stream/DataWorker":"ABU1","./stream/DataLengthProbe":"S9RN","./stream/Crc32Probe":"gpbE"}],"geN+":[function(e,t,r){"use strict";var n=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),o=e("./stream/GenericWorker"),u=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};u.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!i&&(t=t.pipe(new a.Utf8EncodeWorker)),!s&&i&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new o("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof o?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;t.exports=u},{"./stream/StreamHelper":"2P9T","./stream/DataWorker":"ABU1","./utf8":"Sm7/","./compressedObject":"PO9O","./stream/GenericWorker":"ZKdc"}],tbG5:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,i),i+=a.length;return s}},s={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],"+sRJ":[function(e,t,r){"use strict";var n=e("../utils/common"),i=4,a=0,s=1,o=2;function u(e){for(var t=e.length;--t>=0;)e[t]=0}var l=0,c=1,h=2,f=29,d=256,p=d+1+f,m=30,g=19,v=2*p+1,y=15,_=16,b=7,w=256,E=16,x=17,A=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(p+2));u(C);var I=new Array(2*m);u(I);var M=new Array(512);u(M);var L=new Array(256);u(L);var N=new Array(f);u(N);var P,U,O,B=new Array(m);function D(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function j(e){return e<256?M[e]:M[256+(e>>>7)]}function z(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function V(e,t,r){e.bi_valid>_-r?(e.bi_buf|=t<<e.bi_valid&65535,z(e,e.bi_buf),e.bi_buf=t>>_-e.bi_valid,e.bi_valid+=r-_):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Y(e,t,r){V(e,r[2*t],r[2*t+1])}function H(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function X(e,t,r){var n,i,a=new Array(y+1),s=0;for(n=1;n<=y;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=H(a[o]++,o))}}function q(e){var t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<g;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*w]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){e.bi_valid>8?z(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,r,i){G(e),i&&(z(e,r),z(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function Z(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function K(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Z(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function J(e,t,r){var n,i,a,s,o=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?Y(e,i,t):(Y(e,(a=L[i])+d+1,t),0!==(s=T[a])&&V(e,i-=N[a],s),Y(e,a=j(--n),r),0!==(s=S[a])&&V(e,n-=B[a],s))}while(o<e.last_lit);Y(e,w,t)}function Q(e,t){var r,n,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=v,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;r>=1;r--)K(e,a,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],K(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,K(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,s,o,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;a<=y;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<v;r++)(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)>p&&(a=p,m++),u[2*n+1]=a,n>l||(e.bl_count[a]++,s=0,n>=d&&(s=f[n-d]),o=u[2*n],e.opt_len+=o*(a+s),h&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>l||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),X(a,l,e.bl_count)}function $(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++o<u&&i===s||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*E]++):o<=10?e.bl_tree[2*x]++:e.bl_tree[2*A]++,o=0,a=i,0===s?(u=138,l=3):i===s?(u=6,l=3):(u=7,l=4))}function ee(e,t,r){var n,i,a=-1,s=t[1],o=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++o<u&&i===s)){if(o<l)do{Y(e,i,e.bl_tree)}while(0!=--o);else 0!==i?(i!==a&&(Y(e,i,e.bl_tree),o--),Y(e,E,e.bl_tree),V(e,o-3,2)):o<=10?(Y(e,x,e.bl_tree),V(e,o-3,3)):(Y(e,A,e.bl_tree),V(e,o-11,7));o=0,a=i,0===s?(u=138,l=3):i===s?(u=6,l=3):(u=7,l=4)}}function te(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<d;t++)if(0!==e.dyn_ltree[2*t])return s;return a}u(B);var re=!1;function ne(e,t,r,n){V(e,(l<<1)+(n?1:0),3),W(e,t,r,!0)}r._tr_init=function(e){re||(function(){var e,t,r,n,i,a=new Array(y+1);for(r=0,n=0;n<f-1;n++)for(N[n]=r,e=0;e<1<<T[n];e++)L[r++]=n;for(L[r-1]=n,i=0,n=0;n<16;n++)for(B[n]=i,e=0;e<1<<S[n];e++)M[i++]=n;for(i>>=7;n<m;n++)for(B[n]=i<<7,e=0;e<1<<S[n]-7;e++)M[256+i++]=n;for(t=0;t<=y;t++)a[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,a[8]++;for(;e<=255;)C[2*e+1]=9,e++,a[9]++;for(;e<=279;)C[2*e+1]=7,e++,a[7]++;for(;e<=287;)C[2*e+1]=8,e++,a[8]++;for(X(C,p+1,a),e=0;e<m;e++)I[2*e+1]=5,I[2*e]=H(e,5);P=new D(C,T,d+1,p,y),U=new D(I,S,0,m,y),O=new D(new Array(0),R,0,g,b)}(),re=!0),e.l_desc=new F(e.dyn_ltree,P),e.d_desc=new F(e.dyn_dtree,U),e.bl_desc=new F(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,q(e)},r._tr_stored_block=ne,r._tr_flush_block=function(e,t,r,n){var a,s,u=0;e.level>0?(e.strm.data_type===o&&(e.strm.data_type=te(e)),Q(e,e.l_desc),Q(e,e.d_desc),u=function(e){var t;for($(e,e.dyn_ltree,e.l_desc.max_code),$(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=g-1;t>=3&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?ne(e,t,r,n):e.strategy===i||s===a?(V(e,(c<<1)+(n?1:0),3),J(e,C,I)):(V(e,(h<<1)+(n?1:0),3),function(e,t,r,n){var i;for(V(e,t-257,5),V(e,r-1,5),V(e,n-4,4),i=0;i<n;i++)V(e,e.bl_tree[2*k[i]+1],3);ee(e,e.dyn_ltree,t-1),ee(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),J(e,e.dyn_ltree,e.dyn_dtree)),q(e),n&&G(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(L[r]+d+1)]++,e.dyn_dtree[2*j(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){V(e,c<<1,3),Y(e,w,C),function(e){16===e.bi_valid?(z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":"tbG5"}],uxo6:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0}},{}],X4kj:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var a=n,s=i+r;e^=-1;for(var o=i;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],gMAY:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],"+BLB":[function(e,t,r){"use strict";var n,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),l=0,c=1,h=3,f=4,d=5,p=0,m=1,g=-2,v=-3,y=-5,_=-1,b=1,w=2,E=3,x=4,A=0,T=2,S=8,R=9,k=15,C=8,I=286,M=30,L=19,N=2*I+1,P=15,U=3,O=258,B=O+U+1,D=32,F=42,j=69,z=73,V=91,Y=103,H=113,X=666,q=1,G=2,W=3,Z=4,K=3;function J(e,t){return e.msg=u[t],t}function Q(e){return(e<<1)-(e>4?9:0)}function $(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function te(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function re(e,t){e.pending_buf[e.pending++]=t}function ne(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t,r,n){var a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,i.arraySet(t,e.input,e.next_in,a,r),1===e.state.wrap?e.adler=s(e.adler,t,a,r):2===e.state.wrap&&(e.adler=o(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)}function ae(e,t){var r,n,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-B?e.strstart-(e.w_size-B):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+O,d=l[a+s-1],p=l[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+s]===p&&l[r+s-1]===d&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<f);if(n=O-(f-a),a=f-O,n>s){if(e.match_start=t,s=n,n>=o)break;d=l[a+s-1],p=l[a+s]}}}while((t=h[t&c])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function se(e){var t,r,n,a,s,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-B)){i.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=o?n-o:0}while(--r);t=r=o;do{n=e.prev[--t],e.prev[t]=n>=o?n-o:0}while(--r);a+=o}if(0===e.strm.avail_in)break;if(r=ie(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=U)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+U-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<U)););}while(e.lookahead<B&&0!==e.strm.avail_in)}function oe(e,t){for(var r,n;;){if(e.lookahead<B){if(se(e),e.lookahead<B&&t===l)return q;if(0===e.lookahead)break}if(r=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-B&&(e.match_length=ae(e,r)),e.match_length>=U)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=e.strstart<U-1?e.strstart:U-1,t===f?(te(e,!0),0===e.strm.avail_out?W:Z):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:G}function ue(e,t){for(var r,n,i;;){if(e.lookahead<B){if(se(e),e.lookahead<B&&t===l)return q;if(0===e.lookahead)break}if(r=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-B&&(e.match_length=ae(e,r),e.match_length<=5&&(e.strategy===b||e.match_length===U&&e.strstart-e.match_start>4096)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-U,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=U-1,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return q}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,t===f?(te(e,!0),0===e.strm.avail_out?W:Z):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:G}function le(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function ce(e){e.window_size=2*e.w_size,$(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=U-1,e.match_available=0,e.ins_h=0}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*N),this.dyn_dtree=new i.Buf16(2*(2*M+1)),this.bl_tree=new i.Buf16(2*(2*L+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*I+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=T,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?F:H,e.adler=2===t.wrap?0:1,t.last_flush=l,a._tr_init(t),p):J(e,g)}function de(e){var t=fe(e);return t===p&&ce(e.state),t}function pe(e,t,r,n,a,s){if(!e)return g;var o=1;if(t===_&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>R||r!==S||n<8||n>15||t<0||t>9||s<0||s>x)return J(e,g);8===n&&(n=9);var u=new he;return e.state=u,u.strm=e,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+U-1)/U),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,de(e)}n=[new le(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(se(e),0===e.lookahead&&t===l)return q;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,te(e,!1),0===e.strm.avail_out))return q;if(e.strstart-e.block_start>=e.w_size-B&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?W:Z):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),q)}),new le(4,4,8,4,oe),new le(4,5,16,8,oe),new le(4,6,32,32,oe),new le(4,4,16,16,ue),new le(8,16,32,32,ue),new le(8,16,128,128,ue),new le(8,32,128,256,ue),new le(32,128,258,1024,ue),new le(32,258,258,4096,ue)],r.deflateInit=function(e,t){return pe(e,t,S,k,C,A)},r.deflateInit2=pe,r.deflateReset=de,r.deflateResetKeep=fe,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,p):g},r.deflate=function(e,t){var r,i,s,u;if(!e||!e.state||t>d||t<0)return e?J(e,g):g;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===X&&t!==f)return J(e,0===e.avail_out?y:g);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===F)if(2===i.wrap)e.adler=0,re(i,31),re(i,139),re(i,8),i.gzhead?(re(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),re(i,255&i.gzhead.time),re(i,i.gzhead.time>>8&255),re(i,i.gzhead.time>>16&255),re(i,i.gzhead.time>>24&255),re(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),re(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(re(i,255&i.gzhead.extra.length),re(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=j):(re(i,0),re(i,0),re(i,0),re(i,0),re(i,0),re(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),re(i,K),i.status=H);else{var v=S+(i.w_bits-8<<4)<<8;v|=(i.strategy>=w||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=D),v+=31-v%31,i.status=H,ne(i,v),0!==i.strstart&&(ne(i,e.adler>>>16),ne(i,65535&e.adler)),e.adler=1}if(i.status===j)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending!==i.pending_buf_size));)re(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=z)}else i.status=z;if(i.status===z)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=V)}else i.status=V;if(i.status===V)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=Y)}else i.status=Y;if(i.status===Y&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(re(i,255&e.adler),re(i,e.adler>>8&255),e.adler=0,i.status=H)):i.status=H),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&Q(t)<=Q(r)&&t!==f)return J(e,y);if(i.status===X&&0!==e.avail_in)return J(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==l&&i.status!==X){var _=i.strategy===w?function(e,t){for(var r;;){if(0===e.lookahead&&(se(e),0===e.lookahead)){if(t===l)return q;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?W:Z):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:G}(i,t):i.strategy===E?function(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=O){if(se(e),e.lookahead<=O&&t===l)return q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=U&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=e.strstart+O;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=O-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(r=a._tr_tally(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===f?(te(e,!0),0===e.strm.avail_out?W:Z):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:G}(i,t):n[i.level].func(i,t);if(_!==W&&_!==Z||(i.status=X),_===q||_===W)return 0===e.avail_out&&(i.last_flush=-1),p;if(_===G&&(t===c?a._tr_align(i):t!==d&&(a._tr_stored_block(i,0,0,!1),t===h&&($(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,p}return t!==f?p:i.wrap<=0?m:(2===i.wrap?(re(i,255&e.adler),re(i,e.adler>>8&255),re(i,e.adler>>16&255),re(i,e.adler>>24&255),re(i,255&e.total_in),re(i,e.total_in>>8&255),re(i,e.total_in>>16&255),re(i,e.total_in>>24&255)):(ne(i,e.adler>>>16),ne(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==F&&t!==j&&t!==z&&t!==V&&t!==Y&&t!==H&&t!==X?J(e,g):(e.state=null,t===H?J(e,v):p):g},r.deflateSetDictionary=function(e,t){var r,n,a,o,u,l,c,h,f=t.length;if(!e||!e.state)return g;if(2===(o=(r=e.state).wrap)||1===o&&r.status!==F||r.lookahead)return g;for(1===o&&(e.adler=s(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&($(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,t,f-r.w_size,r.w_size,0),t=h,f=r.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,se(r);r.lookahead>=U;){n=r.strstart,a=r.lookahead-(U-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+U-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=U-1,se(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=U-1,r.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,r.wrap=o,p},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":"tbG5","./trees":"+sRJ","./adler32":"uxo6","./crc32":"X4kj","./messages":"gMAY"}],"34Q3":[function(e,t,r){"use strict";var n=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function u(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,a,s,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(u),s=0,a=0;s<u;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,a,o=t||e.length,l=new Array(2*o);for(n=0,r=0;r<o;)if((i=e[r++])<128)l[n++]=i;else if((a=s[i])>4)l[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<o;)i=i<<6|63&e[r++],a--;a>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+s[e[r]]>t?r:t}},{"./common":"tbG5"}],bdtv:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],nFS2:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),u=Object.prototype.toString,l=0,c=-1,h=0,f=8;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,p))!==l)throw new Error(s[r]);this._dict_set=!0}}function p(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}d.prototype.push=function(e,t){var r,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(c),o.next_out=0,o.avail_out=c),1!==(r=n.deflate(o,s))&&r!==l)return this.onEnd(r),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==s||(this.onEnd(l),o.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=d,r.deflate=p,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./zlib/deflate":"+BLB","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/messages":"gMAY","./zlib/zstream":"bdtv"}],LP5M:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,a,s,o,u,l,c,h,f,d,p,m,g,v,y,_,b,w,E,x,A,T,S;r=e.state,n=e.next_in,T=e.input,i=n+(e.avail_in-5),a=e.next_out,S=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,d=r.hold,p=r.bits,m=r.lencode,g=r.distcode,v=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),_=m[d&v];t:for(;;){if(d>>>=b=_>>>24,p-=b,0==(b=_>>>16&255))S[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&_,(b&=15)&&(p<b&&(d+=T[n++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),_=g[d&y];r:for(;;){if(d>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=g[(65535&_)+(d&(1<<b)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(E=65535&_,p<(b&=15)&&(d+=T[n++]<<p,(p+=8)<b&&(d+=T[n++]<<p,p+=8)),(E+=d&(1<<b)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=b,p-=b,E>(b=a-s)){if((b=E-b)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(x=0,A=f,0===h){if(x+=l-b,b<w){w-=b;do{S[a++]=f[x++]}while(--b);x=a-E,A=S}}else if(h<b){if(x+=l+h-b,(b-=h)<w){w-=b;do{S[a++]=f[x++]}while(--b);if(x=0,h<w){w-=b=h;do{S[a++]=f[x++]}while(--b);x=a-E,A=S}}}else if(x+=h-b,b<w){w-=b;do{S[a++]=f[x++]}while(--b);x=a-E,A=S}for(;w>2;)S[a++]=A[x++],S[a++]=A[x++],S[a++]=A[x++],w-=3;w&&(S[a++]=A[x++],w>1&&(S[a++]=A[x++]))}else{x=a-E;do{S[a++]=S[x++],S[a++]=S[x++],S[a++]=S[x++],w-=3}while(w>2);w&&(S[a++]=S[x++],w>1&&(S[a++]=S[x++]))}break}}break}}while(n<i&&a<o);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=d,r.bits=p}},{}],"2u+n":[function(e,t,r){"use strict";var n=e("../utils/common"),i=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,c,h,f,d){var p,m,g,v,y,_,b,w,E,x=d.bits,A=0,T=0,S=0,R=0,k=0,C=0,I=0,M=0,L=0,N=0,P=null,U=0,O=new n.Buf16(16),B=new n.Buf16(16),D=null,F=0;for(A=0;A<=i;A++)O[A]=0;for(T=0;T<l;T++)O[t[r+T]]++;for(k=x,R=i;R>=1&&0===O[R];R--);if(k>R&&(k=R),0===R)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(S=1;S<R&&0===O[S];S++);for(k<S&&(k=S),M=1,A=1;A<=i;A++)if(M<<=1,(M-=O[A])<0)return-1;if(M>0&&(0===e||1!==R))return-1;for(B[1]=0,A=1;A<i;A++)B[A+1]=B[A]+O[A];for(T=0;T<l;T++)0!==t[r+T]&&(f[B[t[r+T]]++]=T);if(0===e?(P=D=f,_=19):1===e?(P=a,U-=257,D=s,F-=257,_=256):(P=o,D=u,_=-1),N=0,T=0,A=S,y=h,C=k,I=0,g=-1,v=(L=1<<k)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){b=A-I,f[T]<_?(w=0,E=f[T]):f[T]>_?(w=D[F+f[T]],E=P[U+f[T]]):(w=96,E=0),p=1<<A-I,S=m=1<<C;do{c[y+(N>>I)+(m-=p)]=b<<24|w<<16|E|0}while(0!==m);for(p=1<<A-1;N&p;)p>>=1;if(0!==p?(N&=p-1,N+=p):N=0,T++,0==--O[A]){if(A===R)break;A=t[r+f[T]]}if(A>k&&(N&v)!==g){for(0===I&&(I=k),y+=S,M=1<<(C=A-I);C+I<R&&!((M-=O[C+I])<=0);)C++,M<<=1;if(L+=1<<C,1===e&&L>852||2===e&&L>592)return 1;c[g=N&v]=k<<24|C<<16|y-h|0}}return 0!==N&&(c[y+N]=A-I<<24|64<<16|0),d.bits=k,0}},{"../utils/common":"tbG5"}],GIDK:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),u=0,l=1,c=2,h=4,f=5,d=6,p=0,m=1,g=2,v=-2,y=-3,_=-4,b=-5,w=8,E=1,x=2,A=3,T=4,S=5,R=6,k=7,C=8,I=9,M=10,L=11,N=12,P=13,U=14,O=15,B=16,D=17,F=18,j=19,z=20,V=21,Y=22,H=23,X=24,q=25,G=26,W=27,Z=28,K=29,J=30,Q=31,$=32,ee=852,te=592,re=15;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ae(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=E,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(ee),t.distcode=t.distdyn=new n.Buf32(te),t.sane=1,t.back=-1,p):v}function se(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ae(e)):v}function oe(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,se(e))):v}function ue(e,t){var r,n;return e?(n=new ie,e.state=n,n.window=null,(r=oe(e,t))!==p&&(e.state=null),r):v}var le,ce,he=!0;function fe(e){if(he){var t;for(le=new n.Buf32(512),ce=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(l,e.lens,0,288,le,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(c,e.lens,0,32,ce,0,e.work,{bits:5}),he=!1}e.lencode=le,e.lenbits=9,e.distcode=ce,e.distbits=5}function de(e,t,r,i){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>i&&(a=i),n.arraySet(s.window,t,r-i,a,s.wnext),(i-=a)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}r.inflateReset=se,r.inflateReset2=oe,r.inflateResetKeep=ae,r.inflateInit=function(e){return ue(e,re)},r.inflateInit2=ue,r.inflate=function(e,t){var r,ee,te,re,ie,ae,se,oe,ue,le,ce,he,pe,me,ge,ve,ye,_e,be,we,Ee,xe,Ae,Te,Se=0,Re=new n.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(r=e.state).mode===N&&(r.mode=P),ie=e.next_out,te=e.output,se=e.avail_out,re=e.next_in,ee=e.input,ae=e.avail_in,oe=r.hold,ue=r.bits,le=ae,ce=se,xe=p;e:for(;;)switch(r.mode){case E:if(0===r.wrap){r.mode=P;break}for(;ue<16;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(2&r.wrap&&35615===oe){r.check=0,Re[0]=255&oe,Re[1]=oe>>>8&255,r.check=a(r.check,Re,2,0),oe=0,ue=0,r.mode=x;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&oe)<<8)+(oe>>8))%31){e.msg="incorrect header check",r.mode=J;break}if((15&oe)!==w){e.msg="unknown compression method",r.mode=J;break}if(ue-=4,Ee=8+(15&(oe>>>=4)),0===r.wbits)r.wbits=Ee;else if(Ee>r.wbits){e.msg="invalid window size",r.mode=J;break}r.dmax=1<<Ee,e.adler=r.check=1,r.mode=512&oe?M:N,oe=0,ue=0;break;case x:for(;ue<16;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(r.flags=oe,(255&r.flags)!==w){e.msg="unknown compression method",r.mode=J;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=J;break}r.head&&(r.head.text=oe>>8&1),512&r.flags&&(Re[0]=255&oe,Re[1]=oe>>>8&255,r.check=a(r.check,Re,2,0)),oe=0,ue=0,r.mode=A;case A:for(;ue<32;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.head&&(r.head.time=oe),512&r.flags&&(Re[0]=255&oe,Re[1]=oe>>>8&255,Re[2]=oe>>>16&255,Re[3]=oe>>>24&255,r.check=a(r.check,Re,4,0)),oe=0,ue=0,r.mode=T;case T:for(;ue<16;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.head&&(r.head.xflags=255&oe,r.head.os=oe>>8),512&r.flags&&(Re[0]=255&oe,Re[1]=oe>>>8&255,r.check=a(r.check,Re,2,0)),oe=0,ue=0,r.mode=S;case S:if(1024&r.flags){for(;ue<16;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.length=oe,r.head&&(r.head.extra_len=oe),512&r.flags&&(Re[0]=255&oe,Re[1]=oe>>>8&255,r.check=a(r.check,Re,2,0)),oe=0,ue=0}else r.head&&(r.head.extra=null);r.mode=R;case R:if(1024&r.flags&&((he=r.length)>ae&&(he=ae),he&&(r.head&&(Ee=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,ee,re,he,Ee)),512&r.flags&&(r.check=a(r.check,ee,he,re)),ae-=he,re+=he,r.length-=he),r.length))break e;r.length=0,r.mode=k;case k:if(2048&r.flags){if(0===ae)break e;he=0;do{Ee=ee[re+he++],r.head&&Ee&&r.length<65536&&(r.head.name+=String.fromCharCode(Ee))}while(Ee&&he<ae);if(512&r.flags&&(r.check=a(r.check,ee,he,re)),ae-=he,re+=he,Ee)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=C;case C:if(4096&r.flags){if(0===ae)break e;he=0;do{Ee=ee[re+he++],r.head&&Ee&&r.length<65536&&(r.head.comment+=String.fromCharCode(Ee))}while(Ee&&he<ae);if(512&r.flags&&(r.check=a(r.check,ee,he,re)),ae-=he,re+=he,Ee)break e}else r.head&&(r.head.comment=null);r.mode=I;case I:if(512&r.flags){for(;ue<16;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(oe!==(65535&r.check)){e.msg="header crc mismatch",r.mode=J;break}oe=0,ue=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=N;break;case M:for(;ue<32;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}e.adler=r.check=ne(oe),oe=0,ue=0,r.mode=L;case L:if(0===r.havedict)return e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=ae,r.hold=oe,r.bits=ue,g;e.adler=r.check=1,r.mode=N;case N:if(t===f||t===d)break e;case P:if(r.last){oe>>>=7&ue,ue-=7&ue,r.mode=W;break}for(;ue<3;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}switch(r.last=1&oe,ue-=1,3&(oe>>>=1)){case 0:r.mode=U;break;case 1:if(fe(r),r.mode=z,t===d){oe>>>=2,ue-=2;break e}break;case 2:r.mode=D;break;case 3:e.msg="invalid block type",r.mode=J}oe>>>=2,ue-=2;break;case U:for(oe>>>=7&ue,ue-=7&ue;ue<32;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if((65535&oe)!=(oe>>>16^65535)){e.msg="invalid stored block lengths",r.mode=J;break}if(r.length=65535&oe,oe=0,ue=0,r.mode=O,t===d)break e;case O:r.mode=B;case B:if(he=r.length){if(he>ae&&(he=ae),he>se&&(he=se),0===he)break e;n.arraySet(te,ee,re,he,ie),ae-=he,re+=he,se-=he,ie+=he,r.length-=he;break}r.mode=N;break;case D:for(;ue<14;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(r.nlen=257+(31&oe),oe>>>=5,ue-=5,r.ndist=1+(31&oe),oe>>>=5,ue-=5,r.ncode=4+(15&oe),oe>>>=4,ue-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=J;break}r.have=0,r.mode=F;case F:for(;r.have<r.ncode;){for(;ue<3;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.lens[ke[r.have++]]=7&oe,oe>>>=3,ue-=3}for(;r.have<19;)r.lens[ke[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ae={bits:r.lenbits},xe=o(u,r.lens,0,19,r.lencode,0,r.work,Ae),r.lenbits=Ae.bits,xe){e.msg="invalid code lengths set",r.mode=J;break}r.have=0,r.mode=j;case j:for(;r.have<r.nlen+r.ndist;){for(;ve=(Se=r.lencode[oe&(1<<r.lenbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(ye<16)oe>>>=ge,ue-=ge,r.lens[r.have++]=ye;else{if(16===ye){for(Te=ge+2;ue<Te;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(oe>>>=ge,ue-=ge,0===r.have){e.msg="invalid bit length repeat",r.mode=J;break}Ee=r.lens[r.have-1],he=3+(3&oe),oe>>>=2,ue-=2}else if(17===ye){for(Te=ge+3;ue<Te;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}ue-=ge,Ee=0,he=3+(7&(oe>>>=ge)),oe>>>=3,ue-=3}else{for(Te=ge+7;ue<Te;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}ue-=ge,Ee=0,he=11+(127&(oe>>>=ge)),oe>>>=7,ue-=7}if(r.have+he>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=J;break}for(;he--;)r.lens[r.have++]=Ee}}if(r.mode===J)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=J;break}if(r.lenbits=9,Ae={bits:r.lenbits},xe=o(l,r.lens,0,r.nlen,r.lencode,0,r.work,Ae),r.lenbits=Ae.bits,xe){e.msg="invalid literal/lengths set",r.mode=J;break}if(r.distbits=6,r.distcode=r.distdyn,Ae={bits:r.distbits},xe=o(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ae),r.distbits=Ae.bits,xe){e.msg="invalid distances set",r.mode=J;break}if(r.mode=z,t===d)break e;case z:r.mode=V;case V:if(ae>=6&&se>=258){e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=ae,r.hold=oe,r.bits=ue,s(e,ce),ie=e.next_out,te=e.output,se=e.avail_out,re=e.next_in,ee=e.input,ae=e.avail_in,oe=r.hold,ue=r.bits,r.mode===N&&(r.back=-1);break}for(r.back=0;ve=(Se=r.lencode[oe&(1<<r.lenbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(ve&&0==(240&ve)){for(_e=ge,be=ve,we=ye;ve=(Se=r.lencode[we+((oe&(1<<_e+be)-1)>>_e)])>>>16&255,ye=65535&Se,!(_e+(ge=Se>>>24)<=ue);){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}oe>>>=_e,ue-=_e,r.back+=_e}if(oe>>>=ge,ue-=ge,r.back+=ge,r.length=ye,0===ve){r.mode=G;break}if(32&ve){r.back=-1,r.mode=N;break}if(64&ve){e.msg="invalid literal/length code",r.mode=J;break}r.extra=15&ve,r.mode=Y;case Y:if(r.extra){for(Te=r.extra;ue<Te;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.length+=oe&(1<<r.extra)-1,oe>>>=r.extra,ue-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=H;case H:for(;ve=(Se=r.distcode[oe&(1<<r.distbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(0==(240&ve)){for(_e=ge,be=ve,we=ye;ve=(Se=r.distcode[we+((oe&(1<<_e+be)-1)>>_e)])>>>16&255,ye=65535&Se,!(_e+(ge=Se>>>24)<=ue);){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}oe>>>=_e,ue-=_e,r.back+=_e}if(oe>>>=ge,ue-=ge,r.back+=ge,64&ve){e.msg="invalid distance code",r.mode=J;break}r.offset=ye,r.extra=15&ve,r.mode=X;case X:if(r.extra){for(Te=r.extra;ue<Te;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}r.offset+=oe&(1<<r.extra)-1,oe>>>=r.extra,ue-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=J;break}r.mode=q;case q:if(0===se)break e;if(he=ce-se,r.offset>he){if((he=r.offset-he)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=J;break}he>r.wnext?(he-=r.wnext,pe=r.wsize-he):pe=r.wnext-he,he>r.length&&(he=r.length),me=r.window}else me=te,pe=ie-r.offset,he=r.length;he>se&&(he=se),se-=he,r.length-=he;do{te[ie++]=me[pe++]}while(--he);0===r.length&&(r.mode=V);break;case G:if(0===se)break e;te[ie++]=r.length,se--,r.mode=V;break;case W:if(r.wrap){for(;ue<32;){if(0===ae)break e;ae--,oe|=ee[re++]<<ue,ue+=8}if(ce-=se,e.total_out+=ce,r.total+=ce,ce&&(e.adler=r.check=r.flags?a(r.check,te,ce,ie-ce):i(r.check,te,ce,ie-ce)),ce=se,(r.flags?oe:ne(oe))!==r.check){e.msg="incorrect data check",r.mode=J;break}oe=0,ue=0}r.mode=Z;case Z:if(r.wrap&&r.flags){for(;ue<32;){if(0===ae)break e;ae--,oe+=ee[re++]<<ue,ue+=8}if(oe!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=J;break}oe=0,ue=0}r.mode=K;case K:xe=m;break e;case J:xe=y;break e;case Q:return _;case $:default:return v}return e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=ae,r.hold=oe,r.bits=ue,(r.wsize||ce!==e.avail_out&&r.mode<J&&(r.mode<W||t!==h))&&de(e,e.output,e.next_out,ce-e.avail_out)?(r.mode=Q,_):(le-=e.avail_in,ce-=e.avail_out,e.total_in+=le,e.total_out+=ce,r.total+=ce,r.wrap&&ce&&(e.adler=r.check=r.flags?a(r.check,te,ce,e.next_out-ce):i(r.check,te,ce,e.next_out-ce)),e.data_type=r.bits+(r.last?64:0)+(r.mode===N?128:0)+(r.mode===z||r.mode===O?256:0),(0===le&&0===ce||t===h)&&xe===p&&(xe=b),xe)},r.inflateEnd=function(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,p},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?v:(r.head=t,t.done=!1,p):v},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==L?v:r.mode===L&&i(1,t,n,0)!==r.check?y:de(e,t,n,n)?(r.mode=Q,_):(r.havedict=1,p):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":"tbG5","./adler32":"uxo6","./crc32":"X4kj","./inffast":"LP5M","./inftrees":"2u+n"}],xUUw:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],"/+WI":[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],faQk:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function f(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(e,t){var r,o,u,l,h,f,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(f="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&!0===g&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(d.output,d.next_out),l=d.next_out-u,h=a.buf2string(d.output,u),d.next_out=l,d.avail_out=p-l,l&&i.arraySet(d.output,d.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.ungzip=f},{"./zlib/inflate":"GIDK","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/constants":"xUUw","./zlib/messages":"gMAY","./zlib/zstream":"bdtv","./zlib/gzheader":"/+WI"}],f4vO:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/utils/common":"tbG5","./lib/deflate":"nFS2","./lib/inflate":"faQk","./lib/zlib/constants":"xUUw"}],p7rG:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=n?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",a.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{pako:"f4vO","./utils":"dvMn","./stream/GenericWorker":"ZKdc"}],XfO6:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./stream/GenericWorker":"ZKdc","./flate":"p7rG"}],Ctqd:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],xtj2:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker"),a=e("../utf8"),s=e("../crc32"),o=e("../signature"),u=function(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},l=function(e,t,r,i,l,c){var h,f,d=e.file,p=e.compression,m=c!==a.utf8encode,g=n.transformTo("string",c(d.name)),v=n.transformTo("string",a.utf8encode(d.name)),y=d.comment,_=n.transformTo("string",c(y)),b=n.transformTo("string",a.utf8encode(y)),w=v.length!==d.name.length,E=b.length!==y.length,x="",A="",T="",S=d.dir,R=d.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!w&&!E||(C|=2048);var I=0,M=0;S&&(I|=16),"UNIX"===l?(M=798,I|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(d.unixPermissions,S)):(M=20,I|=function(e,t){return 63&(e||0)}(d.dosPermissions)),h=R.getUTCHours(),h<<=6,h|=R.getUTCMinutes(),h<<=5,h|=R.getUTCSeconds()/2,f=R.getUTCFullYear()-1980,f<<=4,f|=R.getUTCMonth()+1,f<<=5,f|=R.getUTCDate(),w&&(A=u(1,1)+u(s(g),4)+v,x+="up"+u(A.length,2)+A),E&&(T=u(1,1)+u(s(_),4)+b,x+="uc"+u(T.length,2)+T);var L="";return L+="\n\0",L+=u(C,2),L+=p.magic,L+=u(h,2),L+=u(f,2),L+=u(k.crc32,4),L+=u(k.compressedSize,4),L+=u(k.uncompressedSize,4),L+=u(g.length,2),L+=u(x.length,2),{fileRecord:o.LOCAL_FILE_HEADER+L+g+x,dirRecord:o.CENTRAL_FILE_HEADER+u(M,2)+L+u(_.length,2)+"\0\0\0\0"+u(I,4)+u(i,4)+g+x+_}},c=function(e,t,r,i,a){var s=n.transformTo("string",a(i));return o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(e,2)+u(e,2)+u(t,4)+u(r,4)+u(s.length,2)+s},h=function(e){return o.DATA_DESCRIPTOR+u(e.crc32,4)+u(e.compressedSize,4)+u(e.uncompressedSize,4)};function f(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(f,i),f.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},f.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=l(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=l(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:h(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=c(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},f.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},f.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=f},{"../utils":"dvMn","../stream/GenericWorker":"ZKdc","../utf8":"Sm7/","../crc32":"cvyR","../signature":"Ctqd"}],GTg1:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker"),a=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i};r.generateWorker=function(e,t,r){var n=new i(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,r){s++;var i=a(r.options.compression,t.compression),o=r.options.compressionOptions||t.compressionOptions||{},u=r.dir,l=r.date;r._compressWorker(i,o).withStreamInfo("file",{name:e,dir:u,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)}),n.entriesCount=s}catch(e){n.error(e)}return n}},{"../compressions":"XfO6","./ZipFileWorker":"xtj2"}],AsaI:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(a,i),a.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../utils":"dvMn","../stream/GenericWorker":"ZKdc"}],e4aZ:[function(e,t,r){"use strict";var n=e("./utf8"),i=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),o=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),c=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),d=function(e,t,r){var n,s=i.getTypeOf(t),c=i.extend(r||{},o);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(e=m(e)),c.createFolders&&(n=p(e))&&g.call(this,n,!0);var d="string"===s&&!1===c.binary&&!1===c.base64;r&&void 0!==r.binary||(c.binary=!d),(t instanceof u&&0===t.uncompressedSize||c.dir||!t||0===t.length)&&(c.base64=!1,c.binary=!0,t="",c.compression="STORE",s="string");var v;v=t instanceof u||t instanceof a?t:h.isNode&&h.isStream(t)?new f(e,t):i.prepareContent(e,t,c.binary,c.optimizedBinaryString,c.base64);var y=new l(e,v,c);this.files[e]=y},p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:o.createFolders,e=m(e),this.files[e]||d.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1===arguments.length){if(v(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,d.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(v(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=g.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var o=r.comment||this.comment||"";t=c.generateWorker(this,r,o)}catch(e){(t=new a("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./utf8":"Sm7/","./utils":"dvMn","./stream/GenericWorker":"ZKdc","./stream/StreamHelper":"2P9T","./defaults":"lUr3","./compressedObject":"PO9O","./zipObject":"geN+","./generate":"GTg1","./nodejsUtils":"c5OX","./nodejs/NodejsStreamInputAdapter":"AsaI"}],"ML/b":[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":"dvMn"}],TCoK:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./DataReader":"ML/b","../utils":"dvMn"}],wOgZ:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./DataReader":"ML/b","../utils":"dvMn"}],nR4t:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./ArrayReader":"TCoK","../utils":"dvMn"}],daDe:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"./Uint8ArrayReader":"nR4t","../utils":"dvMn"}],"9Uuy":[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new u(n.transformTo("uint8array",e)):new a(n.transformTo("array",e)):new s(e)}},{"../utils":"dvMn","../support":"untT","./ArrayReader":"TCoK","./StringReader":"wOgZ","./NodeBufferReader":"daDe","./Uint8ArrayReader":"nR4t"}],dFUs:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)?null:s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./reader/readerFor":"9Uuy","./utils":"dvMn","./compressedObject":"PO9O","./crc32":"cvyR","./utf8":"Sm7/","./compressions":"XfO6","./support":"untT"}],rAgE:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":"9Uuy","./utils":"dvMn","./signature":"Ctqd","./zipEntry":"dFUs","./utf8":"Sm7/","./support":"untT"}],"2/gt":[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),a=e("./utf8"),s=(n=e("./utils"),e("./zipEntries")),o=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new i.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new s(t);return r.load(e),r}).then(function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var a=0;a<n.length;a++)r.push(l(n[a]));return i.Promise.all(r)}).then(function(e){for(var n=e.shift(),i=n.files,a=0;a<i.length;a++){var s=i[a];r.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r})}},{"./utils":"dvMn","./external":"8JlO","./utf8":"Sm7/","./zipEntries":"rAgE","./stream/Crc32Probe":"gpbE","./nodejsUtils":"c5OX"}],"1miM":[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}n.prototype=e("./object"),n.prototype.loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.2.0",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./object":"e4aZ","./load":"2/gt","./support":"untT","./defaults":"lUr3","./external":"8JlO"}],"7QCb":[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=i(e("./manifest")),s=i(e("./mask/index")),o=i(e("./promisable")),u=i(e("./x3p")),l=i(e("jszip"));r.default=class extends o.default{constructor(e){super(),this.root="",this.options=e,this.name=e.file.name||e.name||"file.x3p",this.promise=new Promise(this.load.bind(this))}hasFile(e){return this.zip&&null!==this.zip.file(e)}read(e,t="text"){if(!this.zip)return;let r=this.zip.file(this.root+e);return null!==r?r.async(t):void 0}write(e,t){this.zip&&this.zip.file(this.root+e,t)}toBlob(){if(this.zip)return this.zip.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}})}load(e,t){return n(this,void 0,void 0,function*(){let r=l.default();try{this.zip=yield r.loadAsync(this.options.file)}catch(e){return t("Invalid X3P File Specified")}const n=this.zip.file(/main\.xml$/g);if(0===n.length)return t("X3P files must contain a main.xml file");let i=n[0];n.length>0&&"main.xml"!==n[0].name&&(this.root=i.name.replace("main.xml","")),this.manifest=new a.default(yield i.async("text"));let s=yield this.getPointBuffer(),o=yield this.getMask();return e(new u.default({loader:this,manifest:this.manifest,mask:o,name:this.name,pointBuffer:s}))})}getPointBuffer(){return n(this,void 0,void 0,function*(){if(!this.manifest)return;let e=this.manifest.get("Record3 DataLink PointDataLink");return e?yield this.read(e,"arraybuffer"):void 0})}getMask(){return n(this,void 0,void 0,function*(){if(!this.manifest||!this.zip)return;let e=yield this.getMaskData();return new s.default({manifest:this.manifest,data:e})})}getMaskData(e){let t=e?e.querySelector("Link"):null,r=null!==t?t.nodeValue:"bindata/mask.png";return this.read(r,"arraybuffer")}};var c=e("./x3p");r.X3P=c.default;var h=e("./axis");r.Axis=h.default;var f=e("./mask");r.Mask=f.default;var d=e("./manifest");r.Manifest=d.default;var p=e("./renderer");r.Renderer=p.default},{"./manifest":"Dpmo","./mask/index":"HIFI","./promisable":"FXui","./x3p":"Z35u",jszip:"1miM","./axis":"JHoi","./mask":"HIFI","./renderer":"b60D"}]},{},["7QCb"])}).call(this,r(15).setImmediate)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),s=(l=r.slice()).length,u=0;u<s;u++)l[u].apply(this,o);return!0},r.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,a,s,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=s;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=o;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";(function(e,n){var i=r(21),a=r(22);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var s="undefined"!=typeof Uint8ClampedArray,o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=a([32,0])),o.BUFFER||(o.BUFFER=a([32,0]));var u=o.DATA,l=o.BUFFER;function c(e){if(e){var t=e.length||e.byteLength,r=i.log2(t);u[r].push(e)}}function h(e){e=i.nextPow2(e);var t=i.log2(e),r=u[t];return r.length>0?r.pop():new ArrayBuffer(e)}function f(e){return new Uint8Array(h(e),0,e)}function d(e){return new Uint16Array(h(2*e),0,e)}function p(e){return new Uint32Array(h(4*e),0,e)}function m(e){return new Int8Array(h(e),0,e)}function g(e){return new Int16Array(h(2*e),0,e)}function v(e){return new Int32Array(h(4*e),0,e)}function y(e){return new Float32Array(h(4*e),0,e)}function _(e){return new Float64Array(h(8*e),0,e)}function b(e){return s?new Uint8ClampedArray(h(e),0,e):f(e)}function w(e){return new DataView(h(e),0,e)}function E(e){e=i.nextPow2(e);var t=i.log2(e),r=l[t];return r.length>0?r.pop():new n(e)}t.free=function(e){if(n.isBuffer(e))l[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|i.log2(t);u[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeInt8=t.freeInt16=t.freeInt32=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){c(e.buffer)},t.freeArrayBuffer=c,t.freeBuffer=function(e){l[i.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return h(e);switch(t){case"uint8":return f(e);case"uint16":return d(e);case"uint32":return p(e);case"int8":return m(e);case"int16":return g(e);case"int32":return v(e);case"float":case"float32":return y(e);case"double":case"float64":return _(e);case"uint8_clamped":return b(e);case"buffer":return E(e);case"data":case"dataview":return w(e);default:return null}return null},t.mallocArrayBuffer=h,t.mallocUint8=f,t.mallocUint16=d,t.mallocUint32=p,t.mallocInt8=m,t.mallocInt16=g,t.mallocInt32=v,t.mallocFloat32=t.mallocFloat=y,t.mallocFloat64=t.mallocDouble=_,t.mallocUint8Clamped=b,t.mallocDataView=w,t.mallocBuffer=E,t.clearCache=function(){for(var e=0;e<32;++e)o.UINT8[e].length=0,o.UINT16[e].length=0,o.UINT32[e].length=0,o.INT8[e].length=0,o.INT16[e].length=0,o.INT32[e].length=0,o.FLOAT[e].length=0,o.DOUBLE[e].length=0,o.UINT8C[e].length=0,u[e].length=0,l[e].length=0}}).call(this,r(1),r(17).Buffer)},function(e,t,r){e.exports=r(23)},,function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(16),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(1))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,a,s,o,u=1,l={},c=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){a.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(s+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[u]=i,n(u),u++},f.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(1),r(4))},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(18),i=r(19),a=r(20);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=o(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=o(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?o(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=o(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return j(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var a,s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=r;a<o;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){h=!1;break}if(h)return a}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function _(e,t,r,n){return V(j(t,e.length-r),e,r,n)}function b(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return b(e,t,r,n)}function E(e,t,r,n){return V(z(t),e,r,n)}function x(e,t,r,n){return V(function(e,t){for(var r,n,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=S));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return l(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return k(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r),h=0;h<o;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=F(e[a]);return i}function I(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function P(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,a){return a||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,a){return a||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=u.isBuffer(e)?e:j(new u(e,n).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(1))},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=l(e),n=r[0],s=r[1],o=new a(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),u=0,c=s>0?n-4:n,h=0;h<c;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;2===s&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,o[u++]=255&t);1===s&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t);return o},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],s=0,o=r-i;s<o;s+=16383)a.push(c(e,s,s+16383>o?o:s+16383));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,a,s=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,u=(1<<o)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+h],h+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),a-=l}return(d?-1:1)*s*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(t*u-1)*Math.pow(2,i),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&o,d+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[r+d]=255&s,d+=p,s/=256,l-=8);e[r+d-p]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},function(e,t,r){"use strict";e.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,r,n){var i=0|t[n];if(i<=0)return[];var a,s=new Array(i);if(n===t.length-1)for(a=0;a<i;++a)s[a]=r;else for(a=0;a<i;++a)s[a]=e(t,r,n+1);return s}(e,t,0)}return[]}},function(e,t,r){"use strict";var n=r(0),i=r(5),a=r(25),s=r(3);function o(e){var t=new a(e),r=i(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var u=o(s);u.Axios=a,u.create=function(e){return o(n.merge(s,e))},u.Cancel=r(9),u.CancelToken=r(39),u.isCancel=r(8),u.all=function(e){return Promise.all(e)},u.spread=r(40),e.exports=u,e.exports.default=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(3),i=r(0),a=r(34),s=r(35);function o(e){this.defaults=e,this.interceptors={request:new a,response:new a}}o.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){o.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){o.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=o},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(0);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var s=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))}))}),a=s.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},function(e,t,r){"use strict";var n=r(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,s={};return e?(n.forEach(e.split("\n"),function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}}),s):s}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,a=String(e),s="",o=0,u=n;a.charAt(0|o)||(u="=",o%1);s+=u.charAt(63&t>>8-o%1*8)){if((r=a.charCodeAt(o+=.75))>255)throw new i;t=t<<8|r}return s}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,a,s){var o=[];o.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),n.isString(i)&&o.push("path="+i),n.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,r){"use strict";var n=r(0),i=r(36),a=r(8),s=r(3),o=r(37),u=r(38);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!o(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return l(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(l(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(9);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){!function(e){"use strict";function t(t,r){var n=e.createEvent("Event");n.initEvent(t,!0,!1),r.dispatchEvent(n)}function r(t){return function(r,i){return t!==s.exit||e[n.element]?(e.addEventListener(n.events.change,function t(){r(),e.removeEventListener(n.events.change,t,!1)},!1),void e.addEventListener(n.events.error,function t(){i(new TypeError),e.removeEventListener(n.events.error,t,!1)},!1)):void setTimeout(function(){i(new TypeError)},1)}}var n,i,a={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},s=a.w3;for(i in a)if(a[i].enabled in e){n=a[i];break}s.enabled in e||!n||(e.addEventListener(n.events.change,function(r){r.stopPropagation(),r.stopImmediatePropagation(),e[s.enabled]=e[n.enabled],e[s.element]=e[n.element],t(s.events.change,r.target)},!1),e.addEventListener(n.events.error,function(e){t(s.events.error,e.target)},!1),e[s.enabled]=e[n.enabled],e[s.element]=e[n.element],e[s.exit]=function(){var t=e[n.exit]();return!t&&Promise?new Promise(r(s.exit)):t},Element.prototype[s.request]=function(){var e=this[n.request].apply(this,arguments);return!e&&Promise?new Promise(r(s.request)):e})}(document)},function(e,t){Node.prototype.querySelectorImmediate=function(e){for(var t of this.children)if(t.matches(e))return t},Node.prototype.index=function(){let e=this.parentElement,t=0;for(let r of e.children){if(r===this)return t;t++}},Node.prototype.getPath=function(){let e=[this.tagName],t=this.parentElement;for(;t!==this.ownerDocument.documentElement;)e.push(t.tagName),t=t.parentElement;return e.reverse()},Node.prototype.on=function(e,t){this.addEventListener(e,t)},NodeList.prototype.on=function(e,t){for(let r of this)r.addEventListener(e,t)}},function(e,t){Document.prototype.createEasy=function(e,t={}){let r=this.createElement(e);if(void 0!==t.props)for(let e in t.props)r[e]=t.props[e];if(void 0!==t.attrs)for(let e in t.attrs)r.setAttribute(e,t.attrs[e]);if(void 0!==t.classes)for(let e of t.classes)r.classList.add(e);return r},Document.prototype.get=function(e){let t=this.querySelector(e);return null!==t?t.innerHTML:""},Document.prototype.getInt=function(e){return parseInt(this.get(e))},Document.prototype.getFloat=function(e){return parseFloat(this.get(e))}},function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n);class a{constructor(e,t=[],r=""){this.createElement(e,t,r)}update(e){this.el.innerHTML=`<div class="popup-content">${e}</div>`}display(e=0,t=!1){this.el.classList.add("active"),e>0&&setTimeout(()=>this.hide(t),1e3*e)}hide(e=!1){this.el.classList.remove("active"),e&&setTimeout(()=>this.destroy(),1e3)}destroy(){this.el.remove()}createElement(e,t=[],r=""){this.el=document.createEasy("div",{id:r,props:{innerHTML:`<div class="popup-content">${e}</div>`},classes:["popup"].concat(t)}),document.querySelector("body").appendChild(this.el)}}var s=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})};class o{constructor(e){this.session=e.session,this.label=document.querySelector(".upload label"),this.input=document.querySelector(".upload input"),this.setupListeners(),this.session.on("end",this.display.bind(this))}setupListeners(){let e=e=>e.preventDefault();for(let t of["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"])this.label.addEventListener(t,e);this.label.addEventListener("dragenter",e=>this.label.classList.add("hover")),this.label.addEventListener("dragleave",e=>this.label.classList.remove("hover")),this.label.addEventListener("drop",this.read.bind(this)),this.input.addEventListener("change",this.read.bind(this))}read(e){return s(this,void 0,void 0,function*(){e.stopPropagation(),this.label.classList.remove("hover");let t=e instanceof DragEvent?e.dataTransfer.files[0]:this.input.files[0],r=new a("Loading...",["loading"]);r.display();try{let e=yield new i.a({file:t});r.hide(!0),this.session.start(e)}catch(e){r.hide(!0),new a('<i class="fas fa-exclamation-triangle"></i> Please upload a valid X3P file.',["upload-error"]).display(2,!0),console.error(e)}finally{this.input.value=""}})}display(){document.querySelector("form").setAttribute("data-view","uploader"),this.input.value=""}}class u{constructor(e){this.session=e.session,this.defaultColor=e.defaultColor,this.el=e.el,this.overlay=this.el.querySelector(".input-overlay"),this.input=this.el.querySelector("input"),this.setupListeners(),this.session.on("start",this.reset.bind(this))}get value(){return this.input.value}reset(){this.input.value=this.defaultColor,this.overlay.style.backgroundColor=this.defaultColor}setupListeners(){this.input.onchange=(e=>{if(!this.session.started)return;let t=this.input.value;this.session.paintColor=t,this.overlay.style.backgroundColor=t})}}class l{constructor(e){this.el=e.el,this.session=e.session,this.setupListeners(),this.session.on("render",e=>this.value="Paint")}get value(){return this.el.value}set value(e){this.session.started&&(this.el.value=e,this.updateBrush())}setupListeners(){this.el.onchange=(e=>{this.session.paintMode=this.value,this.updateBrush()})}updateBrush(){if(!this.session.started||!this.session.brush)return;let e=this.session.x3p,t=this.session.brush,r=this.session.paintColor;switch(this.value){case"Paint":t.fillPolygons=!1,t.color=r;break;case"Lasso":t.fillPolygons=!0,t.color=r;break;case"Eraser":t.fillPolygons=!1,t.color=e.manifest.get("Record3 Mask Background")}}}class c{constructor(e){this.el=e.el,this.session=e.session,this.type=e.type,this.setupListeners()}setupListeners(){this.el.onclick=(e=>{if(!this.session.started)return;let t=this.session.x3p.mask.canvas,r=this.session.texture,n=this.session.renderer;t[this.type](),r.setPixels(t.el),n.drawMesh()})}}function h(e){if(!e||!e.match(/rgb\([0-9]+, [0-9]+, [0-9]+\)/g))return e;let t="#";e=(e=e.replace("rgb(","")).replace(")","");for(let r of e.split(",")){r=r.trim();let e=Number(r).toString(16);t+=1===e.length?`0${e}`:e}return t}class f{constructor(e){this.el=e.el,this.session=e.session,this.editor=e.editor,this.setupListeners(),this.session.on("paint:color-switch",e=>this.color=e)}get color(){return this.el.style.color}set color(e){if(!this.session.started)return;let t=this.el,r=this.session.x3p;t.style.color=e,t.value=r.mask.annotations[e]||""}get value(){return this.el.value}set value(e){this.el.value=e}setupListeners(){this.el.onkeyup=(e=>{if(!this.session.started)return;let t=this.session.x3p.mask.annotations,r=h(this.el.style.color),n=this.el.value;t[r]=n,this.updateEditor(r,n)})}updateEditor(e,t){if(!this.session.started)return;let r=this.session.x3p,n=document.querySelector(`[data-tag="Annotation"][data-color="${e}"] input`);if(n)n.value=t;else{let t=document.querySelector('[data-tag="Annotations"]'),n={children:[r.manifest.getNode(`Annotation[color="${e}"]`)]};if(!t){let e=document.querySelector('[data-tag="Mask"]');if(!e)return;n={children:[r.manifest.getNode("Record3 Mask Annotations")]},t=e}this.editor.inputify(n,t)}}}class d{constructor(e){this.el=e.el,this.session=e.session,this.setupListeners(),this.session.on("render",this.reset.bind(this))}reset(){this.session.started&&(this.value=.15,this.updateBrushSize())}get value(){return Number(this.el.value)/100}set value(e){!this.session.started||e<0||e>1||(this.el.value=String(100*e))}get maxBrushSize(){if(!this.session.started)return 0;let{x:e,y:t}=this.session.x3p.axes;return e.size/t.size*100}setupListeners(){this.el.onchange=this.updateBrushSize.bind(this)}updateBrushSize(){if(!this.session.started)return;this.session.brush.size=this.value*this.maxBrushSize}}const p="#1f376c",m="rgb(31, 55, 108)";class g{constructor(e){this.color={},this.listeners={mousedown:e=>this.dispatch.apply(this,[e,"begin"]),mousemove:e=>this.dispatch.apply(this,[e,"move"]),mouseup:e=>this.dispatch.apply(this,[e,"end"])},this.session=e.session,this.stage=e.stage,this.editor=e.editor;let t=e.stage.el;this.btn=t.querySelector(".fa-paint-brush"),this.tray=t.querySelector(".pane-paint-tray"),this.colorSwitcher=new u({session:this.session,el:t.querySelector(".input-color"),defaultColor:p}),this.modeSwitcher=new l({session:this.session,el:t.querySelector("#pane-paint-mode")}),this.undoButton=new c({session:this.session,el:t.querySelector("#undo"),type:"undo"}),this.redoButton=new c({session:this.session,el:t.querySelector("#redo"),type:"redo"}),this.annotationInput=new f({session:this.session,el:t.querySelector("#annotation"),editor:e.editor}),this.sizeSlider=new d({session:this.session,el:t.querySelector("#pane-paint-size")}),this.setupListeners(),this.session.on("render",this.update.bind(this))}update(){this.session.paintColor=p,this.annotationInput.color=m}setupListeners(){this.btn.onclick=(e=>{if(!this.session.renderer)return;let t=this.stage.toggleMode("paint");this.session.renderer.mode=t?"still":"normal",t?this.attachCanvasListeners():this.detachCanvasListeners()})}attachCanvasListeners(){let e=this.stage.canvas;for(let t in this.listeners)e.addEventListener(t,this.listeners[t])}detachCanvasListeners(){let e=this.stage.canvas;for(let t in this.listeners)e.removeEventListener(t,this.listeners[t])}dispatch(e,t){if(!this.session.renderer)return;if(3===e.which||2===e.button)return;let r=this.session.brush,n=this.session.renderer.selection,i=this.session.x3p.mask,a=this.session.texture,s=i.canvas.el;n&&r[t]&&("begin"===t||r.active)&&(r[t].apply(r,n.index),a.setPixels(s),this.session.renderer.drawMesh())}}class v{constructor(e){this.session=e.session,this.el=e.el,this.canvas=this.el.querySelector("canvas"),this.paint=new g({stage:this,editor:e.editor,session:this.session}),this.setupFullscreenBtn(),this.session.on("start",this.render.bind(this)),this.session.on("end",this.reset.bind(this))}get enabled(){return!this.el.hasAttribute("disabled")}set enabled(e){e?this.el.removeAttribute("disabled"):this.el.setAttribute("disabled","disabled")}get mode(){return this.el.getAttribute("data-mode")}set mode(e){this.el.setAttribute("data-mode",e)}toggleMode(e){let t=this.mode===e?"normal":e;return this.mode=t,t===e}reset(){this.mode="normal"}render(e){this.enabled&&this.session.started&&this.session.x3p&&(this.session.renderer=e.render(this.canvas))}setupFullscreenBtn(){let e=this.fullscreenBtn=this.el.querySelector(".fa-expand");e.onclick=(e=>{this.enabled&&this.session.started&&(null===document.fullscreenElement?this.el.requestFullscreen():document.exitFullscreen())}),document.onfullscreenchange=(t=>{null===document.fullscreenElement?e.classList.remove("active"):e.classList.add("active")})}}var y=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})};const _={date:"datetime-local"},b={MD5ChecksumPointData:"MD5 Checksum"};class w{constructor(e){this.session=e.session,this.el=document.querySelector(".view"),this.nav=this.el.querySelector("nav"),this.main=this.el.querySelector("main"),this.stage=new v({el:this.el.querySelector(".stage"),editor:this,session:e.session}),this.backbtn=this.el.querySelector(".back"),this.backbtn.onclick=this.session.end.bind(this.session),this.session.on("start",this.display.bind(this)),this.session.on("end",this.reset.bind(this))}reset(){this.nav.innerHTML="",this.main.innerHTML=""}generate(e){this.count=0,this.reset(),this.setupDownloadButton(),this.inputify(e,this.main)}inputify(e,t){for(let r of e.children){let e={"data-tag":r.tagName};for(let t of r.getAttributeNames())e[`data-${t}`]=r.getAttribute(t);let n=document.createEasy("div",{attrs:e});if(r.children.length>0||"section"===r.getAttribute("type"))n=this.inputify(r,n),r.tagName.match(/^Record/g)?this.nav.appendChild(this.createTab(r.tagName)):n.insertBefore(this.createHeading(r.tagName),n.children[0]);else{let e="Annotation"===r.tagName?r.getAttribute("color"):r.tagName;n.appendChild(this.createLabel(e,"x3p$"+this.count)),n.appendChild(this.createInput("x3p$"+this.count,r,r.hasAttribute("disabled"))),this.count++}t.appendChild(n)}return t}createTab(e){let t=document.createEasy("div",{props:{innerHTML:this.prettify(e)},attrs:{"data-target":e},classes:["tab"]});return t.onclick=(e=>{document.querySelector(".view").setAttribute("data-view",t.index().toString())}),t}createHeading(e){return document.createEasy("h3",{props:{innerHTML:this.prettify(e)}})}createLabel(e,t){return document.createEasy("label",{props:{innerHTML:this.prettify(e)+":"},attrs:{for:t}})}createInput(e,t,r=!1){let n=t.getAttribute("type")in _?_[t.getAttribute("type")]:"text",i=document.createEasy("input",{props:{type:n,value:t.innerHTML,id:e}}),a=this.stage.paint.annotationInput;return i.addEventListener("keyup",function(e){t.innerHTML=this.value,"Annotation"===t.tagName&&t.getAttribute("color")===h(a.color)&&(a.value=this.value)}),r&&i.setAttribute("disabled","disabled"),i}display(e){let t=e.manifest.getTree(),r=t.querySelector("body");r&&r.parentElement.removeChild(r),this.generate(t.children[0]),document.querySelector("form").setAttribute("data-view","editor"),this.stage.enabled=fix3p.render}prettify(e){if(e in b)return b[e];let t="";for(let r=0;r<e.length;r++)0!==r&&isNaN(e[r])&&e[r]===e[r].toUpperCase()&&e[r-1]===e[r-1].toLowerCase()&&(t+=" "),t+=e[r];return t}download(e){return y(this,void 0,void 0,function*(){if(!this.session.started)return;e.preventDefault();let t=this.session.x3p;yield t.save();let r=new a("Compressing...");r.display(),yield t.download(),r.update('\n            Continue editing this file? \n            <div class="popup-btns">\n                <div id="continue-yes" class="popup-btn">Yes</div>\n                <div id="continue-no" class="popup-btn">No</div>\n            </div>\n        '),r.el.querySelector("#continue-yes").onclick=(e=>r.hide(!0)),r.el.querySelector("#continue-no").onclick=(e=>{r.hide(!0),this.reset()})})}setupDownloadButton(){let e=document.createEasy("a",{props:{href:"#"},classes:["tab"]});e.innerHTML='<i class="fas fa-download"></i> Download</a>',e.onclick=this.download.bind(this),this.nav.appendChild(e)}}var E=r(11),x=r(12);class A{constructor(e){this.active=!1,this.color="red",this.size=5,this.capStyle="round",this.fillPolygons=!0,this.canvas=e.canvas,this.context=e.canvas.context,e.color&&(this.color=e.color),e.size&&(this.size=e.size),e.capStyle&&(this.capStyle=e.capStyle),e.fillPolygons&&(this.fillPolygons=e.fillPolygons),e.nolisteners||this.setupListeners()}setupListeners(){let e=this.canvas.el;e.addEventListener("mousedown",e=>this.begin.apply(this,[e.clientX,e.clientY])),e.addEventListener("mousemove",e=>this.move.apply(this,[e.clientX,e.clientY])),e.addEventListener("mouseup",e=>this.end.apply(this,[e.clientX,e.clientY]))}begin(e,t){if(this.active)return;this.active=!0;let r=this.context;r.lineWidth=this.size,r.strokeStyle=this.color,r.fillStyle=this.color,r.lineCap=this.capStyle,r.beginPath(),r.moveTo(e,t),r.lineTo(e,t),r.stroke()}move(e,t){if(!this.active)return;let r=this.context;r.lineTo(e,t),r.stroke()}end(e,t){if(!this.active)return;let r=this.context;r.lineTo(e,t),r.stroke(),r.closePath(),this.fillPolygons&&r.fill(),this.active=!1,this.canvas.save()}}var T=r(13),S=r.n(T),R=(r(41),r(42),r(43),function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})});window.fix3p={session:new class extends E.EventEmitter{constructor(){super(...arguments),this.data={}}start(e){this.started||(this.data.x3p=e,this.emit("start",this.data.x3p))}end(){this.started&&(this.data.renderer&&this.data.renderer.dispose(),this.emit("end"),this.data={},Object(x.clearCache)())}get x3p(){return this.data.x3p}get renderer(){return this.data.renderer}set renderer(e){this.data.renderer=e,this.data.texture=this.data.x3p.mask.getTexture(),this.data.brush=new A({canvas:this.data.x3p.mask.canvas,nolisteners:!0}),this.emit("render",this.data)}get texture(){return this.data.texture}get brush(){return this.data.brush}get paintColor(){if(this.data.brush)return this.data.paintColor}set paintColor(e){this.data.brush&&(this.data.paintColor=e,"Eraser"!==this.paintMode&&(this.data.brush.color=e),this.emit("paint:color-switch",e))}get paintMode(){return this.data.paintMode}set paintMode(e){this.data.paintMode=e,this.emit("paint:mode-switch",e)}get started(){return void 0!==this.data.x3p}},extLoaded:!1,render:!0};try{void 0!==window.chrome.runtime.id&&(fix3p.extLoaded=!0)}catch(e){console.log("Chrome Extension not detected")}!function(){R(this,void 0,void 0,function*(){fix3p.uploader=new o({session:fix3p.session}),fix3p.uploader.display(),fix3p.editor=new w({session:fix3p.session});let e=new a("");try{let t=localStorage.getItem("openfile");if(null!==t){localStorage.removeItem("openfile"),e.update("Reading file..."),e.display(),t=decodeURIComponent(t);let r=(yield S.a.get(t,{responseType:"blob"})).data;fix3p.uploader.read({dataTransfer:{files:[new File([r],"file.x3p")]}})}e.hide(!0)}catch(t){e.update("Error reading X3P file."),e.display(2,!0),console.error(t)}})}(),window.addEventListener("keydown",e=>{let t=document.querySelector("form").getAttribute("data-view");return(e.ctrlKey||e.metaKey)&&83===e.which?"editor"!==t||(e.preventDefault(),document.querySelector("a.tab").click(),!1):27===e.which&&"editor"===t&&null===document.fullscreenElement?(e.preventDefault(),fix3p.session.end(),!0):void 0})}]);